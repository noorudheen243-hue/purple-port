import{q as v,r as c,x as f,j as e,K as N,L as b}from"./index-CVFz3GnQ.js";import{i as y,x as C,y as w,O as k,z as S,G as _,H as A,X as D,u as O,F as h,C as E,B as T}from"./index-MXZ1Fyy1.js";import{C as z,a as L,b as q,c as G}from"./card-L7c9AA96.js";import{A as M}from"./arrow-left-BOi8SXvp.js";import{C as P}from"./check-circle-C7q7Y3EO.js";import{X as $}from"./x-circle--Q6_SlDM.js";const R=({clientId:d,isOpen:g,onClose:o})=>{const t=v(),[u,r]=c.useState(""),[n,p]=c.useState(""),[m,x]=c.useState(""),[s,i]=c.useState(""),l=y({mutationFn:async a=>await f.post("/campaigns",a),onSuccess:()=>{t.invalidateQueries({queryKey:["client",d]}),o(),r(""),p(""),x(""),i("")}}),j=a=>{a.preventDefault(),l.mutate({title:u,start_date:n,end_date:m,goals:s,client_id:d})};return e.jsx(C,{open:g,onOpenChange:o,children:e.jsxs(w,{children:[e.jsx(k,{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50"}),e.jsxs(S,{className:"fixed top-[50%] left-[50%] translate-x-[-50%] translate-y-[-50%] bg-background text-foreground p-6 rounded-lg shadow-lg w-[90vw] max-w-md z-50 border border-border",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx(_,{className:"text-xl font-semibold",children:"Create New Campaign"}),e.jsx(A,{className:"text-muted-foreground hover:text-foreground",children:e.jsx(D,{size:20})})]}),e.jsxs("form",{onSubmit:j,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Campaign Title"}),e.jsx("input",{type:"text",className:"w-full h-10 px-3 rounded-md border border-input bg-background",value:u,onChange:a=>r(a.target.value),required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Start Date"}),e.jsx("input",{type:"date",className:"w-full h-10 px-3 rounded-md border border-input bg-background",value:n,onChange:a=>p(a.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"End Date"}),e.jsx("input",{type:"date",className:"w-full h-10 px-3 rounded-md border border-input bg-background",value:m,onChange:a=>x(a.target.value),required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Goals (Optional)"}),e.jsx("textarea",{className:"w-full p-3 rounded-md border border-input bg-background min-h-[100px]",value:s,onChange:a=>i(a.target.value)})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[e.jsx("button",{type:"button",onClick:o,className:"px-4 py-2 text-sm font-medium text-muted-foreground hover:text-foreground",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:l.isPending,className:"px-4 py-2 text-sm font-medium bg-primary text-primary-foreground rounded-md hover:bg-primary/90 disabled:opacity-50",children:l.isPending?"Creating...":"Create Campaign"})]})]})]})]})})},H=()=>{var m,x;const{id:d}=N(),[g,o]=c.useState(!1),{data:t,isLoading:u}=O({queryKey:["client",d],queryFn:async()=>{const{data:s}=await f.get(`/clients/${d}`);return s}}),[r,n]=c.useState("overview");if(u)return e.jsx("div",{children:"Loading..."});if(!t)return e.jsx("div",{children:"Client not found"});const p=t.service_engagement?Array.isArray(t.service_engagement)?t.service_engagement:typeof t.service_engagement=="string"?JSON.parse(t.service_engagement):[]:[];return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(b,{to:"/dashboard/clients",className:"text-muted-foreground hover:text-foreground",children:e.jsx(M,{size:20})}),e.jsx("h1",{className:"text-3xl font-bold",children:t.name}),e.jsx("span",{className:"text-lg text-muted-foreground font-mono",children:t.client_code}),e.jsx("span",{className:"px-3 py-1 bg-muted rounded-full text-sm",children:t.industry}),e.jsxs(b,{to:`/dashboard/accounts?tab=statements&entity_id=${t.id}&entity_type=CLIENT`,className:"ml-auto flex items-center gap-2 text-sm text-primary border border-primary px-3 py-1.5 rounded-md hover:bg-primary/5",children:[e.jsx(h,{size:16})," View Ledger"]})]}),e.jsxs("div",{className:"border-b flex gap-6 text-sm font-medium text-muted-foreground mb-6",children:[e.jsx("button",{onClick:()=>n("overview"),className:`pb-2 border-b-2 transition-colors ${r==="overview"?"border-primary text-foreground":"border-transparent hover:text-foreground"}`,children:"Overview & Campaigns"}),e.jsx("button",{onClick:()=>n("services"),className:`pb-2 border-b-2 transition-colors ${r==="services"?"border-primary text-foreground":"border-transparent hover:text-foreground"}`,children:"Services & Portal Access"}),e.jsx("button",{onClick:()=>n("approvals"),className:`pb-2 border-b-2 transition-colors ${r==="approvals"?"border-primary text-foreground":"border-transparent hover:text-foreground"}`,children:"Approvals"}),e.jsx("button",{onClick:()=>n("reports"),className:`pb-2 border-b-2 transition-colors ${r==="reports"?"border-primary text-foreground":"border-transparent hover:text-foreground"}`,children:"Reports"})]}),r==="overview"&&e.jsxs("div",{className:"animate-in fade-in duration-300",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Campaigns"}),e.jsx("button",{onClick:()=>o(!0),className:"bg-primary text-primary-foreground px-4 py-2 rounded-md font-medium text-sm",children:"+ New Campaign"})]}),e.jsxs("div",{className:"space-y-4",children:[(m=t.campaigns)==null?void 0:m.map(s=>e.jsxs("div",{className:"bg-card border border-border p-4 rounded-lg flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:s.title}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[new Date(s.start_date).toLocaleDateString()," - ",new Date(s.end_date).toLocaleDateString()]})]}),e.jsxs(b,{to:`/dashboard/calendar?client_id=${t.id}`,className:"text-primary hover:underline flex items-center gap-2",children:[e.jsx(E,{size:16}),"View Calendar"]})]},s.id)),((x=t.campaigns)==null?void 0:x.length)===0&&e.jsx("div",{className:"text-center py-8 text-muted-foreground border border-dashed rounded-lg",children:"No campaigns yet. Create one to get started."})]})]}),r==="services"&&e.jsx("div",{className:"animate-in fade-in duration-300",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:["META_ADS","GOOGLE_ADS","SEO","WEB_DEV","CONTENT","BRANDING"].map(s=>{var l;const i=p.includes(s);return e.jsxs(z,{className:i?"":"opacity-60 grayscale",children:[e.jsx(L,{children:e.jsxs(q,{className:"text-lg flex items-center justify-between",children:[s.replace("_"," "),i?e.jsx(P,{className:"text-green-500",size:20}):e.jsx($,{className:"text-gray-300",size:20})]})}),e.jsxs(G,{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:i?"Active on Client Portal":"Not engaged"}),i&&s==="META_ADS"&&e.jsxs("p",{className:"text-xs font-medium text-blue-600 mt-2",children:["Active Campaigns: ",((l=t.campaigns)==null?void 0:l.length)||0]})]})]},s)})})}),r==="approvals"&&e.jsx("div",{className:"animate-in fade-in duration-300",children:e.jsxs("div",{className:"bg-card border border-border p-8 rounded-lg text-center",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Pending Approvals"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Manage content or assets waiting for client approval."}),e.jsx("p",{className:"text-sm text-gray-400 italic",children:"No pending items."})]})}),r==="reports"&&e.jsx("div",{className:"animate-in fade-in duration-300",children:e.jsxs("div",{className:"bg-card border border-border p-8 rounded-lg text-center",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Client Reports"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"View and download monthly performance reports."}),e.jsx("div",{className:"flex justify-center",children:e.jsxs(T,{variant:"outline",className:"gap-2",children:[e.jsx(h,{size:16})," Generate New Report"]})})]})}),e.jsx(R,{clientId:d,isOpen:g,onClose:()=>o(!1)})]})};export{H as default};
