import{v as w,r as i,C as x,j as e,x as U}from"./index-CVFz3GnQ.js";import{J as N,X as k,_ as R}from"./index-MXZ1Fyy1.js";import{L as h}from"./loader-2-BN6j0axX.js";/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=w("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]),z=({value:t,onChange:l,label:u="Upload Image",className:g=""})=>{const[n,d]=i.useState(!1),[y,a]=i.useState(t),s=i.useRef(null);x.useEffect(()=>{a(t)},[t]),x.useEffect(()=>{a(t)},[t]);const j=async r=>{var f;const o=(f=r.target.files)==null?void 0:f[0];if(!o)return;const v=URL.createObjectURL(o);a(v),d(!0);const m=new FormData;m.append("file",o);try{const c=await U.post("/upload",m,{headers:{"Content-Type":"multipart/form-data"}});l(c.data.url)}catch(c){console.error("Upload failed",c),alert("Upload failed"),a(t)}finally{d(!1)}},b=()=>{l(""),a(""),s.current&&(s.current.value="")},p=N(y);return e.jsxs("div",{className:`space-y-2 ${g}`,children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:u}),p?e.jsxs("div",{className:"relative w-32 h-32 rounded-lg overflow-hidden border border-gray-200 group",children:[e.jsx("img",{src:p,alt:"Preview",className:"w-full h-full object-cover",onError:r=>{r.target.src="https://via.placeholder.com/150?text=Error"}}),e.jsx("button",{type:"button",onClick:b,className:"absolute top-1 right-1 bg-red-500 text-white p-1 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(k,{size:14})}),n&&e.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center",children:e.jsx(h,{className:"animate-spin text-white"})})]}):e.jsx("div",{onClick:()=>{var r;return(r=s.current)==null?void 0:r.click()},className:"w-32 h-32 border-2 border-dashed border-gray-300 rounded-lg flex flex-col items-center justify-center cursor-pointer hover:border-primary hover:bg-primary/5 transition-colors",children:n?e.jsx(h,{className:"animate-spin text-gray-400"}):e.jsxs(e.Fragment,{children:[e.jsx(R,{className:"text-gray-400 mb-2",size:24}),e.jsx("span",{className:"text-xs text-gray-500 text-center px-2",children:"Click to Upload"})]})}),e.jsx("input",{type:"file",ref:s,className:"hidden",accept:"image/*",onChange:j})]})};export{L as B,z as I};
