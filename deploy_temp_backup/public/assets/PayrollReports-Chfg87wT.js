import{r as o,j as n,x as ue}from"./index-CVFz3GnQ.js";import{aB as te,u as pe,g as He}from"./index-MXZ1Fyy1.js";import{C as T,a as _,b as C,c as k,d as Ge}from"./card-L7c9AA96.js";import{S as B,a as V,b as W,c as Y,d as O}from"./select-CRNC5CBq.js";import{T as qe,a as Je,b as G,c as S,d as Xe,e as A}from"./table-DEHLnAz_.js";import{L as Ze}from"./loader-2-BN6j0axX.js";import{i as q,a as Ie,s as Ae,D as ae,b as we,c as Qe,Z as re,L as ne,u as Se,d as et,e as tt,f as Z,g as Ee,h as ie,j as De,k as Oe,l as Le,m as at,n as rt,o as nt,p as fe,q as it,r as Te,t as _e,R as st,S as ot,v as lt,w as Ce,x as ct,y as dt,z as ut,A as ke,B as me,C as pt,J as ft,E as K,F as mt,G as ht,H as vt,I as xt,K as yt,M as he,T as ve,N as gt}from"./CategoricalChart-D2XFSdKj.js";import{u as bt,G as jt,S as Pt,C as Nt,B as It,a as xe,X as ye,Y as ge,b as At}from"./BarChart-Dfc35vU_.js";import"./index-C_y8q7n2.js";import"./index-COFXZIMB.js";function Q(){return Q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},Q.apply(null,arguments)}var Re=e=>{var{cx:t,cy:a,r,className:i}=e,l=te("recharts-dot",i);return q(t)&&q(a)&&q(r)?o.createElement("circle",Q({},Ae(e),Ie(e),{className:l,cx:t,cy:a,r})):null},wt=["points"];function be(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,r)}return a}function J(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?be(Object(a),!0).forEach(function(r){St(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):be(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function St(e,t,a){return(t=Et(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Et(e){var t=Dt(e,"string");return typeof t=="symbol"?t:t+""}function Dt(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function F(){return F=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},F.apply(null,arguments)}function Ot(e,t){if(e==null)return{};var a,r,i=Lt(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)a=l[r],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function Lt(e,t){if(e==null)return{};var a={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;a[r]=e[r]}return a}function Tt(e){var{option:t,dotProps:a,className:r}=e;if(o.isValidElement(t))return o.cloneElement(t,a);if(typeof t=="function")return t(a);var i=te(r,typeof t!="boolean"?t.className:""),l=a??{},{points:c}=l,u=Ot(l,wt);return o.createElement(Re,F({},u,{className:i}))}function _t(e,t){return e==null?!1:t?!0:e.length===1}function Ct(e){var{points:t,dot:a,className:r,dotClassName:i,dataKey:l,baseProps:c,needClip:u,clipPathId:d,zIndex:p=ae.scatter}=e;if(!_t(t,a))return null;var v=we(a),f=Qe(a),x=t.map((b,y)=>{var j,s,m=J(J(J({r:3},c),f),{},{index:y,cx:(j=b.x)!==null&&j!==void 0?j:void 0,cy:(s=b.y)!==null&&s!==void 0?s:void 0,dataKey:l,value:b.value,payload:b.payload,points:t});return o.createElement(Tt,{key:"dot-".concat(y),option:a,dotProps:m,className:i})}),g={};return u&&d!=null&&(g.clipPath="url(#clipPath-".concat(v?"":"dots-").concat(d,")")),o.createElement(re,{zIndex:p},o.createElement(ne,F({className:r},g),x))}function je(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,r)}return a}function X(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?je(Object(a),!0).forEach(function(r){kt(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):je(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function kt(e,t,a){return(t=Rt(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Rt(e){var t=Kt(e,"string");return typeof t=="symbol"?t:t+""}function Kt(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Mt=e=>{var{point:t,childIndex:a,mainColor:r,activeDot:i,dataKey:l,clipPath:c}=e;if(i===!1||t.x==null||t.y==null)return null;var u={index:a,dataKey:l,cx:t.x,cy:t.y,r:4,fill:r??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},d=X(X(X({},u),Ee(i)),Ie(i)),p;return o.isValidElement(i)?p=o.cloneElement(i,d):typeof i=="function"?p=i(d):p=o.createElement(Re,d),o.createElement(ne,{className:"recharts-active-dot",clipPath:c},p)};function $t(e){var{points:t,mainColor:a,activeDot:r,itemDataKey:i,clipPath:l,zIndex:c=ae.activeDot}=e,u=Se(et),d=tt();if(t==null||d==null)return null;var p=t.find(v=>d.includes(v.payload));return Z(p)?null:o.createElement(re,{zIndex:c},o.createElement(Mt,{point:p,childIndex:Number(u),mainColor:a,dataKey:i,activeDot:r,clipPath:l}))}var Ke=(e,t,a,r)=>Oe(e,"xAxis",t,r),Me=(e,t,a,r)=>Le(e,"xAxis",t,r),$e=(e,t,a,r)=>Oe(e,"yAxis",a,r),Be=(e,t,a,r)=>Le(e,"yAxis",a,r),Bt=ie([De,Ke,$e,Me,Be],(e,t,a,r,i)=>nt(e,"xAxis")?fe(t,r,!1):fe(a,i,!1)),Vt=(e,t,a,r,i)=>i;function Wt(e){return e.type==="line"}var Yt=ie([rt,Vt],(e,t)=>e.filter(Wt).find(a=>a.id===t)),Ft=ie([De,Ke,$e,Me,Be,Yt,Bt,at],(e,t,a,r,i,l,c,u)=>{var{chartData:d,dataStartIndex:p,dataEndIndex:v}=u;if(!(l==null||t==null||a==null||r==null||i==null||r.length===0||i.length===0||c==null||e!=="horizontal"&&e!=="vertical")){var{dataKey:f,data:x}=l,g;if(x!=null&&x.length>0?g=x:g=d==null?void 0:d.slice(p,v+1),g!=null)return ua({layout:e,xAxis:t,yAxis:a,xAxisTicks:r,yAxisTicks:i,dataKey:f,bandSize:c,displayedData:g})}});function zt(e){var t=Ee(e),a=3,r=2;if(t!=null){var{r:i,strokeWidth:l}=t,c=Number(i),u=Number(l);return(Number.isNaN(c)||c<0)&&(c=a),(Number.isNaN(u)||u<0)&&(u=r),{r:c,strokeWidth:u}}return{r:a,strokeWidth:r}}var Ut=["id"],Ht=["type","layout","connectNulls","needClip","shape"],Gt=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function M(){return M=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},M.apply(null,arguments)}function Pe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,r)}return a}function w(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Pe(Object(a),!0).forEach(function(r){qt(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Pe(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function qt(e,t,a){return(t=Jt(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Jt(e){var t=Xt(e,"string");return typeof t=="symbol"?t:t+""}function Xt(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function se(e,t){if(e==null)return{};var a,r,i=Zt(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)a=l[r],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function Zt(e,t){if(e==null)return{};var a={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;a[r]=e[r]}return a}var Qt=e=>{var{dataKey:t,name:a,stroke:r,legendType:i,hide:l}=e;return[{inactive:l,dataKey:t,type:i,color:r,value:Ce(a,t),payload:e}]},ea=o.memo(e=>{var{dataKey:t,data:a,stroke:r,strokeWidth:i,fill:l,name:c,hide:u,unit:d,tooltipType:p,id:v}=e,f={dataDefinedOnItem:a,positions:void 0,settings:{stroke:r,strokeWidth:i,fill:l,dataKey:t,nameKey:void 0,name:Ce(c,t),hide:u,type:p,color:r,unit:d,graphicalItemId:v}};return o.createElement(ct,{tooltipEntrySettings:f})}),Ve=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function ta(e,t){for(var a=e.length%2!==0?[...e,0]:e,r=[],i=0;i<t;++i)r=[...r,...a];return r}var aa=(e,t,a)=>{var r=a.reduce((f,x)=>f+x);if(!r)return Ve(t,e);for(var i=Math.floor(e/r),l=e%r,c=t-e,u=[],d=0,p=0;d<a.length;p+=a[d],++d)if(p+a[d]>l){u=[...a.slice(0,d),l-p];break}var v=u.length%2===0?[0,c]:[c];return[...ta(a,i),...u,...v].map(f=>"".concat(f,"px")).join(", ")};function ra(e){var{clipPathId:t,points:a,props:r}=e,{dot:i,dataKey:l,needClip:c}=r,{id:u}=r,d=se(r,Ut),p=Ae(d);return o.createElement(Ct,{points:a,dot:i,className:"recharts-line-dots",dotClassName:"recharts-line-dot",dataKey:l,baseProps:p,needClip:c,clipPathId:t})}function na(e){var{showLabels:t,children:a,points:r}=e,i=o.useMemo(()=>r==null?void 0:r.map(l=>{var c,u,d={x:(c=l.x)!==null&&c!==void 0?c:0,y:(u=l.y)!==null&&u!==void 0?u:0,width:0,lowerWidth:0,upperWidth:0,height:0};return w(w({},d),{},{value:l.value,payload:l.payload,viewBox:d,parentViewBox:void 0,fill:void 0})}),[r]);return o.createElement(ht,{value:t?i:void 0},a)}function Ne(e){var{clipPathId:t,pathRef:a,points:r,strokeDasharray:i,props:l}=e,{type:c,layout:u,connectNulls:d,needClip:p,shape:v}=l,f=se(l,Ht),x=w(w({},vt(f)),{},{fill:"none",className:"recharts-line-curve",clipPath:p?"url(#clipPath-".concat(t,")"):void 0,points:r,type:c,layout:u,connectNulls:d,strokeDasharray:i??l.strokeDasharray});return o.createElement(o.Fragment,null,(r==null?void 0:r.length)>1&&o.createElement(xt,M({shapeType:"curve",option:v},x,{pathRef:a})),o.createElement(ra,{points:r,clipPathId:t,props:l}))}function ia(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch{return 0}}function sa(e){var{clipPathId:t,props:a,pathRef:r,previousPointsRef:i,longestAnimatedLengthRef:l}=e,{points:c,strokeDasharray:u,isAnimationActive:d,animationBegin:p,animationDuration:v,animationEasing:f,animateNewValues:x,width:g,height:b,onAnimationEnd:y,onAnimationStart:j}=a,s=i.current,m=pt(c,"recharts-line-"),h=o.useRef(m),[P,N]=o.useState(!1),L=!P,z=o.useCallback(()=>{typeof y=="function"&&y(),N(!1)},[y]),U=o.useCallback(()=>{typeof j=="function"&&j(),N(!0)},[j]),E=ia(r.current),$=o.useRef(0);h.current!==m&&($.current=l.current,h.current=m);var oe=$.current;return o.createElement(na,{points:c,showLabels:L},a.children,o.createElement(ft,{animationId:m,begin:p,duration:v,isActive:d,easing:f,onAnimationEnd:z,onAnimationStart:U,key:m},D=>{var Ye=K(oe,E+oe,D),H=Math.min(Ye,E),R;if(d)if(u){var Fe="".concat(u).split(/[,\s]+/gim).map(I=>parseFloat(I));R=aa(H,E,Fe)}else R=Ve(E,H);else R=u==null?void 0:String(u);if(D>0&&E>0&&(i.current=c,l.current=Math.max(l.current,H)),s){var ze=s.length/c.length,le=D===1?c:c.map((I,Ue)=>{var ce=Math.floor(Ue*ze);if(s[ce]){var de=s[ce];return w(w({},I),{},{x:K(de.x,I.x,D),y:K(de.y,I.y,D)})}return x?w(w({},I),{},{x:K(g*2,I.x,D),y:K(b/2,I.y,D)}):w(w({},I),{},{x:I.x,y:I.y})});return i.current=le,o.createElement(Ne,{props:a,points:le,clipPathId:t,pathRef:r,strokeDasharray:R})}return o.createElement(Ne,{props:a,points:c,clipPathId:t,pathRef:r,strokeDasharray:R})}),o.createElement(mt,{label:a.label}))}function oa(e){var{clipPathId:t,props:a}=e,r=o.useRef(null),i=o.useRef(0),l=o.useRef(null);return o.createElement(sa,{props:a,clipPathId:t,previousPointsRef:r,longestAnimatedLengthRef:i,pathRef:l})}var la=(e,t)=>{var a,r;return{x:(a=e.x)!==null&&a!==void 0?a:void 0,y:(r=e.y)!==null&&r!==void 0?r:void 0,value:e.value,errorVal:ke(e.payload,t)}};class ca extends o.Component{render(){var{hide:t,dot:a,points:r,className:i,xAxisId:l,yAxisId:c,top:u,left:d,width:p,height:v,id:f,needClip:x,zIndex:g}=this.props;if(t)return null;var b=te("recharts-line",i),y=f,{r:j,strokeWidth:s}=zt(a),m=we(a),h=j*2+s,P=x?"url(#clipPath-".concat(m?"":"dots-").concat(y,")"):void 0;return o.createElement(re,{zIndex:g},o.createElement(ne,{className:b},x&&o.createElement("defs",null,o.createElement(jt,{clipPathId:y,xAxisId:l,yAxisId:c}),!m&&o.createElement("clipPath",{id:"clipPath-dots-".concat(y)},o.createElement("rect",{x:d-h/2,y:u-h/2,width:p+h,height:v+h}))),o.createElement(Pt,{xAxisId:l,yAxisId:c,data:r,dataPointFormatter:la,errorBarOffset:0},o.createElement(oa,{props:this.props,clipPathId:y}))),o.createElement($t,{activeDot:this.props.activeDot,points:r,mainColor:this.props.stroke,itemDataKey:this.props.dataKey,clipPath:P}))}}var We={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:"auto",label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0,zIndex:ae.line,type:"linear"};function da(e){var t=Te(e,We),{activeDot:a,animateNewValues:r,animationBegin:i,animationDuration:l,animationEasing:c,connectNulls:u,dot:d,hide:p,isAnimationActive:v,label:f,legendType:x,xAxisId:g,yAxisId:b,id:y}=t,j=se(t,Gt),{needClip:s}=bt(g,b),m=dt(),h=ut(),P=_e(),N=Se($=>Ft($,g,b,P,y));if(h!=="horizontal"&&h!=="vertical"||N==null||m==null)return null;var{height:L,width:z,x:U,y:E}=m;return o.createElement(ca,M({},j,{id:y,connectNulls:u,dot:d,activeDot:a,animateNewValues:r,animationBegin:i,animationDuration:l,animationEasing:c,isAnimationActive:v,hide:p,label:f,legendType:x,xAxisId:g,yAxisId:b,points:N,layout:h,height:L,width:z,left:U,top:E,needClip:s}))}function ua(e){var{layout:t,xAxis:a,yAxis:r,xAxisTicks:i,yAxisTicks:l,dataKey:c,bandSize:u,displayedData:d}=e;return d.map((p,v)=>{var f=ke(p,c);if(t==="horizontal"){var x=me({axis:a,ticks:i,bandSize:u,entry:p,index:v}),g=Z(f)?null:r.scale(f);return{x,y:g,value:f,payload:p}}var b=Z(f)?null:a.scale(f),y=me({axis:r,ticks:l,bandSize:u,entry:p,index:v});return b==null||y==null?null:{x:b,y,value:f,payload:p}}).filter(Boolean)}function pa(e){var t=Te(e,We),a=_e();return o.createElement(st,{id:t.id,type:"line"},r=>o.createElement(o.Fragment,null,o.createElement(ot,{legendPayload:Qt(t)}),o.createElement(ea,{dataKey:t.dataKey,data:t.data,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:r}),o.createElement(lt,{type:"line",id:r,data:t.data,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,hide:t.hide,isPanorama:a}),o.createElement(da,M({},t,{id:r}))))}var ee=o.memo(pa,it);ee.displayName="Line";var fa=["axis"],ma=o.forwardRef((e,t)=>o.createElement(Nt,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:fa,tooltipPayloadSearcher:yt,categoricalChartProps:e,ref:t}));const Aa=()=>{const[e,t]=o.useState("TEAM"),[a,r]=o.useState("MONTHLY"),[i,l]=o.useState(new Date().getFullYear().toString()),[c,u]=o.useState((new Date().getMonth()+1).toString()),[d,p]=o.useState(""),{data:v=[]}=pe({queryKey:["staff-list-reports"],queryFn:async()=>(await ue.get("/team/staff")).data}),{data:f=[],isLoading:x,isError:g}=pe({queryKey:["payroll-history",e,a,i,c,d],queryFn:async()=>{const s={year:i};if(a==="MONTHLY"&&(s.month=c),e==="INDIVIDUAL"){if(!d)return[];s.userId=d}return(await ue.get("/payroll/history",{params:s})).data},enabled:e==="TEAM"||e==="INDIVIDUAL"&&!!d}),b=()=>f.reduce((s,m)=>s+m.net_pay,0),y=()=>{const s={};return f.forEach(h=>{const P=h.run.month,N=new Date(0,P-1).toLocaleString("default",{month:"short"});s[N]=(s[N]||0)+h.net_pay}),Array.from({length:12},(h,P)=>new Date(0,P).toLocaleString("default",{month:"short"})).map(h=>({name:h,total:s[h]||0}))},j=()=>f.map(s=>({month:new Date(0,s.run.month-1).toLocaleString("default",{month:"short"}),basic:s.basic_salary,allowances:s.hra+s.allowances+s.conveyance_allowance+s.accommodation_allowance+s.incentives,deductions:s.lop_deduction+s.advance_salary+s.other_deductions,net:s.net_pay})).sort((s,m)=>{const h={Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11};return h[s.month]-h[m.month]});return n.jsxs("div",{className:"space-y-6 max-w-7xl mx-auto pb-12",children:[n.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 bg-white p-6 rounded-lg shadow-sm border",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Payroll Reports"}),n.jsx("p",{className:"text-muted-foreground",children:"Generate comprehensive payment reports."})]}),n.jsxs("div",{className:"flex flex-wrap gap-3 items-center",children:[n.jsxs("div",{className:"inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",children:[n.jsx("button",{onClick:()=>t("TEAM"),className:`inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 ${e==="TEAM"?"bg-background text-foreground shadow":""}`,children:"Team"}),n.jsx("button",{onClick:()=>t("INDIVIDUAL"),className:`inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 ${e==="INDIVIDUAL"?"bg-background text-foreground shadow":""}`,children:"Individual"})]}),n.jsxs(B,{value:a,onValueChange:r,children:[n.jsx(V,{className:"w-[120px]",children:n.jsx(W,{placeholder:"Period"})}),n.jsxs(Y,{children:[n.jsx(O,{value:"MONTHLY",children:"Monthly"}),n.jsx(O,{value:"YEARLY",children:"Yearly"})]})]}),a==="MONTHLY"&&n.jsxs(B,{value:c,onValueChange:u,children:[n.jsx(V,{className:"w-[140px]",children:n.jsx(W,{placeholder:"Month"})}),n.jsx(Y,{children:Array.from({length:12},(s,m)=>m+1).map(s=>n.jsx(O,{value:s.toString(),children:new Date(0,s-1).toLocaleString("default",{month:"long"})},s))})]}),n.jsxs(B,{value:i,onValueChange:l,children:[n.jsx(V,{className:"w-[100px]",children:n.jsx(W,{placeholder:"Year"})}),n.jsxs(Y,{children:[n.jsx(O,{value:"2024",children:"2024"}),n.jsx(O,{value:"2025",children:"2025"}),n.jsx(O,{value:"2026",children:"2026"})]})]}),e==="INDIVIDUAL"&&n.jsxs(B,{value:d,onValueChange:p,children:[n.jsx(V,{className:"w-[200px]",children:n.jsx(W,{placeholder:"Select Staff"})}),n.jsx(Y,{children:v.map(s=>n.jsx(O,{value:s.user_id,children:s.user.full_name},s.user_id))})]})]})]}),e==="INDIVIDUAL"&&!d&&n.jsxs("div",{className:"text-center p-12 bg-white rounded-lg border border-dashed",children:[n.jsx(He,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4 opacity-50"}),n.jsx("h3",{className:"text-lg font-medium",children:"Select a Staff Member"}),n.jsx("p",{className:"text-muted-foreground",children:"Please select a staff member to view their individual payroll report."})]}),x&&(d||e==="TEAM")&&n.jsx("div",{className:"flex justify-center p-12",children:n.jsx(Ze,{className:"w-8 h-8 animate-spin text-primary"})}),!x&&(d||e==="TEAM")&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsxs(T,{children:[n.jsx(_,{className:"pb-2",children:n.jsx(C,{className:"text-sm font-medium text-muted-foreground",children:"Total Payout"})}),n.jsxs(k,{children:[n.jsxs("div",{className:"text-2xl font-bold",children:["₹",b().toLocaleString("en-IN")]}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"for selected period"})]})]}),n.jsxs(T,{children:[n.jsx(_,{className:"pb-2",children:n.jsx(C,{className:"text-sm font-medium text-muted-foreground",children:"Records Found"})}),n.jsxs(k,{children:[n.jsx("div",{className:"text-2xl font-bold",children:f.length}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"processed slips"})]})]}),n.jsxs(T,{children:[n.jsx(_,{className:"pb-2",children:n.jsx(C,{className:"text-sm font-medium text-muted-foreground",children:"Average Payout"})}),n.jsxs(k,{children:[n.jsxs("div",{className:"text-2xl font-bold",children:["₹",f.length?Math.round(b()/f.length).toLocaleString("en-IN"):0]}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"per slip"})]})]})]}),e==="TEAM"&&a==="YEARLY"&&n.jsxs(T,{children:[n.jsx(_,{children:n.jsx(C,{children:"Monthly Payroll Cost Trend"})}),n.jsx(k,{className:"h-[300px]",children:n.jsx(he,{width:"100%",height:"100%",children:n.jsxs(It,{data:y(),children:[n.jsx(xe,{strokeDasharray:"3 3",vertical:!1}),n.jsx(ye,{dataKey:"name"}),n.jsx(ge,{}),n.jsx(ve,{formatter:s=>`₹${(s||0).toLocaleString("en-IN")}`}),n.jsx(At,{dataKey:"total",fill:"#4f46e5",radius:[4,4,0,0],name:"Total Payout"})]})})})]}),e==="INDIVIDUAL"&&a==="YEARLY"&&n.jsxs(T,{children:[n.jsx(_,{children:n.jsxs(C,{children:["Salary Trend (",i,")"]})}),n.jsx(k,{className:"h-[300px]",children:n.jsx(he,{width:"100%",height:"100%",children:n.jsxs(ma,{data:j(),children:[n.jsx(xe,{strokeDasharray:"3 3",vertical:!1}),n.jsx(ye,{dataKey:"month"}),n.jsx(ge,{}),n.jsx(ve,{formatter:s=>`₹${(s||0).toLocaleString("en-IN")}`}),n.jsx(gt,{}),n.jsx(ee,{type:"monotone",dataKey:"net",stroke:"#16a34a",strokeWidth:2,name:"Net Pay"}),n.jsx(ee,{type:"monotone",dataKey:"basic",stroke:"#64748b",name:"Basic Salary"})]})})})]}),n.jsxs(T,{children:[n.jsxs(_,{children:[n.jsx(C,{children:"Detailed Breakdown"}),n.jsx(Ge,{children:e==="TEAM"?`All staff payroll for ${a==="MONTHLY"?`${new Date(0,parseInt(c)-1).toLocaleString("default",{month:"long"})} ${i}`:i}`:`Payroll history for selected staff in ${i}`})]}),n.jsx(k,{children:n.jsxs(qe,{children:[n.jsx(Je,{children:n.jsxs(G,{children:[n.jsx(S,{children:"Run Period"}),e==="TEAM"&&n.jsx(S,{children:"Staff Name"}),n.jsx(S,{children:"Designation"}),n.jsx(S,{children:"Basic"}),n.jsx(S,{children:"HRA"}),n.jsx(S,{children:"Allowances"}),n.jsx(S,{children:"Deductions"}),n.jsx(S,{className:"text-right font-bold",children:"Net Pay"}),n.jsx(S,{children:"Status"})]})}),n.jsx(Xe,{children:f.length===0?n.jsx(G,{children:n.jsx(A,{colSpan:9,className:"text-center py-8 text-muted-foreground",children:"No records found for this period."})}):f.map(s=>{var m,h,P,N,L;return n.jsxs(G,{children:[n.jsxs(A,{children:[new Date(0,s.run.month-1).toLocaleString("default",{month:"short"})," ",s.run.year]}),e==="TEAM"&&n.jsxs(A,{className:"font-medium",children:[(m=s.user)==null?void 0:m.full_name,n.jsx("div",{className:"text-xs text-muted-foreground",children:(P=(h=s.user)==null?void 0:h.staffProfile)==null?void 0:P.staff_number})]}),n.jsx(A,{children:((L=(N=s.user)==null?void 0:N.staffProfile)==null?void 0:L.designation)||s.designation||"-"}),n.jsxs(A,{children:["₹",s.basic_salary.toLocaleString()]}),n.jsxs(A,{children:["₹",s.hra.toLocaleString()]}),n.jsxs(A,{children:["₹",(s.allowances+s.conveyance_allowance+s.accommodation_allowance+s.incentives).toLocaleString()]}),n.jsxs(A,{className:"text-red-500",children:["-₹",(s.lop_deduction+s.advance_salary+s.other_deductions).toLocaleString()]}),n.jsxs(A,{className:"text-right font-bold text-green-700",children:["₹",s.net_pay.toLocaleString()]}),n.jsx(A,{children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${s.status==="PAID"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:s.status})})]},s.id)})})]})})]})]})]})};export{Aa as default};
