import{v as L,r as j,j as e,D as R,x as c}from"./index-CVFz3GnQ.js";import{u as y,T}from"./index-MXZ1Fyy1.js";import{S as A,a as I,b as k,c as F,d as u}from"./select-CRNC5CBq.js";import{C as O,a as P,b as z,c as D}from"./card-L7c9AA96.js";import{T as $,a as q,b as x,c as o}from"./tabs-Dihxgigl.js";import{F as E}from"./filter-wAG_XgtK.js";import{T as M}from"./target-0LBVyXOu.js";import"./index-C_y8q7n2.js";import"./index-COFXZIMB.js";import"./index-CGf8YfUr.js";/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=L("MousePointer",[["path",{d:"m3 3 7.07 16.97 2.51-7.39 7.39-2.51L3 3z",key:"y2ucgo"}],["path",{d:"m13 13 6 6",key:"1nhxnf"}]]),Z=()=>{var p;const[l,b]=j.useState("ALL"),[d,m]=j.useState(!1),{data:r}=y({queryKey:["clients-list"],queryFn:async()=>{const{data:s}=await c.get("/clients");return s}}),{data:i=[],isLoading:N,refetch:f}=y({queryKey:["ads-stats"],queryFn:async()=>{const{data:s}=await c.get("/ad-intelligence/stats");return s}}),v=async()=>{m(!0);try{await c.post("/ad-intelligence/sync"),await f(),alert("Data synced successfully from Ad Platforms!")}catch(s){alert("Sync failed. Check console."),console.error(s)}finally{m(!1)}};if(N)return e.jsx("div",{className:"p-8 text-center",children:"Loading Intelligence..."});l==="ALL"||i.filter(s=>{var t;return s.clientName===((t=r==null?void 0:r.find(C=>C.id===l))==null?void 0:t.name)});const w=(p=r==null?void 0:r.find(s=>s.id===l))==null?void 0:p.name,a=l==="ALL"?i:i.filter(s=>s.clientName===w),n=a.reduce((s,t)=>s+t.spend,0),h=a.reduce((s,t)=>s+t.revenue,0),g=n>0?h/n:0,S=a.reduce((s,t)=>s+t.conversions,0);return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Ad Intelligence & ROI"}),e.jsx("p",{className:"text-muted-foreground",children:"Track performance across all connected Meta accounts."})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(A,{value:l,onValueChange:b,children:[e.jsxs(I,{className:"w-[200px] bg-white",children:[e.jsx(E,{className:"w-4 h-4 mr-2"}),e.jsx(k,{placeholder:"Filter by Client"})]}),e.jsxs(F,{children:[e.jsx(u,{value:"ALL",children:"All Clients"}),r==null?void 0:r.map(s=>e.jsx(u,{value:s.id,children:s.name},s.id))]})]}),e.jsxs("button",{onClick:v,disabled:d,className:`flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:opacity-50 transition-all ${d?"animate-pulse":""}`,children:[e.jsx(R,{size:18,className:d?"animate-spin":""}),d?"Syncing...":"Sync"]})]})]}),e.jsxs($,{defaultValue:"campaigns",className:"space-y-6",children:[e.jsxs(q,{className:"bg-white border",children:[e.jsx(x,{value:"campaigns",children:"Campaigns"}),e.jsx(x,{value:"roi",children:"ROI Analysis"}),e.jsx(x,{value:"reports",children:"Reports"})]}),e.jsxs(o,{value:"campaigns",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsx("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Spend"}),e.jsxs("h3",{className:"text-2xl font-bold text-gray-900 mt-1",children:["₹",n.toLocaleString("en-IN")]})]})}),e.jsx("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Impressions"}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mt-1",children:a.reduce((s,t)=>s+t.impressions,0).toLocaleString()})]})}),e.jsx("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Clicks"}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mt-1",children:a.reduce((s,t)=>s+t.clicks,0).toLocaleString()})]})}),e.jsx("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Avg CTR"}),e.jsxs("h3",{className:"text-2xl font-bold text-gray-900 mt-1",children:[(a.reduce((s,t)=>s+(t.clicks/t.impressions||0),0)/(a.length||1)*100).toFixed(2),"%"]})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"p-6 border-b border-gray-100",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Campaign Performance"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-xs font-semibold text-gray-500 uppercase",children:"Campaign"}),e.jsx("th",{className:"px-6 py-3 text-xs font-semibold text-gray-500 uppercase",children:"Client"}),e.jsx("th",{className:"px-6 py-3 text-xs font-semibold text-gray-500 uppercase text-right",children:"Spend"}),e.jsx("th",{className:"px-6 py-3 text-xs font-semibold text-gray-500 uppercase text-right",children:"Impressions"}),e.jsx("th",{className:"px-6 py-3 text-xs font-semibold text-gray-500 uppercase text-right",children:"Clicks"}),e.jsx("th",{className:"px-6 py-3 text-xs font-semibold text-gray-500 uppercase text-right",children:"Status"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:a.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-8 text-center text-gray-500",children:"No campaigns found."})}):a.map((s,t)=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:s.campaignName}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:s.clientName}),e.jsxs("td",{className:"px-6 py-4 text-sm text-right font-mono",children:["₹",s.spend.toLocaleString()]}),e.jsx("td",{className:"px-6 py-4 text-sm text-right",children:s.impressions.toLocaleString()}),e.jsx("td",{className:"px-6 py-4 text-sm text-right",children:s.clicks.toLocaleString()}),e.jsx("td",{className:"px-6 py-4 text-sm text-right",children:e.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-700 rounded text-xs",children:"Active"})})]},t))})]})})]})]}),e.jsxs(o,{value:"roi",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsx("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Revenue"}),e.jsxs("h3",{className:"text-2xl font-bold text-green-600 mt-1",children:["₹",h.toLocaleString("en-IN")]})]}),e.jsx("div",{className:"p-2 bg-green-50 rounded-lg",children:e.jsx(T,{className:"text-green-600",size:24})})]})}),e.jsx("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Avg. ROAS"}),e.jsxs("h3",{className:`text-2xl font-bold mt-1 ${g>=2?"text-green-600":"text-yellow-600"}`,children:[g.toFixed(2),"x"]})]}),e.jsx("div",{className:"p-2 bg-yellow-50 rounded-lg",children:e.jsx(M,{className:"text-yellow-600",size:24})})]})}),e.jsx("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Conversions"}),e.jsx("h3",{className:"text-2xl font-bold text-blue-600 mt-1",children:S})]}),e.jsx("div",{className:"p-2 bg-blue-50 rounded-lg",children:e.jsx(V,{className:"text-blue-600",size:24})})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"p-6 border-b border-gray-100",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"ROI Breakdown"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-xs font-semibold text-gray-500 uppercase",children:"Campaign"}),e.jsx("th",{className:"px-6 py-3 text-xs font-semibold text-gray-500 uppercase text-right",children:"Spend"}),e.jsx("th",{className:"px-6 py-3 text-xs font-semibold text-gray-500 uppercase text-right",children:"Revenue"}),e.jsx("th",{className:"px-6 py-3 text-xs font-semibold text-gray-500 uppercase text-right",children:"ROAS"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:a.map((s,t)=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:s.campaignName}),e.jsxs("td",{className:"px-6 py-4 text-sm text-right font-mono",children:["₹",s.spend.toLocaleString()]}),e.jsxs("td",{className:"px-6 py-4 text-sm text-right font-mono text-green-700",children:["₹",s.revenue.toLocaleString()]}),e.jsx("td",{className:"px-6 py-4 text-sm text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsxs("span",{className:`font-bold ${s.roas>=4?"text-green-600":s.roas>=2?"text-blue-600":"text-red-600"}`,children:[s.roas.toFixed(1),"x"]}),e.jsx("div",{className:"w-16 h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full ${s.roas>=4?"bg-green-500":s.roas>=2?"bg-blue-500":"bg-red-500"}`,style:{width:`${Math.min(s.roas/5*100,100)}%`}})})]})})]},t))})]})})]})]}),e.jsx(o,{value:"reports",children:e.jsxs(O,{children:[e.jsx(P,{children:e.jsx(z,{children:"Reports"})}),e.jsx(D,{children:e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx("p",{children:"Select a Client to generate detailed Ad Performance Reports."}),e.jsxs("div",{className:"mt-4 flex justify-center gap-4",children:[e.jsx("button",{className:"px-4 py-2 bg-secondary rounded hover:bg-secondary/80",children:"Download PDF Report"}),e.jsx("button",{className:"px-4 py-2 bg-secondary rounded hover:bg-secondary/80",children:"Export to Excel"})]})]})})]})})]})]})};export{Z as default};
