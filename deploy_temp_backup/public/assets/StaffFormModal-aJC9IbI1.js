import{v as K,q as ae,r as j,C as ne,x as _,j as e}from"./index-CVFz3GnQ.js";import{an as ie,ao as te,u as G,a1 as oe,a4 as de,a6 as H,i as ce,S as me,X as ue,g as U,ag as z,a8 as g,a7 as a,am as X,ap as n}from"./index-MXZ1Fyy1.js";import{B as k,I as xe}from"./ImageUpload-B3ISCpRG.js";import{F as pe}from"./FormErrorAlert-DfwZ5q27.js";import{G as q,Z as he}from"./compat-JR35noTw.js";import{S as E}from"./save-Ch7_aoOB.js";/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=K("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=K("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);function W(u){return ie(te,u)}const i="w-full p-2.5 border border-input bg-background rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-primary/20 transition-all placeholder:text-muted-foreground text-foreground disabled:opacity-50 disabled:cursor-not-allowed",$=["CO-FOUNDER","Creative Director","Art Director","Senior Graphic Designer","Graphic Designer","Copywriter","Content Strategist","Social Media Manager","Social Media Executive","SEO Specialist","Web Developer","Account Director","Account Manager","Client Servicing Executive","Media Planner","Media Buyer","Operations Manager","HR Manager","Office Administrator","Intern"],be=H({full_name:a().min(2,"Full Name is required"),email:a().email("Valid email is required"),password:a().nullish().or(n("")),role:g(["ADMIN","MANAGER","DM_EXECUTIVE","WEB_SEO_EXECUTIVE","CREATIVE_DESIGNER","OPERATIONS_EXECUTIVE","DEVELOPER_ADMIN"]),avatar_url:a().nullish().or(n("")),staff_number:a().min(1,"Staff ID is required (e.g., EMP-001)"),designation:a().min(1,"Designation is required"),custom_designation:a().nullish().or(n("")),department:g(["CREATIVE","MARKETING","WEB_SEO","WEB","MANAGEMENT","ADMIN"]),date_of_joining:a().min(1,"Joining Date is required"),reporting_manager_id:a().nullish().or(n("")),personal_email:a().email().nullish().or(n("")),personal_contact:a().nullish().or(n("")),whatsapp_number:a().nullish().or(n("")),official_contact:a().nullish().or(n("")),date_of_birth:a().nullish().or(n("")),marital_status:g(["SINGLE","MARRIED","DIVORCED","WIDOWED"]).nullish().or(n("")),address:a().nullish().or(n("")),pincode:a().nullish().or(n("")),emergency_contact_name:a().nullish().or(n("")),emergency_contact_number:a().nullish().or(n("")),previous_company:a().nullish().or(n("")),total_experience_years:W().nullish(),base_salary:W().nullish(),salary_type:g(["MONTHLY","DAILY","CONTRACT"]).nullish().or(n("")),incentive_eligible:X().optional(),payroll_status:g(["ACTIVE","HOLD"]).nullish().or(n("")),ledger_options:H({create:X(),head_id:a().nullish().or(n(""))}).optional(),bank_name:a().nullish().or(n("")),account_holder_name:a().nullish().or(n("")),account_number:a().nullish().or(n("")),ifsc_code:a().nullish().or(n("")),account_type:g(["SAVINGS","CURRENT"]).nullish().or(n("")),pan_number:a().nullish().or(n("")),upi_id:a().nullish().or(n("")),upi_linked_mobile:a().nullish().or(n("")),payment_method:g(["BANK_TRANSFER","CASH","CHEQUE","UPI"]).nullish().or(n(""))}).superRefine((u,N)=>{var r;(r=u.ledger_options)!=null&&r.create&&!u.ledger_options.head_id&&N.addIssue({code:he.custom,message:"Account Head is required",path:["ledger_options","head_id"]})}),Se=({isOpen:u,onClose:N,initialData:r})=>{var P,O,F,D,V,B;const Y=ae(),[c,m]=j.useState("profile"),[Q,S]=j.useState(!1),[M,J]=j.useState(null),[C,T]=j.useState(""),b=!!r,{data:A}=G({queryKey:["staff-list-simple"],queryFn:async()=>(await _.get("/team/staff")).data}),{data:f}=G({queryKey:["accountHeads"],queryFn:async()=>(await _.get("/accounting/heads")).data,enabled:u}),Z=oe({resolver:de(be),defaultValues:{department:"MARKETING",role:"DM_EXECUTIVE",date_of_joining:new Date().toISOString().split("T")[0],marital_status:"SINGLE",staff_number:"",designation:"",ledger_options:{create:!1,head_id:""},payment_method:"BANK_TRANSFER"}}),{register:l,handleSubmit:y,reset:w,watch:x,setValue:ee,formState:{errors:o,isSubmitting:R}}=Z,se=x("designation");j.useEffect(()=>{if(r){let s=r.designation,t="";s&&!$.includes(s)&&(t=s,s="Other"),w({...r.user,...r,designation:s,custom_designation:t,date_of_joining:r.date_of_joining?new Date(r.date_of_joining).toISOString().split("T")[0]:"",date_of_birth:r.date_of_birth?new Date(r.date_of_birth).toISOString().split("T")[0]:"",reporting_manager_id:r.reporting_manager_id||"",password:void 0,ledger_options:r.ledger_options||{create:!1,head_id:""}})}},[r,w]);const I=x("ledger_options.head_id");j.useEffect(()=>{if(I&&f){const s=f.find(t=>t.id===I);s&&T(s.type)}},[I,f]);const v=s=>{J(s),S(!0)},re=()=>{M&&(le.mutate(M),S(!1))},p=ne.useRef(!1),le=ce({mutationFn:async s=>{const t=s.designation==="Other"?s.custom_designation:s.designation;if(!t)throw new Error("Please specify the custom designation.");const d={...s,designation:t,password:b&&!s.password?void 0:s.password,reporting_manager_id:s.reporting_manager_id||void 0};return delete d.custom_designation,b?await _.patch(`/team/staff/${r.id}`,d):await _.post("/team/staff/onboard",d)},onSuccess:async()=>{await Y.refetchQueries({queryKey:["staff"]}),p.current&&(N(),w(),m("profile")),me.fire({title:p.current?"Success!":"Saved!",text:p.current?"Staff profile updated successfully.":"Progress saved. You can continue editing.",icon:"success",confirmButtonColor:"#8b5cf6",timer:1500,timerProgressBar:!0})},onError:s=>{var d,h;console.error(s);let t=((h=(d=s.response)==null?void 0:d.data)==null?void 0:h.message)||s.message||"Failed to save.";Array.isArray(t)?t=`Validation Errors:
`+t.map(L=>`- ${L.path.join(".")}: ${L.message}`).join(`
`):typeof t=="object"&&(t=JSON.stringify(t,null,2)),alert(t)}});return u?e.jsxs("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4 backdrop-blur-sm",children:[Q&&e.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-black/20 backdrop-blur-[1px]",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-2xl border max-w-sm w-full animate-in fade-in zoom-in duration-200",children:[e.jsx("h3",{className:"text-lg font-bold text-foreground mb-2",children:"Confirm Save"}),e.jsxs("p",{className:"text-gray-600 mb-6 text-sm",children:["Are you sure you want to ",b?"update":"onboard"," this staff member? This will update the system immediately."]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>S(!1),className:"px-4 py-2 text-muted-foreground hover:bg-muted/30 rounded-md font-medium text-sm",children:"Cancel"}),e.jsx("button",{onClick:re,className:"px-4 py-2 bg-primary text-white hover:bg-primary/90 rounded-md font-medium text-sm",children:"Yes, Save Changes"})]})]})}),e.jsxs("div",{className:"bg-background text-foreground border border-border",children:[e.jsxs("div",{className:"flex justify-between items-center p-5 border-b bg-muted/30 border-border",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-foreground",children:b?"Edit Staff Profile":"New Staff Onboarding"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Complete the profile to grant system access."})]}),e.jsx("button",{onClick:N,className:"p-2 hover:bg-muted rounded-full transition-colors",children:e.jsx(ue,{size:20,className:"text-gray-500"})})]}),e.jsx("div",{className:"flex border-b bg-white px-6 pt-2",children:[{id:"profile",label:"1. Profile & Access",icon:U},{id:"details",label:"2. Personal & HR",icon:k},{id:"payroll",label:"3. Payroll & Bank",icon:z},{id:"finance",label:"4. Finance Account",icon:q}].map(s=>e.jsxs("button",{onClick:()=>m(s.id),className:`flex items-center gap-2 px-6 py-3 border-b-2 text-sm font-medium transition-all ${c===s.id?"border-primary text-primary":"border-transparent text-gray-500 hover:text-foreground"}`,children:[e.jsx(s.icon,{size:16}),s.label]},s.id))}),Object.keys(o).length>0&&e.jsx("div",{className:"px-6 pt-4",children:e.jsx(pe,{errors:o})}),e.jsxs("form",{onSubmit:y(v),className:"flex-1 overflow-y-auto p-8 bg-gray-50/30",children:[c==="profile"&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 animate-in fade-in slide-in-from-bottom-2",children:[e.jsxs("div",{className:"col-span-1 flex flex-col items-center p-6 bg-white rounded-lg border border-gray-100 shadow-sm h-fit",children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-4 self-start",children:"Profile Photo"}),e.jsx(xe,{value:x("avatar_url")||void 0,onChange:s=>ee("avatar_url",s),label:"Upload Photo"}),e.jsxs("p",{className:"text-xs text-gray-400 mt-4 text-center",children:["Square JPG/PNG images work best.",e.jsx("br",{}),"Max size 2MB."]})]}),e.jsx("div",{className:"col-span-1 lg:col-span-2 space-y-6",children:e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"col-span-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-foreground mb-1",children:["Full Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{...l("full_name"),className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-primary/20 outline-none transition-all",placeholder:"e.g. Sarah Jones"}),o.full_name&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.full_name.message})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-foreground mb-1",children:["Email (System Login) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{...l("email"),className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-primary/20 outline-none transition-all",placeholder:"sarah@qixads.com"}),o.email&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.email.message})]}),!b&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-foreground mb-1",children:["Password ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"password",...l("password"),className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-primary/20 outline-none transition-all",placeholder:"******"}),o.password&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.password.message})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-foreground mb-1",children:["System Role ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{...l("role"),disabled:x("role")==="DEVELOPER_ADMIN",className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-primary/20 outline-none transition-all bg-background disabled:bg-muted disabled:text-muted-foreground cursor-pointer disabled:cursor-not-allowed",children:[e.jsx("option",{value:"DEVELOPER_ADMIN",className:"font-bold text-red-600",children:"Developer Admin (Super User)"}),e.jsx("option",{value:"ADMIN",children:"Admin (Full Access)"}),e.jsx("option",{value:"MANAGER",children:"Manager (Team & Clients)"}),e.jsx("option",{value:"DM_EXECUTIVE",children:"DM Executive"}),e.jsx("option",{value:"WEB_SEO_EXECUTIVE",children:"Web & SEO Executive"}),e.jsx("option",{value:"CREATIVE_DESIGNER",children:"Creative Designer"}),e.jsx("option",{value:"OPERATIONS_EXECUTIVE",children:"Operations Executive"})]}),x("role")==="DEVELOPER_ADMIN"&&e.jsx("p",{className:"text-xs text-red-500 mt-1 font-medium",children:"This role cannot be changed."}),x("role")!=="DEVELOPER_ADMIN"&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Determines system permissions."})]})]})}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsxs("h4",{className:"font-semibold text-foreground mb-4 flex items-center gap-2",children:[e.jsx(k,{size:18,className:"text-gray-400"})," Work Identifiers"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-foreground mb-1",children:["Staff ID (Manual) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{...l("staff_number"),className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-primary/20 outline-none transition-all uppercase",placeholder:"QIX-001"}),o.staff_number&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.staff_number.message})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-foreground mb-1",children:["Designation ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative space-y-2",children:[e.jsxs("select",{...l("designation"),className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-primary/20 outline-none transition-all bg-white appearance-none",children:[e.jsx("option",{value:"",children:"Select Designation..."}),$.map(s=>e.jsx("option",{value:s,children:s},s)),e.jsx("option",{value:"Other",children:"Other (Type below)"})]}),se==="Other"&&e.jsx("input",{...l("custom_designation"),placeholder:"Enter Custom Designation",className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-primary/20 outline-none transition-all animate-in fade-in slide-in-from-top-1"})]}),o.designation&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.designation.message})]}),e.jsxs("div",{children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-foreground mb-1",children:["Department ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{...l("department"),className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-primary/20 outline-none transition-all bg-white",children:[e.jsx("option",{value:"MARKETING",children:"Marketing"}),e.jsx("option",{value:"CREATIVE",children:"Creative"}),e.jsx("option",{value:"WEB_SEO",children:"Web & SEO"}),e.jsx("option",{value:"MANAGEMENT",children:"Management"}),e.jsx("option",{value:"ADMIN",children:"Admin / HR"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-foreground mb-1",children:["Date of Joining ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",...l("date_of_joining"),className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-primary/20 outline-none transition-all"}),o.date_of_joining&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.date_of_joining.message})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-1",children:"Reporting Manager"}),e.jsxs("select",{...l("reporting_manager_id"),className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-primary/20 outline-none transition-all bg-white",children:[e.jsx("option",{value:"",children:"None (Self-Managed)"}),A==null?void 0:A.map(s=>e.jsxs("option",{value:s.user.id,children:[s.user.full_name," (",s.designation,")"]},s.user.id))]})]})]})]})]})]}),c==="details"&&e.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-right-4",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold text-foreground mb-4 pb-2 border-b flex items-center gap-2",children:[e.jsx(U,{size:18,className:"text-blue-500"})," Personal Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Personal Mobile"}),e.jsx("input",{...l("personal_contact"),className:i,placeholder:"+91 98765 43210"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"WhatsApp"}),e.jsx("input",{...l("whatsapp_number"),className:i,placeholder:"+91 98765 43210"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Personal Email"}),e.jsx("input",{...l("personal_email"),className:i,placeholder:"personal@gmail.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Date of Birth"}),e.jsx("input",{type:"date",...l("date_of_birth"),className:i})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Marital Status"}),e.jsxs("select",{...l("marital_status"),className:i,children:[e.jsx("option",{value:"SINGLE",children:"Single"}),e.jsx("option",{value:"MARRIED",children:"Married"}),e.jsx("option",{value:"DIVORCED",children:"Divorced"}),e.jsx("option",{value:"WIDOWED",children:"Widowed"})]})]}),e.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[e.jsx("label",{className:"label",children:"Residential Address"}),e.jsx("textarea",{...l("address"),rows:2,className:i,placeholder:"Full address..."})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold text-foreground mb-4 pb-2 border-b flex items-center gap-2",children:[e.jsx(ge,{size:18,className:"text-red-500"})," Emergency Contact"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Contact Person"}),e.jsx("input",{...l("emergency_contact_name"),className:i,placeholder:"Name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Emergency Number"}),e.jsx("input",{...l("emergency_contact_number"),className:i,placeholder:"Phone"})]})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold text-foreground mb-4 pb-2 border-b flex items-center gap-2",children:[e.jsx(q,{size:18,className:"text-gray-500"})," Experience"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Previous Company"}),e.jsx("input",{...l("previous_company"),className:i})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Total Expr (Years)"}),e.jsx("input",{type:"number",step:"0.1",...l("total_experience_years"),className:i})]})]})]})]})]}),c==="payroll"&&e.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-right-4",children:[e.jsxs("div",{className:"bg-muted/30 p-6 rounded-xl border border-border",children:[e.jsxs("h4",{className:"font-semibold text-foreground mb-4 flex items-center gap-2",children:[e.jsx(z,{size:18})," Salary Configuration"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label text-gray-400",children:"Base Salary"}),e.jsx("input",{disabled:!0,className:`${i} bg-muted text-muted-foreground cursor-not-allowed`,value:"Manage in Payroll"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Salary Type"}),e.jsxs("select",{...l("salary_type"),className:`${i} border-blue-200`,children:[e.jsx("option",{value:"MONTHLY",children:"Monthly"}),e.jsx("option",{value:"DAILY",children:"Daily"}),e.jsx("option",{value:"CONTRACT",children:"Contract"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Payroll Status"}),e.jsxs("select",{...l("payroll_status"),className:`${i} border-blue-200`,children:[e.jsx("option",{value:"ACTIVE",children:"Active"}),e.jsx("option",{value:"HOLD",children:"Hold (No Payout)"})]})]}),e.jsx("div",{className:"md:col-span-3 space-y-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",...l("incentive_eligible"),className:"w-4 h-4 text-blue-600 rounded"}),e.jsx("span",{className:"text-sm text-foreground",children:"Eligible for Performance Incentives/Commissions"})]})})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-foreground mb-4 pb-2 border-b",children:"Bank Account Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Bank Name"}),e.jsx("input",{...l("bank_name"),className:i,placeholder:"e.g. HDFC Bank"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Account Holder"}),e.jsx("input",{...l("account_holder_name"),className:i,placeholder:"As on Passbook"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Account Number"}),e.jsx("input",{...l("account_number"),className:i,placeholder:"XXXXXXX"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"IFSC Code"}),e.jsx("input",{...l("ifsc_code"),className:"input-std uppercase",placeholder:"Upper Case"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Payment Mode"}),e.jsxs("select",{...l("payment_method"),className:i,children:[e.jsx("option",{value:"BANK_TRANSFER",children:"Bank Transfer"}),e.jsx("option",{value:"CASH",children:"Cash"}),e.jsx("option",{value:"CHEQUE",children:"Cheque"}),e.jsx("option",{value:"UPI",children:"UPI"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Account Type"}),e.jsxs("select",{...l("account_type"),className:i,children:[e.jsx("option",{value:"SAVINGS",children:"Savings"}),e.jsx("option",{value:"CURRENT",children:"Current"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"PAN Number"}),e.jsx("input",{...l("pan_number"),className:i,placeholder:"ABCDE1234F"})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-foreground mb-4 pb-2 border-b",children:"UPI / Digital Payment"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"UPI ID"}),e.jsx("input",{...l("upi_id"),className:i,placeholder:"user@bank"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Linked Mobile"}),e.jsx("input",{...l("upi_linked_mobile"),className:i})]})]})]})]}),c==="finance"&&e.jsx("div",{className:"space-y-8 animate-in fade-in slide-in-from-right-4",children:e.jsxs("div",{className:"bg-muted/30 p-6 rounded-xl border border-border",children:[e.jsxs("h4",{className:"font-semibold text-primary mb-4 flex items-center gap-2",children:[e.jsx(k,{size:18})," Finance Account / Ledger"]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-6",children:"Create or link a ledger account for this staff member to track payroll, expenses, and payments."}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("input",{type:"checkbox",id:"create_ledger",...l("ledger_options.create"),disabled:(P=r==null?void 0:r.ledger_options)==null?void 0:P.create,className:"w-4 h-4 text-primary border-primary/20 rounded focus:ring-purple-500 disabled:opacity-50"}),e.jsx("label",{htmlFor:"create_ledger",className:`text-sm font-medium ${(O=r==null?void 0:r.ledger_options)!=null&&O.create?"text-gray-500":"text-foreground"}`,children:(F=r==null?void 0:r.ledger_options)!=null&&F.create?"Finance Account / Ledger (Already Linked)":"Create Finance Account / Ledger"})]}),(x("ledger_options.create")||((D=r==null?void 0:r.ledger_options)==null?void 0:D.create))&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 p-4 bg-white rounded-lg border border-purple-100 animate-in fade-in slide-in-from-top-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Account Type"}),e.jsxs("select",{className:i,value:C,disabled:!!((V=r==null?void 0:r.ledger_options)!=null&&V.create),onChange:s=>T(s.target.value),children:[e.jsx("option",{value:"",children:"All Types"}),e.jsx("option",{value:"ASSET",children:"Asset"}),e.jsx("option",{value:"LIABILITY",children:"Liability"}),e.jsx("option",{value:"EXPENSE",children:"Expense"}),e.jsx("option",{value:"INCOME",children:"Income"})]}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Filter heads by type"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Account Head"}),e.jsxs("select",{...l("ledger_options.head_id"),disabled:!!((B=r==null?void 0:r.ledger_options)!=null&&B.create),className:i,children:[e.jsx("option",{value:"",children:"Select Head..."}),f==null?void 0:f.filter(s=>!C||s.type===C).map(s=>e.jsxs("option",{value:s.id,children:[s.name," (",s.code,")"]},s.id))]}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Select the parent ledger Head"})]})]})]})]})})]}),e.jsxs("div",{className:"p-5 border-t bg-muted/30 border-border flex justify-end gap-3",children:[e.jsx("button",{onClick:N,className:"px-6 py-2.5 text-sm font-medium text-foreground hover:bg-muted rounded-lg transition-colors",children:"Cancel"}),c==="profile"&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>{p.current=!1,y(v)()},className:"px-4 py-2 text-sm font-medium bg-green-600 text-white hover:bg-green-700 rounded-md shadow-sm transition-colors flex items-center gap-2",children:[e.jsx(E,{size:16})," Save"]}),e.jsx("button",{onClick:()=>m("details"),className:"btn-primary",children:"Next: Personal & HR"})]}),c==="details"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>m("profile"),className:"btn-secondary",children:"Back"}),e.jsxs("button",{onClick:()=>{p.current=!1,y(v)()},className:"px-4 py-2 text-sm font-medium bg-green-600 text-white hover:bg-green-700 rounded-md shadow-sm transition-colors flex items-center gap-2",children:[e.jsx(E,{size:16})," Save"]}),e.jsx("button",{onClick:()=>m("payroll"),className:"btn-primary",children:"Next: Payroll"})]}),c==="payroll"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>m("details"),className:"btn-secondary",children:"Back"}),e.jsxs("button",{onClick:()=>{p.current=!1,y(v)()},className:"px-4 py-2 text-sm font-medium bg-green-600 text-white hover:bg-green-700 rounded-md shadow-sm transition-colors flex items-center gap-2",children:[e.jsx(E,{size:16})," Save"]}),e.jsx("button",{onClick:()=>m("finance"),className:"btn-primary",children:"Next: Finance"})]}),c==="finance"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>m("payroll"),className:"btn-secondary",children:"Back"}),e.jsxs("button",{onClick:()=>{p.current=!0,y(v,s=>{console.error("Frontend Validation Errors:",s);let t=`Please check the form for errors:
`;Object.keys(s).forEach(d=>{const h=s[d];h!=null&&h.message?t+=`- ${d}: ${h.message}
`:d==="ledger_options"&&(t+=`- Finance Account: Check details
`)}),alert(t)})()},disabled:R,className:"btn-primary flex items-center gap-2",children:[e.jsx(E,{size:18}),R?"Saving...":b?"Save and Close":"Complete Onboarding"]})]})]})]}),e.jsxs("style",{children:[" ",`
                .label { display: block; font-size: 0.85rem; font-weight: 500; color: #4b5563; margin-bottom: 0.25rem; }
                .input-std { width: 100%; padding: 0.6rem 0.75rem; border: 1px solid #d1d5db; border-radius: 0.5rem; outline: none; transition: all 0.2s; font-size: 0.9rem; }
                .input-std:focus { border-color: #3b82f6; box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.1); }
                .btn-primary { background-color: #0f172a; color: white; padding: 0.6rem 1.5rem; border-radius: 0.5rem; font-weight: 500; font-size: 0.9rem; transition: background 0.2s; }
                .btn-primary:hover { background-color: #1e293b; }
                .btn-primary:disabled { opacity: 0.7; cursor: not-allowed; }
                .btn-secondary { background-color: transparent; color: #4b5563; padding: 0.6rem 1.25rem; font-weight: 500; font-size: 0.9rem; border: 1px solid #d1d5db; border-radius: 0.5rem; }
                .btn-secondary:hover { background-color: #f3f4f6; }
            `]})]}):null};export{Ee as C,Se as S};
