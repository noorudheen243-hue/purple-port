import{j as e,D as f,x as c}from"./index-CVFz3GnQ.js";import{u as m,T as v}from"./index-MXZ1Fyy1.js";import{C as g}from"./check-circle-C7q7Y3EO.js";import{P as y}from"./panels-top-left-Bx5j4S86.js";import{A as w}from"./alert-circle-DVBvcfOk.js";import{M as h,aq as k,T as p,N as L}from"./CategoricalChart-D2XFSdKj.js";import{P as C,a as A}from"./PieChart-BsnQEI59.js";import{B as T,a as D,X as R,Y as P,b as F}from"./BarChart-Dfc35vU_.js";const j=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884d8"],I=({view:r="ALL"})=>{const{data:s,isLoading:b}=m({queryKey:["tasks","aggregates"],queryFn:async()=>(await c.get("/tasks/stats?view=aggregates")).data}),{data:a,isLoading:u}=m({queryKey:["portal-global-stats"],queryFn:async()=>(await c.get("/client-portal/global-stats")).data,enabled:r==="ALL"||r==="DM"});if(b||r!=="CREATIVE"&&u)return e.jsx("div",{className:"p-8",children:"Loading Dashboard..."});const t=(s==null?void 0:s.total)||0,d=(s==null?void 0:s.completed)||0,l=(s==null?void 0:s.inProgress)||0,i=(s==null?void 0:s.overdue)||0,n=(s==null?void 0:s.rework)||0,o=[{name:"Completed",value:d},{name:"In Progress",value:l},{name:"Overdue",value:i},{name:"Planned",value:t-d-l-i}];return e.jsxs("div",{className:"space-y-8 animate-in fade-in",children:[(r==="ALL"||r==="DM")&&e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(v,{size:24,className:"text-purple-600"}),"DM Tasks Overview"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-purple-100",children:[e.jsx("p",{className:"text-xs text-muted-foreground uppercase font-bold",children:"Total Ad Spend"}),e.jsxs("h3",{className:"text-2xl font-bold text-purple-900 mt-1",children:["â‚¹",(((a==null?void 0:a.meta_spend)||0)+((a==null?void 0:a.google_spend)||0)).toLocaleString()]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Meta & Google Ads"})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-pink-100",children:[e.jsx("p",{className:"text-xs text-muted-foreground uppercase font-bold",children:"Pending Content"}),e.jsx("h3",{className:"text-2xl font-bold text-pink-700 mt-1",children:(a==null?void 0:a.pending_content)||0}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Items to Review"})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-blue-100",children:[e.jsx("p",{className:"text-xs text-muted-foreground uppercase font-bold",children:"Active Web Dev"}),e.jsx("h3",{className:"text-2xl font-bold text-blue-700 mt-1",children:(a==null?void 0:a.active_web_projects)||0}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Ongoing Projects"})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-green-100",children:[e.jsx("p",{className:"text-xs text-muted-foreground uppercase font-bold",children:"SEO Clients"}),e.jsx("h3",{className:"text-2xl font-bold text-green-700 mt-1",children:(a==null?void 0:a.seo_clients)||0}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Active Engagements"})]})]})]}),r==="ALL"&&e.jsx("div",{className:"border-t pt-6"}),(r==="ALL"||r==="CREATIVE")&&e.jsxs("div",{children:[r==="ALL"&&e.jsxs("h2",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(g,{size:24,className:"text-blue-600"}),"Creative Tasks Overview"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100 flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-blue-100 text-blue-600 rounded-lg",children:e.jsx(y,{size:24})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Total Tasks"}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:t})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100 flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-red-100 text-red-600 rounded-lg",children:e.jsx(f,{size:24})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Rework Tasks"}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:n})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100 flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-purple-100 text-purple-600 rounded-lg",children:e.jsx(w,{size:24})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Rework Rate"}),e.jsxs("h3",{className:"text-2xl font-bold text-gray-900",children:[t>0?(n/t*100).toFixed(1):0,"%"]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100 flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-green-100 text-green-600 rounded-lg",children:e.jsx(g,{size:24})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Completed"}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:d})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Task Status Distribution"}),e.jsx("div",{className:"h-64",children:e.jsx(h,{width:"100%",height:"100%",children:e.jsxs(C,{children:[e.jsx(A,{data:o,cx:"50%",cy:"50%",innerRadius:60,outerRadius:80,fill:"#8884d8",paddingAngle:5,dataKey:"value",children:o.map((N,x)=>e.jsx(k,{fill:j[x%j.length]},`cell-${x}`))}),e.jsx(p,{}),e.jsx(L,{})]})})})]}),e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Department Load (Mock)"}),e.jsx("div",{className:"h-64",children:e.jsx(h,{width:"100%",height:"100%",children:e.jsxs(T,{data:[{name:"Creative",tasks:12},{name:"Marketing",tasks:19},{name:"Web",tasks:8},{name:"Admin",tasks:24}],children:[e.jsx(D,{strokeDasharray:"3 3"}),e.jsx(R,{dataKey:"name"}),e.jsx(P,{}),e.jsx(p,{}),e.jsx(F,{dataKey:"tasks",fill:"#8884d8"})]})})})]})]})]})]})};export{I as default};
