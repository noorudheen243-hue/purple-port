import{v as I,r as _,j as t,w as y}from"./index-W29iofZb.js";import{t as u,i as N,j as A,k as R,u as D,l as L,m as G}from"./index-BJPAJU8j.js";import{s as j,f as x,a as F}from"./format-Cdl30bIy.js";/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=I("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);function O(e,n){const s=u(e);if(isNaN(n))return N(e,NaN);if(!n)return s;const o=s.getDate(),a=N(e,s.getTime());a.setMonth(s.getMonth()+n+1,0);const m=a.getDate();return o>=m?a:(s.setFullYear(a.getFullYear(),a.getMonth(),o),s)}function p(e,n){const s=j(e),o=j(n);return+s==+o}function P(e,n){const s=u(e.start),o=u(e.end);let a=+s>+o;const m=a?+s:+o,i=a?o:s;i.setHours(0,0,0,0);let f=1;const l=[];for(;+i<=m;)l.push(u(i)),i.setDate(i.getDate()+f),i.setHours(0,0,0,0);return a?l.reverse():l}function H(e){const n=u(e);return n.setDate(1),n.setHours(0,0,0,0),n}function W(e,n){var f,l;const s=A(),o=s.weekStartsOn??((l=(f=s.locale)==null?void 0:f.options)==null?void 0:l.weekStartsOn)??0,a=u(e),m=a.getDay(),i=(m<o?-7:0)+6-(m-o);return a.setDate(a.getDate()+i),a.setHours(23,59,59,999),a}function q(e,n){const s=u(e),o=u(n);return s.getFullYear()===o.getFullYear()&&s.getMonth()===o.getMonth()}function w(e){return p(e,R(e))}function K(e,n){return O(e,-1)}const z=()=>{const[e,n]=_.useState(new Date),{data:s,isLoading:o}=D({queryKey:["campaigns",x(e,"yyyy-MM")],queryFn:async()=>{const{data:r}=await y.get(`/campaigns?month=${e.toISOString()}`);return r}}),{data:a,isLoading:m}=D({queryKey:["tasks-calendar"],queryFn:async()=>{const{data:r}=await y.get("/tasks");return r}}),i=()=>n(O(e,1)),f=()=>n(K(e)),l=()=>n(new Date),g=H(e),E=L(g),M=F(g),T=W(E),v=P({start:M,end:T}),k=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],S=r=>{switch(r){case"GRAPHIC":case"BRANDING":case"CREATIVE_DESIGNER":return"bg-purple-100 text-purple-700 border-purple-200";case"VIDEO":case"MOTION":case"REEL_EDITING":case"CONTENT_SHOOTING":return"bg-orange-100 text-orange-700 border-orange-200";case"WEB_DEV":case"WEB":case"SEO":case"ADS_SETUP":return"bg-sky-100 text-sky-700 border-sky-200";case"CONTENT_CREATION":case"CONTENT":return"bg-pink-100 text-pink-700 border-pink-200";case"REPORTING":return"bg-yellow-100 text-yellow-700 border-yellow-200";default:return"bg-emerald-50 text-emerald-700 border-emerald-200"}},C=r=>{const h=[];return s&&s.forEach(c=>{const d=new Date(c.start_date),b=new Date(c.end_date);(p(r,d)||p(r,b))&&h.push({id:c.id,title:c.title,type:"CAMPAIGN",isStart:p(r,d),isEnd:p(r,b)})}),a&&a.forEach(c=>{c.due_date&&p(r,new Date(c.due_date))&&h.push({id:c.id,title:c.title,type:"TASK",taskType:c.type,status:c.status,priority:c.priority})}),h};return t.jsxs("div",{className:"h-full flex flex-col",children:[t.jsxs("div",{className:"flex justify-between items-center mb-6",children:[t.jsx("h1",{className:"text-2xl font-bold",children:"Content Calendar"}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("button",{onClick:l,className:"text-sm font-medium px-3 py-1 border rounded hover:bg-accent",children:"Today"}),t.jsxs("div",{className:"flex items-center rounded-md border bg-card",children:[t.jsx("button",{onClick:f,className:"p-2 hover:bg-accent border-r",children:t.jsx($,{size:20})}),t.jsx("span",{className:"px-4 font-semibold min-w-[140px] text-center",children:x(e,"MMMM yyyy")}),t.jsx("button",{onClick:i,className:"p-2 hover:bg-accent border-l",children:t.jsx(G,{size:20})})]})]})]}),t.jsxs("div",{className:"bg-card border rounded-lg shadow-sm flex-1 flex flex-col min-h-[600px]",children:[t.jsx("div",{className:"grid grid-cols-7 border-b",children:k.map(r=>t.jsx("div",{className:"p-4 text-center text-sm font-semibold text-muted-foreground border-r last:border-r-0",children:r},r))}),t.jsx("div",{className:"grid grid-cols-7 flex-1 auto-rows-fr",children:v.map((r,h)=>{const c=C(r);return t.jsxs("div",{className:`
                                    border-b border-r p-2 min-h-[100px] relative transition-colors hover:bg-accent/10
                                    ${q(r,e)?"":"bg-muted/30 text-muted-foreground"}
                                    ${w(r)?"bg-primary/5":""}
                                    ${(h+1)%7===0?"border-r-0":""}
                                `,children:[t.jsx("div",{className:"flex justify-between items-start",children:t.jsx("span",{className:`text-sm font-medium w-7 h-7 flex items-center justify-center rounded-full ${w(r)?"bg-primary text-primary-foreground":""}`,children:x(r,"d")})}),t.jsx("div",{className:"mt-2 space-y-1 overflow-y-auto max-h-[120px] custom-scrollbar",children:c.map(d=>t.jsxs("div",{className:`
                                                text-xs p-1.5 rounded truncate font-medium border flex items-center gap-1.5
                                                ${d.type==="CAMPAIGN"?"bg-blue-100 text-blue-700 border-blue-200":S(d.taskType)}
                                            `,title:d.title,children:[d.type==="CAMPAIGN"&&t.jsx("span",{children:d.isStart?"üö©":"üèÅ"}),d.type==="TASK"&&t.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${d.status==="COMPLETED"?"bg-emerald-500":d.priority==="URGENT"?"bg-red-500":"bg-current"}`}),t.jsx("span",{className:"truncate",children:d.title})]},`${d.type}-${d.id}`))})]},r.toString())})})]})]})};export{z as default};
