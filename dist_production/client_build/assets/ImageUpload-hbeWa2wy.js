import{v as h,r as i,z as w,j as e,w as N}from"./index-W29iofZb.js";import{X as k}from"./index-BJPAJU8j.js";import{L as f}from"./loader-2-CWSgfRxb.js";/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=h("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=h("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),z=({value:r,onChange:c,label:u="Upload Image",className:y=""})=>{const[n,d]=i.useState(!1),[g,a]=i.useState(r),s=i.useRef(null);w.useEffect(()=>{a(r)},[r]);const b=t=>t?t.startsWith("http")||t.startsWith("blob:")?t:`${"http://localhost:4001/api".replace("/api","")}${t}`:"",j=async t=>{var x;const o=(x=t.target.files)==null?void 0:x[0];if(!o)return;const U=URL.createObjectURL(o);a(U),d(!0);const m=new FormData;m.append("file",o);try{const l=await N.post("/upload",m,{headers:{"Content-Type":"multipart/form-data"}});c(l.data.url)}catch(l){console.error("Upload failed",l),alert("Upload failed"),a(r)}finally{d(!1)}},v=()=>{c(""),a(""),s.current&&(s.current.value="")},p=b(g);return e.jsxs("div",{className:`space-y-2 ${y}`,children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:u}),p?e.jsxs("div",{className:"relative w-32 h-32 rounded-lg overflow-hidden border border-gray-200 group",children:[e.jsx("img",{src:p,alt:"Preview",className:"w-full h-full object-cover",onError:t=>{t.target.src="https://via.placeholder.com/150?text=Error"}}),e.jsx("button",{type:"button",onClick:v,className:"absolute top-1 right-1 bg-red-500 text-white p-1 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(k,{size:14})}),n&&e.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center",children:e.jsx(f,{className:"animate-spin text-white"})})]}):e.jsx("div",{onClick:()=>{var t;return(t=s.current)==null?void 0:t.click()},className:"w-32 h-32 border-2 border-dashed border-gray-300 rounded-lg flex flex-col items-center justify-center cursor-pointer hover:border-primary hover:bg-primary/5 transition-colors",children:n?e.jsx(f,{className:"animate-spin text-gray-400"}):e.jsxs(e.Fragment,{children:[e.jsx(R,{className:"text-gray-400 mb-2",size:24}),e.jsx("span",{className:"text-xs text-gray-500 text-center px-2",children:"Click to Upload"})]})}),e.jsx("input",{type:"file",ref:s,className:"hidden",accept:"image/*",onChange:j})]})};export{L as B,z as I,R as U};
