import{u as j,a as y,r as x,j as e,w as N}from"./index-W29iofZb.js";import{u as b}from"./index-BJPAJU8j.js";import{S as f}from"./search-Dw2s-6ML.js";import{C as v}from"./clock-DRr6o-VG.js";const E=()=>{const{user:s}=j(),m=y(),[i,u]=x.useState(""),[c,h]=x.useState("ALL"),{data:o,isLoading:p}=b({queryKey:["tasks","my",s==null?void 0:s.id],queryFn:async()=>(await N.get(`/tasks?assignee_id=${s==null?void 0:s.id}`)).data,enabled:!!(s!=null&&s.id)}),a=o==null?void 0:o.filter(t=>{var r,d;const l=t.title.toLowerCase().includes(i.toLowerCase())||((d=(r=t.campaign)==null?void 0:r.title)==null?void 0:d.toLowerCase().includes(i.toLowerCase())),n=c==="ALL"?!0:t.status===c;return l&&n}),g=t=>{switch(t){case"URGENT":return"text-red-600 bg-red-50";case"HIGH":return"text-orange-600 bg-orange-50";case"MEDIUM":return"text-blue-600 bg-blue-50";default:return"text-gray-600 bg-gray-50"}};return p?e.jsx("div",{className:"p-8",children:"Loading My Tasks..."}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"My Tasks"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(f,{className:"absolute left-3 top-2.5 text-gray-400",size:18}),e.jsx("input",{type:"text",placeholder:"Search tasks...",className:"pl-10 pr-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 w-64",value:i,onChange:t=>u(t.target.value)})]}),e.jsxs("select",{value:c,onChange:t=>h(t.target.value),className:"border rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-purple-500",children:[e.jsx("option",{value:"ALL",children:"All Status"}),e.jsx("option",{value:"PLANNED",children:"Planned"}),e.jsx("option",{value:"IN_PROGRESS",children:"In Progress"}),e.jsx("option",{value:"REVIEW",children:"Review"}),e.jsx("option",{value:"COMPLETED",children:"Completed"})]})]})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:e.jsxs("table",{className:"w-full text-left border-collapse",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-4 font-semibold text-gray-600 text-sm",children:"Task Name"}),e.jsx("th",{className:"p-4 font-semibold text-gray-600 text-sm",children:"Campaign / Client"}),e.jsx("th",{className:"p-4 font-semibold text-gray-600 text-sm",children:"Priority"}),e.jsx("th",{className:"p-4 font-semibold text-gray-600 text-sm",children:"SLA / Due"}),e.jsx("th",{className:"p-4 font-semibold text-gray-600 text-sm",children:"Status"}),e.jsx("th",{className:"p-4 font-semibold text-gray-600 text-sm",children:"Action"})]})}),e.jsxs("tbody",{className:"divide-y divide-gray-100",children:[a==null?void 0:a.map(t=>{var l,n,r;return e.jsxs("tr",{className:"hover:bg-gray-50/50 transition-colors",children:[e.jsxs("td",{className:"p-4",children:[e.jsx("div",{className:"font-medium text-gray-900",children:t.title}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:t.nature})]}),e.jsxs("td",{className:"p-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-800",children:((n=(l=t.campaign)==null?void 0:l.client)==null?void 0:n.name)||"Unknown Client"}),e.jsx("div",{className:"text-xs text-gray-500",children:(r=t.campaign)==null?void 0:r.title})]}),e.jsx("td",{className:"p-4",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${g(t.priority)}`,children:t.priority})}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(v,{size:14,className:t.sla_status==="BREACHED"?"text-red-500":"text-gray-400"}),e.jsx("span",{className:`text-sm ${t.sla_status==="BREACHED"?"text-red-600 font-bold":"text-gray-600"}`,children:t.sla_target?new Date(t.sla_target).toLocaleDateString():"N/A"})]})}),e.jsx("td",{className:"p-4",children:e.jsx("span",{className:"text-sm text-gray-700 bg-gray-100 px-2 py-1 rounded",children:t.status.replace("_"," ")})}),e.jsx("td",{className:"p-4",children:e.jsx("button",{onClick:()=>m(`/dashboard/tasks/${t.id}`),className:"text-purple-600 hover:text-purple-700 text-sm font-medium",children:"Open"})})]},t.id)}),(a==null?void 0:a.length)===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"p-8 text-center text-gray-500",children:"No tasks found. Great job!"})})]})]})})]})};export{E as default};
