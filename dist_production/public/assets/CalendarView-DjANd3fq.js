import{v as I,r as A,j as t,w as y}from"./index-CYovX-18.js";import{t as u,i as N,j as D,k as R,u as j,l as f,m as _,n as L,p as G}from"./index-DG6laMbl.js";import{s as F,e as $}from"./endOfWeek-Deq60kZA.js";/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=I("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);function M(e,o){const r=u(e);if(isNaN(o))return N(e,NaN);if(!o)return r;const c=r.getDate(),d=N(e,r.getTime());d.setMonth(r.getMonth()+o+1,0);const p=d.getDate();return c>=p?d:(r.setFullYear(d.getFullYear(),d.getMonth(),c),r)}function l(e,o){const r=D(e),c=D(o);return+r==+c}function W(e,o){const r=u(e.start),c=u(e.end);let d=+r>+c;const p=d?+r:+c,i=d?c:r;i.setHours(0,0,0,0);let x=1;const m=[];for(;+i<=p;)m.push(u(i)),i.setDate(i.getDate()+x),i.setHours(0,0,0,0);return d?m.reverse():m}function q(e,o){const r=u(e),c=u(o);return r.getFullYear()===c.getFullYear()&&r.getMonth()===c.getMonth()}function E(e){return l(e,R(e))}function H(e,o){return M(e,-1)}const B=()=>{const[e,o]=A.useState(new Date),{data:r,isLoading:c}=j({queryKey:["campaigns",f(e,"yyyy-MM")],queryFn:async()=>{const{data:s}=await y.get(`/campaigns?month=${e.toISOString()}`);return s}}),{data:d,isLoading:p}=j({queryKey:["tasks-calendar"],queryFn:async()=>{const{data:s}=await y.get("/tasks");return s}}),i=()=>o(M(e,1)),x=()=>o(H(e)),m=()=>o(new Date),g=F(e),T=_(g),v=L(g),w=$(T),O=W({start:v,end:w}),k=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],C=s=>{switch(s){case"GRAPHIC":case"BRANDING":case"CREATIVE_DESIGNER":return"bg-purple-100 text-purple-700 border-purple-200";case"VIDEO":case"MOTION":case"REEL_EDITING":case"CONTENT_SHOOTING":return"bg-orange-100 text-orange-700 border-orange-200";case"WEB_DEV":case"WEB":case"SEO":case"ADS_SETUP":return"bg-sky-100 text-sky-700 border-sky-200";case"CONTENT_CREATION":case"CONTENT":return"bg-pink-100 text-pink-700 border-pink-200";case"REPORTING":return"bg-yellow-100 text-yellow-700 border-yellow-200";default:return"bg-emerald-50 text-emerald-700 border-emerald-200"}},S=s=>{const h=[];return r&&r.forEach(a=>{const n=new Date(a.start_date),b=new Date(a.end_date);(l(s,n)||l(s,b))&&h.push({id:a.id,title:a.title,type:"CAMPAIGN",isStart:l(s,n),isEnd:l(s,b)})}),d&&d.forEach(a=>{a.due_date&&l(s,new Date(a.due_date))&&h.push({id:a.id,title:a.title,type:"TASK",taskType:a.type,status:a.status,priority:a.priority})}),h};return t.jsxs("div",{className:"h-full flex flex-col",children:[t.jsxs("div",{className:"flex justify-between items-center mb-6",children:[t.jsx("h1",{className:"text-2xl font-bold",children:"Content Calendar"}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("button",{onClick:m,className:"text-sm font-medium px-3 py-1 border rounded hover:bg-accent",children:"Today"}),t.jsxs("div",{className:"flex items-center rounded-md border bg-card",children:[t.jsx("button",{onClick:x,className:"p-2 hover:bg-accent border-r",children:t.jsx(P,{size:20})}),t.jsx("span",{className:"px-4 font-semibold min-w-[140px] text-center",children:f(e,"MMMM yyyy")}),t.jsx("button",{onClick:i,className:"p-2 hover:bg-accent border-l",children:t.jsx(G,{size:20})})]})]})]}),t.jsxs("div",{className:"bg-card border rounded-lg shadow-sm flex-1 flex flex-col min-h-[600px]",children:[t.jsx("div",{className:"grid grid-cols-7 border-b",children:k.map(s=>t.jsx("div",{className:"p-4 text-center text-sm font-semibold text-muted-foreground border-r last:border-r-0",children:s},s))}),t.jsx("div",{className:"grid grid-cols-7 flex-1 auto-rows-fr",children:O.map((s,h)=>{const a=S(s);return t.jsxs("div",{className:`
                                    border-b border-r p-2 min-h-[100px] relative transition-colors hover:bg-accent/10
                                    ${q(s,e)?"":"bg-muted/30 text-muted-foreground"}
                                    ${E(s)?"bg-primary/5":""}
                                    ${(h+1)%7===0?"border-r-0":""}
                                `,children:[t.jsx("div",{className:"flex justify-between items-start",children:t.jsx("span",{className:`text-sm font-medium w-7 h-7 flex items-center justify-center rounded-full ${E(s)?"bg-primary text-primary-foreground":""}`,children:f(s,"d")})}),t.jsx("div",{className:"mt-2 space-y-1 overflow-y-auto max-h-[120px] custom-scrollbar",children:a.map(n=>t.jsxs("div",{className:`
                                                text-xs p-1.5 rounded truncate font-medium border flex items-center gap-1.5
                                                ${n.type==="CAMPAIGN"?"bg-blue-100 text-blue-700 border-blue-200":C(n.taskType)}
                                            `,title:n.title,children:[n.type==="CAMPAIGN"&&t.jsx("span",{children:n.isStart?"üö©":"üèÅ"}),n.type==="TASK"&&t.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${n.status==="COMPLETED"?"bg-emerald-500":n.priority==="URGENT"?"bg-red-500":"bg-current"}`}),t.jsx("span",{className:"truncate",children:n.title})]},`${n.type}-${n.id}`))})]},s.toString())})})]})]})};export{B as default};
