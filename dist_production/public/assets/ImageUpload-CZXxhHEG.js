import{v,r as l,z as w,j as e,w as N}from"./index-CYovX-18.js";import{X as k}from"./index-DG6laMbl.js";import{L as u}from"./loader-2-CtimSdx4.js";import{U as R}from"./upload-WY1TDvjd.js";/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=v("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]),F=({value:r,onChange:c,label:x="Upload Image",className:h=""})=>{const[n,d]=l.useState(!1),[g,a]=l.useState(r),s=l.useRef(null);w.useEffect(()=>{a(r)},[r]);const y=t=>t?t.startsWith("http")||t.startsWith("blob:")?t:`${"http://72.61.246.22:4001/api".replace("/api","")}${t}`:"",b=async t=>{var f;const o=(f=t.target.files)==null?void 0:f[0];if(!o)return;const U=URL.createObjectURL(o);a(U),d(!0);const m=new FormData;m.append("file",o);try{const i=await N.post("/upload",m,{headers:{"Content-Type":"multipart/form-data"}});c(i.data.url)}catch(i){console.error("Upload failed",i),alert("Upload failed"),a(r)}finally{d(!1)}},j=()=>{c(""),a(""),s.current&&(s.current.value="")},p=y(g);return e.jsxs("div",{className:`space-y-2 ${h}`,children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:x}),p?e.jsxs("div",{className:"relative w-32 h-32 rounded-lg overflow-hidden border border-gray-200 group",children:[e.jsx("img",{src:p,alt:"Preview",className:"w-full h-full object-cover",onError:t=>{t.target.src="https://via.placeholder.com/150?text=Error"}}),e.jsx("button",{type:"button",onClick:j,className:"absolute top-1 right-1 bg-red-500 text-white p-1 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(k,{size:14})}),n&&e.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center",children:e.jsx(u,{className:"animate-spin text-white"})})]}):e.jsx("div",{onClick:()=>{var t;return(t=s.current)==null?void 0:t.click()},className:"w-32 h-32 border-2 border-dashed border-gray-300 rounded-lg flex flex-col items-center justify-center cursor-pointer hover:border-primary hover:bg-primary/5 transition-colors",children:n?e.jsx(u,{className:"animate-spin text-gray-400"}):e.jsxs(e.Fragment,{children:[e.jsx(R,{className:"text-gray-400 mb-2",size:24}),e.jsx("span",{className:"text-xs text-gray-500 text-center px-2",children:"Click to Upload"})]})}),e.jsx("input",{type:"file",ref:s,className:"hidden",accept:"image/*",onChange:b})]})};export{z as B,F as I};
