import{v as B,a as F,q as X,r as h,G,w as g,j as e}from"./index-CYovX-18.js";import{b as V,c as U,d as z,U as k,L as f,G as q,Z as L,$ as H,o as W,_ as x,s as r}from"./index-DG6laMbl.js";import{B as $,I as K}from"./ImageUpload-CZXxhHEG.js";import{F as Y}from"./FormErrorAlert-CXCprUnH.js";import{U as E}from"./upload-WY1TDvjd.js";import{A as J}from"./arrow-left-BI3a_3j-.js";import{C as Q}from"./check-circle-Crge6kva.js";import{n as Z}from"./coerce-CfPV0VkF.js";import"./loader-2-CtimSdx4.js";import"./alert-circle-V7EQjuNI.js";/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=B("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),A=["Creative Director","Art Director","Senior Graphic Designer","Graphic Designer","Copywriter","Content Strategist","Social Media Manager","Social Media Executive","SEO Specialist","Web Developer","Account Director","Account Manager","Client Servicing Executive","Media Planner","Media Buyer","Operations Manager","HR Manager","Office Administrator","Intern"],se=["09:00 AM – 05:00 PM","09:30 AM – 05:30 PM","10:00 AM – 06:00 PM","10:30 AM – 06:30 PM","11:00 AM – 07:00 PM","Flexible / On-Demand"],w=[{id:1,label:"Profile & Contact",icon:k},{id:2,label:"Role & Department",icon:$},{id:3,label:"Payroll & Bank",icon:f},{id:4,label:"Documents & Review",icon:q}],ae=W({full_name:r().min(2,"Full Name is required"),email:r().email("Valid email is required"),avatar_url:r().optional(),personal_contact:r().min(10,"Valid phone required"),whatsapp_number:r().optional(),date_of_birth:r().min(1,"DOB is required"),gender:x(["MALE","FEMALE","OTHER"]).optional(),blood_group:r().optional(),current_address:r().min(5,"Current Address is required"),permanent_address:r().optional(),staff_number:r().min(1,"Staff ID is required"),designation:r().min(1,"Designation is required"),custom_designation:r().optional(),department:x(["CREATIVE","MARKETING","WEB_SEO","WEB","MANAGEMENT","ADMIN"]),date_of_joining:r().min(1,"Joining Date is required"),reporting_manager_id:r().optional(),shift_timing:r().optional(),base_salary:Z().min(0),salary_type:x(["MONTHLY","DAILY","CONTRACT"]),payment_method:x(["BANK_TRANSFER","CASH","UPI"]).optional(),bank_name:r().optional(),account_number:r().optional(),ifsc_code:r().optional(),pan_number:r().optional(),aadhar_number:r().optional(),resume_url:r().optional(),id_proof_url:r().optional(),password:r().optional(),confirm_password:r().optional(),role:x(["ADMIN","MANAGER","DM_EXECUTIVE","WEB_SEO_EXECUTIVE","CREATIVE_DESIGNER","OPERATIONS_EXECUTIVE"])}).refine(d=>d.password||d.confirm_password?d.password===d.confirm_password:!0,{message:"Passwords must match",path:["confirm_password"]}),xe=()=>{const d=F(),S=X(),[t,j]=h.useState(1),M={enter:s=>({x:s>0?50:-50,opacity:0}),center:{x:0,opacity:1},exit:s=>({x:s<0?50:-50,opacity:0})},[b,N]=h.useState(0),{register:i,handleSubmit:C,watch:u,setValue:o,trigger:I,formState:{errors:l}}=V({resolver:U(ae),mode:"onChange",defaultValues:{salary_type:"MONTHLY",department:"MARKETING",staff_number:"",designation:""}}),c=u(),D=async()=>{let s=[];t===1&&(s=["full_name","email","personal_contact","date_of_birth","current_address"]),t===2&&(s=["staff_number","designation","department","date_of_joining","role"]),t===3&&(s=["base_salary","salary_type"]),await I(s)&&(N(1),j(n=>Math.min(n+1,4)))},O=()=>{N(-1),j(s=>Math.max(s-1,1))},T=z({mutationFn:async s=>{const a=s.designation==="Other"?s.custom_designation:s.designation;if(!a)throw new Error("Designation is required");const n={...s,designation:a,confirm_password:void 0,custom_designation:void 0};return p?await g.patch(`/team/staff/${m}`,n):await g.post("/team/staff/onboard",n)},onSuccess:()=>{S.invalidateQueries({queryKey:["staff"]}),alert(p?"Staff Profile Updated Successfully!":"Staff Onboarded Successfully!"),d("/dashboard/team")},onError:s=>{var n,v,y,_;console.error("Submission Error:",s);const a=((v=(n=s.response)==null?void 0:n.data)==null?void 0:v.message)||s.message||"Operation Failed";(_=(y=s.response)==null?void 0:y.data)!=null&&_.errors?alert(`Validation Failed:
${JSON.stringify(s.response.data.errors,null,2)}`):alert(typeof a=="object"?JSON.stringify(a,null,2):a)}}),{id:m}=G(),p=!!m;h.useEffect(()=>{m&&g.get(`/team/staff/${m}`).then(s=>{const a=s.data;a.designation&&!A.includes(a.designation)?(o("custom_designation",a.designation),o("designation","Other")):o("designation",a.designation),Object.keys(a).forEach(n=>{n==="date_of_birth"||n==="date_of_joining"?a[n]&&o(n,new Date(a[n]).toISOString().split("T")[0]):o(n==="shift_timing"?"shift_timing":n,a[n])}),a.department&&o("department",a.department),a.user&&(o("full_name",a.user.full_name),o("email",a.user.email),o("role",a.user.role),o("avatar_url",a.user.avatar_url))}).catch(s=>console.error("Failed to fetch staff details",s))},[m,o]);const P=p?"Edit Team Member":"Onboard New Team Member",R=p?"Update profile details and role permissions.":"Complete the 4-step process to grant system access.";return e.jsxs("div",{className:"max-w-5xl mx-auto p-6 space-y-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 tracking-tight",children:P}),e.jsx("p",{className:"text-gray-500 mt-2",children:R})]}),e.jsxs("div",{className:"relative flex justify-between items-center w-full max-w-3xl mx-auto mb-12",children:[e.jsx("div",{className:"absolute top-1/2 left-0 w-full h-1 bg-gray-200 -z-10 -translate-y-1/2 rounded-full"}),e.jsx("div",{className:"absolute top-1/2 left-0 h-1 bg-primary -z-10 -translate-y-1/2 rounded-full transition-all duration-500",style:{width:`${(t-1)/(w.length-1)*100}%`}}),w.map(s=>{const a=t>=s.id,n=t===s.id;return e.jsxs("div",{className:"flex flex-col items-center gap-2 bg-white px-2",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center border-2 transition-all duration-300 ${a?"bg-primary border-primary text-primary-foreground":"bg-white border-gray-300 text-gray-400"} ${n?"ring-4 ring-primary/20 scale-110":""}`,children:e.jsx(s.icon,{size:18})}),e.jsx("span",{className:`text-xs font-semibold whitespace-nowrap ${a?"text-primary":"text-gray-400"}`,children:s.label})]},s.id)})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-8 min-h-[500px] flex flex-col",children:[e.jsx("div",{className:"flex-1 overflow-x-hidden",children:e.jsx(L,{mode:"wait",custom:b,children:e.jsxs(H.div,{custom:b,variants:M,initial:"enter",animate:"center",exit:"exit",transition:{duration:.3,ease:"easeInOut"},className:"h-full",children:[t===1&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"col-span-1 space-y-4 text-center p-6 bg-gray-50 rounded-xl border border-dashed border-gray-200",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Profile Photo"}),e.jsx("div",{className:"flex justify-center",children:e.jsx(K,{value:u("avatar_url"),onChange:s=>o("avatar_url",s)})})]}),e.jsxs("div",{className:"col-span-1 lg:col-span-2 grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{className:"label",children:["Full Legal Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{...i("full_name"),className:"input-field",placeholder:"As per Id Proof"}),l.full_name&&e.jsx("span",{className:"error",children:l.full_name.message})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"label",children:["Personal Email ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{...i("email"),className:"input-field",placeholder:"For login & contact"}),l.email&&e.jsx("span",{className:"error",children:l.email.message})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"label",children:["Date of Birth ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",...i("date_of_birth"),className:"input-field"}),l.date_of_birth&&e.jsx("span",{className:"error",children:l.date_of_birth.message})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"label",children:["Phone Number ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{...i("personal_contact"),className:"input-field",placeholder:"+91..."}),l.personal_contact&&e.jsx("span",{className:"error",children:l.personal_contact.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Blood Group"}),e.jsxs("select",{...i("blood_group"),className:"input-field",children:[e.jsx("option",{value:"",children:"Select..."}),e.jsx("option",{value:"A+",children:"A+"}),e.jsx("option",{value:"B+",children:"B+"}),e.jsx("option",{value:"O+",children:"O+"}),e.jsx("option",{value:"AB+",children:"AB+"}),e.jsx("option",{value:"A-",children:"A-"}),e.jsx("option",{value:"B-",children:"B-"}),e.jsx("option",{value:"O-",children:"O-"}),e.jsx("option",{value:"AB-",children:"AB-"})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{className:"label",children:["Current Address ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{...i("current_address"),className:"input-field",rows:2,placeholder:"Full residential address"}),l.current_address&&e.jsx("span",{className:"error",children:l.current_address.message})]})]})]}),t===2&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 max-w-3xl mx-auto",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"label",children:["Staff ID ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{...i("staff_number"),className:"input-field font-mono uppercase",placeholder:"e.g. QIX-001"}),l.staff_number&&e.jsx("span",{className:"error",children:l.staff_number.message})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"label",children:["Department ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{...i("department"),className:"input-field",children:[e.jsx("option",{value:"MARKETING",children:"Marketing"}),e.jsx("option",{value:"CREATIVE",children:"Creative"}),e.jsx("option",{value:"WEB_SEO",children:"Web & SEO"}),e.jsx("option",{value:"MANAGEMENT",children:"Management"}),e.jsx("option",{value:"ADMIN",children:"Admin / HR"})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{className:"label",children:["Designation ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("select",{...i("designation"),className:"input-field",children:[e.jsx("option",{value:"",children:"Select Role..."}),A.map(s=>e.jsx("option",{value:s,children:s},s)),e.jsx("option",{value:"Other",children:"Other (Custom)"})]}),u("designation")==="Other"&&e.jsx("input",{...i("custom_designation"),className:"input-field animate-in fade-in",placeholder:"Type custom designation..."})]}),l.designation&&e.jsx("span",{className:"error",children:l.designation.message})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{className:"label",children:["System Access Role ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{...i("role"),className:"input-field bg-blue-50/50 border-blue-200",children:[e.jsx("option",{value:"",children:"Select System Permission..."}),e.jsx("option",{value:"ADMIN",children:"Admin (Full Access)"}),e.jsx("option",{value:"MANAGER",children:"Manager (Team & Clients)"}),e.jsx("option",{value:"DM_EXECUTIVE",children:"DM Executive"}),e.jsx("option",{value:"WEB_SEO_EXECUTIVE",children:"Web & SEO Executive"}),e.jsx("option",{value:"CREATIVE_DESIGNER",children:"Creative Designer"}),e.jsx("option",{value:"OPERATIONS_EXECUTIVE",children:"Operations Executive"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Determines what they can see in the dashboard."}),l.role&&e.jsx("span",{className:"error",children:l.role.message})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"label",children:["Date of Joining ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",...i("date_of_joining"),className:"input-field"}),l.date_of_joining&&e.jsx("span",{className:"error",children:l.date_of_joining.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Shift Timing"}),e.jsxs("select",{...i("shift_timing"),className:"input-field",children:[e.jsx("option",{value:"",children:"Select Shift..."}),se.map(s=>e.jsx("option",{value:s,children:s},s))]})]})]}),t===3&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 max-w-3xl mx-auto",children:[e.jsxs("div",{className:"md:col-span-2 bg-blue-50 p-4 rounded-lg border border-blue-100 mb-2",children:[e.jsxs("h3",{className:"font-semibold text-blue-900 mb-4 flex items-center gap-2",children:[e.jsx(f,{size:16})," Salary Configuration"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label text-gray-500",children:"Base Salary (Monthly)"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",children:"₹"}),e.jsx("input",{disabled:!0,className:"input-field pl-8 bg-gray-100 text-gray-400 cursor-not-allowed",value:"0 (Manage in Payroll)"}),e.jsx("input",{type:"hidden",...i("base_salary"),value:0})]}),e.jsx("p",{className:"text-[10px] text-gray-500 mt-1",children:"Set in Salary Calculator after onboarding."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Type"}),e.jsxs("select",{...i("salary_type"),className:"input-field",children:[e.jsx("option",{value:"MONTHLY",children:"Monthly Salaried"}),e.jsx("option",{value:"CONTRACT",children:"Contract / Retainer"}),e.jsx("option",{value:"DAILY",children:"Daily Wage"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Bank Name"}),e.jsx("input",{...i("bank_name"),className:"input-field",placeholder:"HDFC, SBI..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Account Number"}),e.jsx("input",{...i("account_number"),className:"input-field"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"IFSC Code"}),e.jsx("input",{...i("ifsc_code"),className:"input-field uppercase"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Payment Mode"}),e.jsxs("select",{...i("payment_method"),className:"input-field",children:[e.jsx("option",{value:"BANK_TRANSFER",children:"Bank Transfer"}),e.jsx("option",{value:"UPI",children:"UPI"}),e.jsx("option",{value:"CASH",children:"Cash"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"PAN Number"}),e.jsx("input",{...i("pan_number"),className:"input-field uppercase"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Aadhar Number (New)"}),e.jsx("input",{...i("aadhar_number"),className:"input-field",placeholder:"XXXX-XXXX-XXXX"})]})]}),t===4&&e.jsxs("div",{className:"max-w-3xl mx-auto space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"border border-dashed border-gray-300 rounded-lg p-6 text-center hover:bg-gray-50 transition-colors cursor-pointer group",children:[e.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-3 text-gray-400 group-hover:text-primary group-hover:bg-primary/10 transition-colors",children:e.jsx(E,{size:24})}),e.jsx("h4",{className:"font-semibold text-gray-900",children:"Upload Resume"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"PDF or DOCX upto 5MB"})]}),e.jsxs("div",{className:"border border-dashed border-gray-300 rounded-lg p-6 text-center hover:bg-gray-50 transition-colors cursor-pointer group",children:[e.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-3 text-gray-400 group-hover:text-primary group-hover:bg-primary/10 transition-colors",children:e.jsx(E,{size:24})}),e.jsx("h4",{className:"font-semibold text-gray-900",children:"ID Proof (Aadhar/PAN)"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"JPG, PNG or PDF"})]})]}),e.jsxs("div",{className:"bg-orange-50 p-6 rounded-lg border border-orange-100",children:[e.jsxs("h3",{className:"font-bold text-orange-900 mb-4 flex items-center gap-2",children:[e.jsx(f,{size:16})," Set Initial Password"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"label",children:["Password ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"password",...i("password"),className:"input-field"}),l.password&&e.jsx("span",{className:"error",children:l.password.message})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"label",children:["Confirm Password ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"password",...i("confirm_password"),className:"input-field"}),l.confirm_password&&e.jsx("span",{className:"error",children:l.confirm_password.message})]})]})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Review Summary"}),e.jsxs("ul",{className:"text-sm space-y-1 text-gray-600",children:[e.jsxs("li",{children:[e.jsx("span",{className:"font-medium text-gray-900",children:"Name:"})," ",c.full_name]}),e.jsxs("li",{children:[e.jsx("span",{className:"font-medium text-gray-900",children:"Role:"})," ",c.designation," (",c.department,")"]}),e.jsxs("li",{children:[e.jsx("span",{className:"font-medium text-gray-900",children:"Email:"})," ",c.email]}),e.jsxs("li",{children:[e.jsx("span",{className:"font-medium text-gray-900",children:"Salary:"})," ₹",c.base_salary," / ",c.salary_type]})]})]})]})]},t)})}),e.jsxs("div",{className:"pt-6 mt-8 border-t flex justify-between items-center",children:[e.jsxs("button",{onClick:O,disabled:t===1,className:"flex items-center gap-2 px-6 py-2.5 text-gray-600 hover:bg-gray-100 rounded-lg disabled:opacity-50 transition-colors font-medium",children:[e.jsx(J,{size:18})," Back"]}),t<4?e.jsxs("button",{onClick:D,className:"bg-primary text-primary-foreground px-8 py-2.5 rounded-lg flex items-center gap-2 hover:bg-primary/90 transition-colors font-medium shadow-sm",children:["Next Step ",e.jsx(ee,{size:18})]}):e.jsxs("button",{onClick:C(s=>T.mutate(s),s=>{console.error("Validation Errors:",s)}),className:"bg-green-600 text-white px-8 py-2.5 rounded-lg flex items-center gap-2 hover:bg-green-700 transition-colors font-bold shadow-md shadow-green-200",children:[e.jsx(Q,{size:18})," ",p?"Update Member":"Confirm Onboarding"]})]})]}),e.jsx("div",{className:"px-8 pb-8",children:e.jsx(Y,{errors:l})}),e.jsx("style",{children:`
                .label { display: block; font-size: 0.875rem; font-weight: 500; color: #374151; margin-bottom: 0.375rem; }
                .input-field { width: 100%; padding: 0.625rem 0.875rem; background-color: #fff; border: 1px solid #d1d5db; border-radius: 0.5rem; color: #111827; font-size: 0.93rem; transition: all 0.2s; outline: none; }
                .input-field:focus { border-color: #3b82f6; ring: 2px solid #3b82f6; box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1); }
                .error { font-size: 0.75rem; color: #ef4444; margin-top: 0.25rem; display: block; }
            `})]})};export{xe as default};
