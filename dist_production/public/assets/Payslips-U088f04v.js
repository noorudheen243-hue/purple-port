import{v as h,r as j,j as e,w as y}from"./index-CYovX-18.js";import{u as g,I as m,X as u}from"./index-DG6laMbl.js";import{P as p}from"./printer-B4UI0u9B.js";/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b=h("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),f=({slip:s,onClose:l})=>{var n,t,i,d,c,o,x;const r=()=>{window.print()};return e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 backdrop-blur-sm overflow-y-auto print:p-0 print:bg-white print:fixed print:inset-0 print:z-[100]",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-3xl my-8 print:shadow-none print:w-full print:max-w-none print:my-0",children:[e.jsxs("div",{className:"p-4 border-b flex justify-between items-center bg-gray-50 rounded-t-lg print:hidden",children:[e.jsx("h3",{className:"font-bold text-lg",children:"Salary Slip"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(m,{variant:"outline",size:"sm",onClick:r,children:[e.jsx(p,{className:"w-4 h-4 mr-2"})," Print / PDF"]}),e.jsx(m,{variant:"ghost",size:"sm",onClick:l,children:e.jsx(u,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{className:"p-8 bg-white print:p-0",children:[e.jsxs("div",{className:"text-center border-b pb-6 mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-primary uppercase tracking-wide",children:"Qix Ads"}),e.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Digital Marketing Agency"}),e.jsxs("h2",{className:"text-xl font-semibold mt-4 text-gray-800",children:["Payslip for ",new Date(0,s.run.month-1).toLocaleString("default",{month:"long"})," ",s.run.year]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-x-8 gap-y-4 mb-8 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Employee Name"}),e.jsx("p",{className:"font-bold text-gray-900 text-lg",children:((n=s.user)==null?void 0:n.full_name)||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Designation"}),e.jsx("p",{className:"font-semibold text-gray-900",children:((i=(t=s.user)==null?void 0:t.staffProfile)==null?void 0:i.designation)||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Department"}),e.jsx("p",{className:"font-semibold text-gray-900",children:((c=(d=s.user)==null?void 0:d.staffProfile)==null?void 0:c.department)||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Staff ID"}),e.jsx("p",{className:"font-semibold text-gray-900",children:((x=(o=s.user)==null?void 0:o.staffProfile)==null?void 0:x.staff_number)||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Days Worked"}),e.jsxs("p",{className:"font-semibold text-gray-900",children:[30-(s.lop_days||0)," Days"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"LOP Days"}),e.jsxs("p",{className:"font-semibold text-red-600",children:[s.lop_days||0," Days"]})]})]}),e.jsxs("div",{className:"border rounded-lg overflow-hidden mb-8",children:[e.jsxs("div",{className:"grid grid-cols-2 bg-gray-100 border-b",children:[e.jsx("div",{className:"p-3 font-bold text-gray-700 border-r text-center",children:"EARNINGS"}),e.jsx("div",{className:"p-3 font-bold text-gray-700 text-center",children:"DEDUCTIONS"})]}),e.jsxs("div",{className:"grid grid-cols-2",children:[e.jsxs("div",{className:"border-r",children:[e.jsx(a,{label:"Basic Salary",value:s.basic_salary}),e.jsx(a,{label:"HRA",value:s.hra}),e.jsx(a,{label:"Conveyance",value:s.conveyance_allowance}),e.jsx(a,{label:"Accommodation",value:s.accommodation_allowance}),e.jsx(a,{label:"Allowances",value:s.allowances}),e.jsx(a,{label:"Incentives",value:s.incentives}),e.jsxs("div",{className:"p-3 flex justify-between font-bold border-t bg-green-50",children:[e.jsx("span",{children:"Total Earnings"}),e.jsxs("span",{children:["₹ ",N(s).toLocaleString("en-IN")]})]})]}),e.jsxs("div",{children:[e.jsx(a,{label:"LOP Deduction",value:s.lop_deduction,isDeduction:!0}),e.jsx(a,{label:"Salary Advance",value:s.advance_salary,isDeduction:!0}),e.jsx(a,{label:"Other Deductions",value:s.other_deductions,isDeduction:!0}),e.jsx(a,{label:"",value:0,hidden:!0}),e.jsx(a,{label:"",value:0,hidden:!0}),e.jsx(a,{label:"",value:0,hidden:!0}),e.jsxs("div",{className:"p-3 flex justify-between font-bold border-t bg-red-50",children:[e.jsx("span",{children:"Total Deductions"}),e.jsxs("span",{children:["₹ ",v(s).toLocaleString("en-IN")]})]})]})]})]}),e.jsxs("div",{className:"bg-gray-900 text-white p-6 rounded-lg flex justify-between items-center shadow-lg print:bg-gray-200 print:text-black print:border-2 print:border-black",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm opacity-80 uppercase tracking-widest",children:"Net Payable"}),e.jsx("p",{className:"text-xs opacity-60",children:"Earnings - Deductions"})]}),e.jsxs("div",{className:"text-3xl font-bold",children:["₹ ",s.net_pay.toLocaleString("en-IN")]})]}),e.jsxs("div",{className:"mt-12 pt-8 border-t flex justify-between text-xs text-gray-400",children:[e.jsx("p",{children:"Generated by Qix Ads System"}),e.jsx("p",{children:new Date().toLocaleDateString()})]})]})]})})},a=({label:s,value:l,isDeduction:r,hidden:n})=>n?e.jsx("div",{className:"p-2 h-8"}):e.jsxs("div",{className:"flex justify-between p-2 px-3 text-sm border-b last:border-0 hover:bg-gray-50",children:[e.jsx("span",{className:"text-gray-600",children:s}),e.jsx("span",{className:`font-medium ${r?"text-red-600":"text-gray-900"}`,children:l?`₹ ${l.toLocaleString("en-IN")}`:"-"})]}),N=s=>(s.basic_salary||0)+(s.hra||0)+(s.conveyance_allowance||0)+(s.accommodation_allowance||0)+(s.allowances||0)+(s.incentives||0),v=s=>(s.lop_deduction||0)+(s.advance_salary||0)+(s.other_deductions||0),_=()=>{const[s,l]=j.useState(null),{data:r,isLoading:n}=g({queryKey:["payslips"],queryFn:()=>y.get("/payroll/history").then(t=>t.data)});return n?e.jsx("div",{className:"p-8 text-center text-gray-500",children:"Loading payslips..."}):e.jsxs("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:[s&&e.jsx(f,{slip:s,onClose:()=>l(null)}),!r||r.length===0?e.jsx("div",{className:"p-12 text-center text-gray-500",children:"No payslips found. Generate one from Salary Calculator."}):e.jsx("ul",{role:"list",className:"divide-y divide-gray-200",children:r.map(t=>{var i;return e.jsx("li",{className:"hover:bg-gray-50 transition",children:e.jsxs("div",{className:"px-4 py-4 sm:px-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-medium text-indigo-600 truncate",children:[new Date(0,t.run.month-1).toLocaleString("default",{month:"long"})," ",t.run.year]}),e.jsx("p",{className:"text-xs text-gray-500",children:(i=t.user)==null?void 0:i.full_name})]}),e.jsx("div",{className:"ml-2 flex-shrink-0 flex",children:e.jsx("p",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:"Paid"})})]}),e.jsxs("div",{className:"mt-2 sm:flex sm:justify-between items-center",children:[e.jsx("div",{className:"sm:flex",children:e.jsxs("p",{className:"flex items-center text-sm text-gray-500",children:["Net Pay: ",e.jsxs("span",{className:"font-medium text-gray-900 ml-1",children:["₹",t.net_pay.toLocaleString("en-IN")]})]})}),e.jsx("div",{className:"mt-2 flex items-center text-sm text-gray-500 sm:mt-0 gap-4",children:e.jsxs("button",{onClick:()=>l(t),className:"flex items-center gap-1 text-gray-600 hover:text-gray-900 transition",children:[e.jsx(b,{className:"h-4 w-4"})," View Slip"]})})]})]})},t.id)})})]})};export{_ as default};
