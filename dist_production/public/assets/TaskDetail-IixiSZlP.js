import{v as u,G as g,u as b,q as j,r as v,j as e,L as N,w as x}from"./index-CYovX-18.js";import{u as y,d as w,l as d,U as k}from"./index-DG6laMbl.js";import{A as M}from"./arrow-left-BI3a_3j-.js";import{C as A}from"./clock-CqPd1juV.js";/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C=u("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=u("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),z=()=>{var i,c,o,m;const{id:a}=g(),{user:_}=b(),h=j(),[r,l]=v.useState(""),{data:t,isLoading:f}=y({queryKey:["task",a],queryFn:async()=>{const{data:s}=await x.get(`/tasks/${a}`);return s}}),n=w({mutationFn:async s=>await x.post("/comments",{task_id:a,content:s}),onSuccess:()=>{h.invalidateQueries({queryKey:["task",a]}),l("")}}),p=s=>{s.preventDefault(),r.trim()&&n.mutate(r)};return f?e.jsx("div",{children:"Loading task..."}):t?e.jsxs("div",{className:"max-w-5xl mx-auto h-[cale(100vh-4rem)] flex flex-col",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx(N,{to:"/dashboard/tasks",className:"text-muted-foreground hover:text-foreground",children:e.jsx(M,{size:20})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[e.jsxs("span",{className:"text-sm font-mono text-muted-foreground",children:["#",t.id.slice(0,8)]}),e.jsx("span",{className:`text-xs px-2 py-1 rounded font-medium ${t.status==="COMPLETED"?"bg-green-100 text-green-700":"bg-blue-100 text-blue-700"}`,children:t.status})]}),e.jsx("h1",{className:"text-2xl font-bold",children:t.title})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 flex-1 overflow-hidden lg:overflow-visible h-full lg:h-auto",children:[e.jsxs("div",{className:"lg:col-span-2 flex flex-col overflow-hidden h-full",children:[e.jsxs("div",{className:"bg-card border border-border rounded-lg p-6 mb-6 shadow-sm",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Description"}),e.jsx("p",{className:"text-muted-foreground whitespace-pre-wrap",children:t.description||"No description provided."})]}),e.jsxs("div",{className:"bg-card border border-border rounded-lg flex-1 flex flex-col shadow-sm overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b font-semibold bg-muted/30",children:"Activity & Comments"}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-6",children:(i=t.comments)==null?void 0:i.map(s=>e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-primary/20 flex items-center justify-center text-xs font-bold shrink-0",children:s.author.full_name.charAt(0)}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"font-semibold text-sm",children:s.author.full_name}),e.jsx("span",{className:"text-xs text-muted-foreground",children:d(new Date(s.createdAt),"MMM d, h:mm a")})]}),e.jsx("div",{className:"text-sm text-foreground bg-muted/30 p-3 rounded-md",children:s.content})]})]},s.id))}),e.jsx("div",{className:"p-4 border-t bg-background",children:e.jsxs("form",{onSubmit:p,className:"flex gap-2",children:[e.jsx("input",{type:"text",className:"flex-1 h-10 px-3 rounded-md border border-input bg-background",placeholder:"Write a comment...",value:r,onChange:s=>l(s.target.value)}),e.jsx("button",{type:"submit",className:"bg-primary text-primary-foreground h-10 w-10 flex items-center justify-center rounded-md hover:bg-primary/90",disabled:n.isPending,children:e.jsx(D,{size:18})})]})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-card border border-border rounded-lg p-5 shadow-sm space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wider block mb-1",children:"Assignee"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-indigo-100 text-indigo-700 flex items-center justify-center text-xs",children:e.jsx(k,{size:14})}),e.jsx("span",{className:"text-sm font-medium",children:((c=t.assignee)==null?void 0:c.full_name)||"Unassigned"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wider block mb-1",children:"Due Date"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(A,{size:14,className:"text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:t.due_date?d(new Date(t.due_date),"MMM d, yyyy"):"No due date"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wider block mb-1",children:"Tracking"}),e.jsxs("div",{className:"bg-muted rounded p-2 text-center",children:[e.jsx("span",{className:"text-2xl font-mono block",children:"00:00"}),e.jsx("button",{className:"text-xs text-primary hover:underline mt-1",children:"Start Timer"})]})]})]}),e.jsxs("div",{className:"bg-card border border-border rounded-lg p-5 shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"font-semibold text-sm",children:"Assets"}),e.jsxs("button",{className:"text-xs bg-muted hover:bg-muted/80 px-2 py-1 rounded flex items-center gap-1",children:[e.jsx(C,{size:12})," Upload"]})]}),e.jsxs("div",{className:"space-y-2",children:[((o=t.assets)==null?void 0:o.length)===0&&e.jsx("div",{className:"text-xs text-muted-foreground italic",children:"No assets attached."}),(m=t.assets)==null?void 0:m.map(s=>e.jsxs("div",{className:"flex items-center gap-2 p-2 border rounded bg-background",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded flex items-center justify-center text-[10px] font-mono",children:s.file_type.split("/")[1]}),e.jsxs("div",{className:"flex-1 overflow-hidden",children:[e.jsx("div",{className:"text-xs font-medium truncate",title:s.original_name,children:s.original_name}),e.jsxs("div",{className:"text-[10px] text-muted-foreground",children:["v",s.version," â€¢ ",d(new Date(s.createdAt),"MMM d")]})]})]},s.id))]})]})]})]})]}):e.jsx("div",{children:"Task not found"})};export{z as default};
