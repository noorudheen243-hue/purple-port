import{r as n,j as e,H as y,w as v}from"./index-CYovX-18.js";import{u as f,C as w,K as b}from"./index-DG6laMbl.js";import{C as o,c as S}from"./card-2RwEr_MJ.js";import{S as T}from"./search-U1j7VZT8.js";import{F as C}from"./filter-DivwszFh.js";import{C as k}from"./check-circle-Crge6kva.js";import{C as x}from"./clock-CqPd1juV.js";import{A}from"./alert-circle-V7EQjuNI.js";const z=()=>{const[r,m]=n.useState("ALL"),[l,p]=n.useState(""),[i,h]=n.useState("THIS_MONTH"),{data:c,isLoading:u,error:g}=f({queryKey:["team-performance",r,i],queryFn:async()=>{const t={};r!=="ALL"&&(t.department=r);const s=new Date;return i==="THIS_MONTH"&&(t.startDate=new Date(s.getFullYear(),s.getMonth(),1).toISOString(),t.endDate=new Date(s.getFullYear(),s.getMonth()+1,0).toISOString()),(await v.get("/analytics/team-performance",{params:t})).data}}),d=n.useMemo(()=>c?c.filter(t=>t.name.toLowerCase().includes(l.toLowerCase())||t.designation.toLowerCase().includes(l.toLowerCase())):[],[c,l]),j=t=>t>=80?"text-green-600":t>=60?"text-yellow-600":"text-red-600",N=(t,s)=>{if(s===0)return e.jsx("span",{className:"text-gray-400 text-xs",children:"No Rework"});const a=t>10?"bg-red-100 text-red-700":"bg-orange-100 text-orange-700";return e.jsxs("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium flex items-center gap-1 w-fit ${a}`,children:[e.jsx(A,{size:10})," ",s," (",t,"%)"]})};return g?e.jsx("div",{className:"p-8 text-center text-red-500",children:"Failed to load performance data."}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"Team Performance Analytics"}),e.jsx("p",{className:"text-muted-foreground",children:"Task-based performance insights and productivity scores."})]})}),e.jsx(o,{children:e.jsxs(S,{className:"p-4 flex flex-col md:flex-row gap-4 items-center",children:[e.jsxs("div",{className:"relative flex-1 w-full",children:[e.jsx(T,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground",size:18}),e.jsx("input",{type:"text",placeholder:"Search staff...",className:"w-full pl-10 pr-4 py-2 bg-background border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/20",value:l,onChange:t=>p(t.target.value)})]}),e.jsxs("div",{className:"flex items-center gap-2 w-full md:w-auto",children:[e.jsx(C,{size:18,className:"text-muted-foreground"}),e.jsxs("select",{className:"bg-background border rounded-md px-3 py-2 text-sm focus:outline-none w-full md:w-40",value:r,onChange:t=>m(t.target.value),children:[e.jsx("option",{value:"ALL",children:"All Departments"}),e.jsx("option",{value:"CREATIVE",children:"Creative"}),e.jsx("option",{value:"MARKETING",children:"Marketing"}),e.jsx("option",{value:"WEB",children:"Web & SEO"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 w-full md:w-auto",children:[e.jsx(w,{size:18,className:"text-muted-foreground"}),e.jsxs("select",{className:"bg-background border rounded-md px-3 py-2 text-sm focus:outline-none w-full md:w-40",value:i,onChange:t=>h(t.target.value),children:[e.jsx("option",{value:"THIS_MONTH",children:"This Month"}),e.jsx("option",{value:"LAST_MONTH",children:"Last Month"}),e.jsx("option",{value:"ALL_TIME",children:"All Time"})]})]})]})}),e.jsx(o,{className:"overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm text-left",children:[e.jsx("thead",{className:"bg-gray-50/75 text-gray-500 font-medium border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 pl-6 w-[250px]",children:"Staff Member"}),e.jsx("th",{className:"px-4 py-3",children:"Task Volume"}),e.jsx("th",{className:"px-4 py-3",children:"Quality & Rework"}),e.jsx("th",{className:"px-4 py-3",children:"Efficiency (Hrs)"}),e.jsx("th",{className:"px-4 py-3",children:"Task Focus"}),e.jsx("th",{className:"px-4 py-3 text-right pr-6",children:"Productivity Score"})]})}),e.jsx("tbody",{className:"divide-y",children:u?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"p-8 text-center text-muted-foreground",children:"Loading analytics..."})}):d.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"p-8 text-center text-muted-foreground",children:"No data found for selected filters."})}):d.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50/50 transition-colors",children:[e.jsx("td",{className:"px-4 py-3 pl-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center text-primary font-bold text-sm overflow-hidden",children:t.avatar?e.jsx("img",{src:b(t.avatar),alt:t.name,className:"w-full h-full object-cover"}):t.name.charAt(0)}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900",children:t.name}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[t.designation," · ",t.department]})]})]})}),e.jsx("td",{className:"px-4 py-3 align-top pt-4",children:e.jsxs("div",{className:"space-y-1.5 w-[140px]",children:[e.jsxs("div",{className:"flex justify-between text-xs font-medium",children:[e.jsxs("span",{className:"text-green-600",children:[t.metrics.completed," Done"]}),e.jsxs("span",{className:"text-gray-500",children:[t.metrics.total," Total"]})]}),e.jsx("div",{className:"h-2 w-full bg-gray-100 rounded-full overflow-hidden flex",children:e.jsx("div",{className:"h-full bg-green-500 rounded-full",style:{width:`${t.metrics.total>0?t.metrics.completed/t.metrics.total*100:0}%`}})}),e.jsxs("div",{className:"flex gap-2 text-[10px] text-gray-400",children:[e.jsxs("span",{children:[t.metrics.pending," Pending"]}),e.jsx("span",{children:"•"}),e.jsxs("span",{children:[t.metrics.review," In Review"]})]})]})}),e.jsx("td",{className:"px-4 py-3 align-top pt-4",children:e.jsxs("div",{className:"flex flex-col gap-1.5",children:[N(t.metrics.reworkRate,t.metrics.rework),t.metrics.slaBreaches>0?e.jsxs("span",{className:"text-xs font-medium text-red-600 flex items-center gap-1",children:[e.jsx(y,{size:12})," ",t.metrics.slaBreaches," SLA Breaches"]}):e.jsxs("span",{className:"text-[10px] text-green-600 flex items-center gap-1",children:[e.jsx(k,{size:10})," SLA On Track"]})]})}),e.jsx("td",{className:"px-4 py-3 align-top pt-4",children:e.jsxs("div",{className:"text-xs space-y-1 text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-1",title:"Estimated Time",children:[e.jsx(x,{size:12,className:"text-gray-400"})," Est: ",e.jsxs("span",{className:"font-medium text-gray-900",children:[t.time.estimated,"h"]})]}),e.jsxs("div",{className:"flex items-center gap-1",title:"Actual Time",children:[e.jsx(x,{size:12,className:"text-blue-400"})," Act: ",e.jsxs("span",{className:"font-medium text-gray-900",children:[t.time.actual,"h"]})]}),t.time.actual>0&&e.jsxs("div",{className:`text-[10px] font-medium ${t.time.actual>t.time.estimated?"text-red-500":"text-green-600"}`,children:[Math.round(t.time.estimated/t.time.actual*100),"% Efficiency"]})]})}),e.jsx("td",{className:"px-4 py-3 align-top pt-4",children:e.jsxs("div",{className:"flex flex-wrap gap-1 max-w-[150px]",children:[Object.entries(t.taskTypes).sort(([,s],[,a])=>a-s).slice(0,3).map(([s,a])=>e.jsxs("span",{className:"px-1.5 py-0.5 bg-gray-100 text-gray-600 rounded text-[10px] border",children:[s,": ",a]},s)),Object.keys(t.taskTypes).length===0&&e.jsx("span",{className:"text-xs text-gray-400",children:"-"})]})}),e.jsx("td",{className:"px-4 py-3 align-top pt-3 text-right pr-6",children:e.jsxs("div",{className:"flex flex-col items-end",children:[e.jsx("span",{className:`text-2xl font-bold ${j(t.productivityScore)}`,children:t.productivityScore}),e.jsx("span",{className:"text-[10px] uppercase tracking-wider text-gray-400 font-medium",children:"Score"})]})})]},t.id))})]})})})]})};export{z as default};
