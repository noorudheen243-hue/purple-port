import{v as f,r as t,j as e,w as N}from"./index-CYovX-18.js";import{C as v,a as C,b as P,d as b,c as S}from"./card-2RwEr_MJ.js";import{Y as k,L as l,a2 as d,I as L}from"./index-DG6laMbl.js";import{L as n}from"./label-DCn_cjj0.js";import{A as F}from"./alert-circle-V7EQjuNI.js";/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=f("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),U=()=>{const[o,i]=t.useState(""),[r,m]=t.useState(""),[u,p]=t.useState(""),[x,h]=t.useState(!1),[c,a]=t.useState(null),j=async s=>{var g,w;if(s.preventDefault(),a(null),r!==u){a({type:"error",text:"New passwords don't match"});return}if(r.length<6){a({type:"error",text:"Password must be at least 6 characters"});return}try{h(!0),await N.post("/auth/change-password",{currentPassword:o,newPassword:r}),a({type:"success",text:"Password changed successfully!"}),i(""),m(""),p("")}catch(y){a({type:"error",text:((w=(g=y.response)==null?void 0:g.data)==null?void 0:w.message)||"Failed to change password"})}finally{h(!1)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Settings"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your account and preferences."})]}),e.jsx("div",{className:"grid gap-6 md:grid-cols-2",children:e.jsxs(v,{children:[e.jsxs(C,{children:[e.jsxs(P,{className:"flex items-center gap-2",children:[e.jsx(k,{className:"h-5 w-5 text-purple-600"}),"Security"]}),e.jsx(b,{children:"Update your password to keep your account secure."})]}),e.jsx(S,{children:e.jsxs("form",{onSubmit:j,className:"space-y-4",children:[c&&e.jsxs("div",{className:`p-3 rounded-md text-sm flex items-center gap-2 ${c.type==="success"?"bg-green-50 text-green-700":"bg-red-50 text-red-700"}`,children:[c.type==="success"?e.jsx(q,{className:"h-4 w-4"}):e.jsx(F,{className:"h-4 w-4"}),c.text]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"current",children:"Current Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(l,{className:"absolute left-3 top-2.5 h-4 w-4 text-gray-400"}),e.jsx(d,{id:"current",type:"password",className:"pl-9",value:o,onChange:s=>i(s.target.value),required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"new",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(l,{className:"absolute left-3 top-2.5 h-4 w-4 text-gray-400"}),e.jsx(d,{id:"new",type:"password",className:"pl-9",value:r,onChange:s=>m(s.target.value),required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"confirm",children:"Confirm New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(l,{className:"absolute left-3 top-2.5 h-4 w-4 text-gray-400"}),e.jsx(d,{id:"confirm",type:"password",className:"pl-9",value:u,onChange:s=>p(s.target.value),required:!0})]})]}),e.jsx(L,{type:"submit",disabled:x,className:"w-full",children:x?"Updating...":"Change Password"})]})})]})})]})};export{U as default};
