import{J as rt,u as nt,q as lt,a as it,r as h,x as u,j as e}from"./index-DTs_gUpQ.js";import{u as $,j as k,S as b,U as ae,q as qe,I as o,K as _e,P as R,T as ot,k as se,C as dt,B as j,m as De,X as _,a4 as re,h as ct}from"./index-BPHe9uWR.js";import{T as Te,a as Ie,b as M,c as O}from"./tabs-B5Xndk5l.js";import{C as v,c as W,a as Le,b as $e,d as Me}from"./card-CkON84C3.js";import{T as xt,a as mt,b as A,c as C,d as gt,e as c}from"./table-D4yQmoYa.js";import{B as Oe}from"./badge-CAnxudGq.js";import{G as Fe}from"./globe-kndGuocV.js";import{L as Pe}from"./layout-dashboard-Cnaot7R4.js";import{P as K}from"./pen-tool-BI15lMVF.js";import{C as ht}from"./clock-C1wc1VsE.js";import{A as Ae}from"./activity-I16OBbXv.js";import{S as ze}from"./save-dY_yXBe1.js";import{P as ut}from"./phone-BM-Rq8-s.js";import{M as pt}from"./map-pin-D9DhU-Jy.js";import"./index-osOQW184.js";import"./index-Bs76HOJd.js";const bt={META:ot,GOOGLE:qe,SEO:Fe,WEB:Pe,CONTENT:K},ne={HIGH:"bg-green-100 text-green-700 border-green-200",MEDIUM:"bg-yellow-100 text-yellow-700 border-yellow-200",LOW:"bg-red-100 text-red-700 border-red-200"},le={NEW:"bg-blue-100 text-blue-700",CONTACTED:"bg-indigo-100 text-indigo-700",QUALIFIED:"bg-purple-100 text-purple-700",CLOSED:"bg-green-100 text-green-700",LOST:"bg-gray-100 text-gray-700"},Mt=()=>{var Ne,we,Ce,Se,Ee,ke;const[Y]=rt(),{user:g}=nt(),S=lt(),Ue=it(),{data:y}=$({queryKey:["clients-all"],queryFn:async()=>(await u.get("/clients")).data,enabled:(g==null?void 0:g.role)!=="CLIENT"}),i=h.useMemo(()=>(g==null?void 0:g.role)==="CLIENT"?g.linked_client_id:Y.get("clientId"),[g,Y]),{data:Qe}=$({queryKey:["client",i],queryFn:async()=>(await u.get(`/clients/${i}`)).data,enabled:(g==null?void 0:g.role)==="CLIENT"&&!!i}),ie=t=>{const a=new URLSearchParams(Y);t?a.set("clientId",t):a.delete("clientId"),Ue(`?${a.toString()}`)},T=(g==null?void 0:g.role)!=="CLIENT",D=T?y==null?void 0:y.find(t=>t.id===i):Qe,[Be,oe]=h.useState(T?"campaignData":"history"),[de,X]=h.useState(!1),[Ve,Z]=h.useState(null),[z,ce]=h.useState(""),[q,xe]=h.useState(""),[n,x]=h.useState({date:new Date().toISOString(),quality:"MEDIUM",status:"NEW",follow_ups:[]}),[U,He]=h.useState(""),[Q,me]=h.useState("meta"),[E,ge]=h.useState(null),[s,m]=h.useState({date:new Date().toISOString(),status:"ACTIVE"}),[N,Ge]=h.useState(""),[w,Re]=h.useState(""),{data:B}=$({queryKey:["tracking-meta",i,N,w],queryFn:async()=>{const t=new URLSearchParams({clientId:i});return N&&t.append("startDate",N),w&&t.append("endDate",w),(await u.get(`/client-portal/tracking/meta-ads?${t.toString()}`)).data},enabled:!!i}),{data:V}=$({queryKey:["tracking-google",i,N,w],queryFn:async()=>{const t=new URLSearchParams({clientId:i});return N&&t.append("startDate",N),w&&t.append("endDate",w),(await u.get(`/client-portal/tracking/google-ads?${t.toString()}`)).data},enabled:!!i}),{data:H}=$({queryKey:["tracking-seo",i,N,w],queryFn:async()=>{const t=new URLSearchParams({clientId:i});return N&&t.append("startDate",N),w&&t.append("endDate",w),(await u.get(`/client-portal/tracking/seo?${t.toString()}`)).data},enabled:!!i}),{data:f,isLoading:We}=$({queryKey:["tracking-leads",i],queryFn:async()=>(await u.get(`/client-portal/tracking/leads?clientId=${i}`)).data,enabled:!!i}),F=h.useMemo(()=>{const t=[];return B==null||B.forEach(a=>{var l,p;let r=a.results_json;if(typeof r=="string")try{r=JSON.parse(r)}catch{}const d=[];r!=null&&r.impressions&&d.push(`Impressions: ${r.impressions}`),r!=null&&r.engagement&&d.push(`Engagement: ${r.engagement}`),r!=null&&r.leads&&d.push(`Leads: ${r.leads}`),t.push({id:a.id,date:a.date,service:"Meta Ads",title:a.campaign_name,description:`${a.objective} campaign on ${a.platform}. Spend: ₹${(l=a.spend)==null?void 0:l.toLocaleString()} ${d.length>0?"| "+d.join(", "):""}`,badge:`₹${(p=a.spend)==null?void 0:p.toLocaleString()}`,status:a.status,type:"META",originalData:a})}),V==null||V.forEach(a=>{var d,l;const r=[];a.impressions&&r.push(`Impressions: ${a.impressions}`),a.clicks&&r.push(`Clicks: ${a.clicks}`),a.conversions&&r.push(`Conversions: ${a.conversions}`),t.push({id:a.id,date:a.date,service:"Google Ads",title:a.campaign_name,description:`${a.campaign_type} campaign. Spend: ₹${(d=a.spend)==null?void 0:d.toLocaleString()} ${r.length>0?"| "+r.join(", "):""}`,badge:`₹${(l=a.spend)==null?void 0:l.toLocaleString()}`,status:a.status,type:"GOOGLE",originalData:a})}),H==null||H.forEach(a=>{var r,d;t.push({id:a.id,date:new Date(a.year,a.month-1).toISOString(),service:"SEO",title:`Performance - ${a.month}/${a.year}`,description:`Organic Traffic: ${(r=a.organic_traffic)==null?void 0:r.toLocaleString()}. ${a.summary||""}`,badge:`${(d=a.organic_traffic)==null?void 0:d.toLocaleString()} Visits`,status:a.status,type:"SEO",originalData:a})}),t.sort((a,r)=>a.status==="ACTIVE"&&r.status!=="ACTIVE"?-1:r.status==="ACTIVE"&&a.status!=="ACTIVE"?1:new Date(r.date).getTime()-new Date(a.date).getTime()).slice(0,20)},[B,V,H]),J=h.useMemo(()=>{const t=F.filter(d=>d.status==="ACTIVE").length;let a=0,r=0;return F.forEach(d=>{var l;if((l=d.originalData)!=null&&l.spend&&(a+=d.originalData.spend),d.type==="META")try{const p=typeof d.originalData.results_json=="string"?JSON.parse(d.originalData.results_json):d.originalData.results_json;p!=null&&p.leads&&(r+=Number(p.leads))}catch{}}),{activeCount:t,totalSpend:a,totalLeads:r}},[F]),P=h.useMemo(()=>f?{total:f.length,highQuality:f.filter(t=>t.quality==="HIGH").length,converted:f.filter(t=>t.status==="CONVERTED").length,positive:f.filter(t=>t.is_positive===!0).length,negative:f.filter(t=>t.is_positive===!1).length}:{total:0,highQuality:0,converted:0,positive:0,negative:0},[f]),ee=h.useMemo(()=>{if(!f)return[];let t=[...f];if(z){const a=new Date(z).getTime();t=t.filter(r=>new Date(r.date).getTime()>=a)}if(q){const a=new Date(q).getTime();t=t.filter(r=>new Date(r.date).getTime()<=a+864e5)}return t.sort((a,r)=>{const d=new Date(a.date).getTime();return new Date(r.date).getTime()-d})},[f,z,q]),he=k({mutationFn:async t=>t.id?await u.patch(`/client-portal/tracking/leads/${t.id}?clientId=${i}`,t):await u.post(`/client-portal/tracking/leads?clientId=${i}`,{...t,client_id:i}),onSuccess:()=>{S.invalidateQueries({queryKey:["tracking-leads",i]}),X(!1),Z(null),x({date:new Date().toISOString(),quality:"MEDIUM",status:"NEW",follow_ups:[]}),b.fire({title:"Success",icon:"success",toast:!0,position:"top-end",showConfirmButton:!1,timer:2e3})},onError:t=>{var a,r;return b.fire("Error",((r=(a=t.response)==null?void 0:a.data)==null?void 0:r.message)||"Failed to save lead","error")}}),Ke=k({mutationFn:async t=>await u.delete(`/client-portal/tracking/leads/${t}?clientId=${i}`),onSuccess:()=>{S.invalidateQueries({queryKey:["tracking-leads",i]}),b.fire({title:"Deleted",icon:"success",toast:!0,position:"top-end",showConfirmButton:!1,timer:2e3})}}),ue=k({mutationFn:async t=>E?await u.patch(`/client-portal/tracking/meta-ads/${E}?clientId=${i}`,t):await u.post(`/client-portal/tracking/meta-ads?clientId=${i}`,{...t,client_id:i}),onSuccess:()=>{S.invalidateQueries({queryKey:["tracking-meta",i]}),G(),b.fire({title:"Success",icon:"success",toast:!0,position:"top-end",showConfirmButton:!1,timer:2e3})},onError:t=>{var a,r;return b.fire("Error",((r=(a=t.response)==null?void 0:a.data)==null?void 0:r.message)||"Failed to save Meta Ads log","error")}}),pe=k({mutationFn:async t=>E?await u.patch(`/client-portal/tracking/google-ads/${E}?clientId=${i}`,t):await u.post(`/client-portal/tracking/google-ads?clientId=${i}`,{...t,client_id:i}),onSuccess:()=>{S.invalidateQueries({queryKey:["tracking-google",i]}),G(),b.fire({title:"Success",icon:"success",toast:!0,position:"top-end",showConfirmButton:!1,timer:2e3})}}),be=k({mutationFn:async t=>E?await u.patch(`/client-portal/tracking/seo/${E}?clientId=${i}`,t):await u.post(`/client-portal/tracking/seo?clientId=${i}`,{...t,client_id:i}),onSuccess:()=>{S.invalidateQueries({queryKey:["tracking-seo",i]}),G(),b.fire({title:"Success",icon:"success",toast:!0,position:"top-end",showConfirmButton:!1,timer:2e3})}}),Ye=k({mutationFn:async t=>await u.delete(`/client-portal/tracking/meta-ads/${t}?clientId=${i}`),onSuccess:()=>{S.invalidateQueries({queryKey:["tracking-meta",i]}),b.fire({title:"Deleted",icon:"success",toast:!0,position:"top-end",showConfirmButton:!1,timer:2e3})}}),Xe=k({mutationFn:async t=>await u.delete(`/client-portal/tracking/google-ads/${t}?clientId=${i}`),onSuccess:()=>{S.invalidateQueries({queryKey:["tracking-google",i]}),b.fire({title:"Deleted",icon:"success",toast:!0,position:"top-end",showConfirmButton:!1,timer:2e3})}}),Ze=k({mutationFn:async t=>await u.delete(`/client-portal/tracking/seo/${t}?clientId=${i}`),onSuccess:()=>{S.invalidateQueries({queryKey:["tracking-seo",i]}),b.fire({title:"Deleted",icon:"success",toast:!0,position:"top-end",showConfirmButton:!1,timer:2e3})}}),je=()=>{const t=n.follow_ups||[],a=t.length+1;x({...n,follow_ups:[...t,{follow_up_number:a,status:"PENDING",notes:"",date:new Date().toISOString()}]})},I=(t,a,r)=>{const d=[...n.follow_ups||[]];d[t]={...d[t],[a]:r},x({...n,follow_ups:d})},fe=t=>{const a=(n.follow_ups||[]).filter((r,d)=>d!==t).map((r,d)=>({...r,follow_up_number:d+1}));x({...n,follow_ups:a})},Je=t=>{Z(t.id||null),x(t)},ve=()=>{if(!n.name||!n.phone){b.fire("Error","Name and Phone are required","warning");return}he.mutate(n)},et=t=>{b.fire({title:"Are you sure?",text:"This will permanently remove the lead record.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(a=>{a.isConfirmed&&Ke.mutate(t)})},ye=(t,a)=>{he.mutate({...t,is_positive:a})},tt=t=>{b.fire({title:"Are you sure?",text:"This will permanently remove the campaign record.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(a=>{a.isConfirmed&&(t.type==="META"?Ye.mutate(t.id):t.type==="GOOGLE"?Xe.mutate(t.id):t.type==="SEO"&&Ze.mutate(t.id))})},G=()=>{ge(null),m({date:new Date().toISOString(),status:"ACTIVE"})},at=t=>{ge(t.id),oe("campaignData");let a="meta";t.type==="GOOGLE"&&(a="google"),t.type==="SEO"&&(a="seo"),me(a),m({...t.originalData})},st=()=>{if(Q==="meta"){if(!s.campaign_name||!s.objective||!s.platform){b.fire("Error","Campaign Name, Objective, and Platform are required","warning");return}ue.mutate(s)}else if(Q==="google"){if(!s.campaign_name||!s.campaign_type){b.fire("Error","Campaign Name and Type are required","warning");return}pe.mutate(s)}else if(Q==="seo"){if(!s.month||!s.year){b.fire("Error","Month and Year are required","warning");return}be.mutate(s)}},te=h.useMemo(()=>{if(!y)return[];if(!U)return y;const t=U.toLowerCase();return y.filter(a=>a.name.toLowerCase().includes(t)||a.client_code.toLowerCase().includes(t))},[y,U]);return i?e.jsxs("div",{className:"p-6 w-[98%] max-w-[1920px] mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between gap-4 bg-white p-6 rounded-2xl shadow-sm border border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-indigo-50 rounded-xl text-indigo-600",children:e.jsx(Pe,{size:28})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Manage Services"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Campaign history, performance logs and lead tracking."})]})]}),T&&e.jsxs("div",{className:"flex items-center gap-3 bg-indigo-50/50 p-2 rounded-xl border border-indigo-100 min-w-[300px]",children:[e.jsx(ae,{size:20,className:"ml-2 text-indigo-500"}),e.jsxs("select",{className:"bg-transparent border-none text-indigo-900 font-bold focus:ring-0 cursor-pointer w-full text-sm",value:i||"",onChange:t=>ie(t.target.value),children:[e.jsx("option",{value:"",children:"Select a Client..."}),y==null?void 0:y.map(t=>e.jsxs("option",{value:t.id,children:[t.name," (",t.client_code,")"]},t.id))]})]})]}),D&&e.jsxs("div",{className:"flex items-center gap-6 bg-gradient-to-r from-purple-50 to-white pt-2 pb-6 px-4 rounded-xl mb-6",children:[D.logo_url?e.jsx("img",{src:_e(D.logo_url),alt:D.name,className:"w-20 h-20 rounded-full object-cover border-4 border-white shadow-lg"}):e.jsx("div",{className:"w-20 h-20 rounded-full bg-gradient-to-br from-purple-500 to-indigo-600 flex items-center justify-center text-white text-3xl font-bold shadow-lg border-4 border-white",children:D.name.substring(0,1).toUpperCase()}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-extrabold text-gray-900 tracking-tight",children:D.name}),e.jsx("p",{className:"text-sm font-medium text-purple-600 uppercase tracking-widest mt-1 ml-1",children:D.client_code})]})]}),e.jsxs(Te,{value:Be,onValueChange:oe,className:"w-full",children:[e.jsxs(Ie,{className:"bg-yellow-50/50 p-1.5 rounded-2xl mb-6 border border-yellow-200/50 flex flex-wrap gap-2",children:[T&&e.jsxs(M,{value:"campaignData",className:"rounded-xl px-6 py-2.5 data-[state=active]:bg-[#2c185a] data-[state=active]:text-white data-[state=active]:shadow-md transition-all text-gray-700 font-bold hover:bg-yellow-100",children:[e.jsx(K,{size:18,className:"mr-2"})," Manage Campaign"]}),e.jsxs(M,{value:"history",className:"rounded-xl px-6 py-2.5 data-[state=active]:bg-[#2c185a] data-[state=active]:text-white data-[state=active]:shadow-md transition-all text-gray-700 font-bold hover:bg-yellow-100",children:[e.jsx(ht,{size:18,className:"mr-2"})," Campaign History"]}),e.jsxs(M,{value:"leads",className:"rounded-xl px-6 py-2.5 data-[state=active]:bg-[#2c185a] data-[state=active]:text-white data-[state=active]:shadow-md transition-all text-gray-700 font-bold hover:bg-yellow-100",children:[e.jsx(ae,{size:18,className:"mr-2"})," Lead Management"]})]}),e.jsx(O,{value:"history",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[e.jsxs(v,{className:"bg-indigo-50/50 border-indigo-100 flex flex-col items-center justify-center p-4 rounded-xl shadow-sm",children:[e.jsx("span",{className:"text-sm font-bold text-indigo-600 mb-1",children:"Active Campaigns"}),e.jsx("span",{className:"text-3xl font-extrabold text-indigo-900",children:J.activeCount})]}),e.jsxs(v,{className:"bg-green-50/50 border-green-100 flex flex-col items-center justify-center p-4 rounded-xl shadow-sm",children:[e.jsx("span",{className:"text-sm font-bold text-green-600 mb-1",children:"Total Spend Logged"}),e.jsxs("span",{className:"text-3xl font-extrabold text-green-900",children:["₹",J.totalSpend.toLocaleString()]})]}),e.jsxs(v,{className:"bg-purple-50/50 border-purple-100 flex flex-col items-center justify-center p-4 rounded-xl shadow-sm",children:[e.jsx("span",{className:"text-sm font-bold text-purple-600 mb-1",children:"Total Leads Recorded"}),e.jsx("span",{className:"text-3xl font-extrabold text-purple-900",children:J.totalLeads})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4 bg-white p-4 rounded-xl shadow-sm border border-gray-100 dark:border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-sm font-bold text-gray-600",children:"From:"}),e.jsx(o,{type:"date",className:"h-9 w-40",value:N,onChange:t=>Ge(t.target.value)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-sm font-bold text-gray-600",children:"To:"}),e.jsx(o,{type:"date",className:"h-9 w-40",value:w,onChange:t=>Re(t.target.value)})]}),e.jsxs("div",{className:"text-xs text-gray-400 ml-auto flex items-center gap-1",children:[e.jsx(Ae,{size:14})," Showing up to 20 campaigns"]})]}),F.length===0?e.jsxs("div",{className:"text-center p-20 bg-gray-50 rounded-2xl border-2 border-dashed border-gray-200",children:[e.jsx(Ae,{size:48,className:"mx-auto text-gray-300 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-600",children:"No History Available"}),e.jsx("p",{className:"text-gray-400",children:"History records will appear once service logs are created by the team."})]}):e.jsx("div",{className:"grid grid-cols-1 gap-4",children:F.map(t=>{const a=bt[t.type];return e.jsx(v,{className:"hover:shadow-md transition-shadow border-l-4 border-l-indigo-500 overflow-hidden",children:e.jsx(W,{className:"p-0",children:e.jsxs("div",{className:"flex items-center p-5",children:[e.jsx("div",{className:"p-3 bg-indigo-50 rounded-lg text-indigo-600 mr-5",children:e.jsx(a,{size:24})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-[10px] uppercase font-bold text-indigo-500 bg-indigo-50 px-2 py-0.5 rounded",children:t.service}),e.jsxs("span",{className:"text-xs text-gray-400 flex items-center",children:[e.jsx(dt,{size:12,className:"mr-1"}),se(new Date(t.date),"dd MMM yyyy")]}),t.status&&e.jsx("span",{className:`text-[10px] uppercase font-bold px-2 py-0.5 rounded-full border ${t.status==="ACTIVE"?"bg-green-100 text-green-700 border-green-300 shadow-sm":"bg-red-50 text-red-600 border-red-200"}`,children:t.status})]}),e.jsx("h3",{className:"font-bold text-gray-900 truncate",children:t.title}),e.jsx("p",{className:"text-sm text-gray-500 line-clamp-1",children:t.description})]}),t.badge&&e.jsx("div",{className:"ml-4 px-4 py-1 bg-gray-50 border rounded-full text-sm font-bold text-gray-700",children:t.badge}),T&&e.jsxs("div",{className:"ml-4 flex items-center gap-1",children:[e.jsx(j,{variant:"ghost",size:"icon",className:"h-8 w-8 text-indigo-500 hover:bg-indigo-50 shrink-0",onClick:()=>at(t),children:e.jsx(K,{size:16})}),(g==null?void 0:g.role)==="DEVELOPER_ADMIN"&&e.jsx(j,{variant:"ghost",size:"icon",className:"h-8 w-8 text-red-500 hover:bg-red-50 shrink-0",onClick:()=>tt(t),children:e.jsx(De,{size:16})})]})]})})},t.id)})})]})}),T&&e.jsx(O,{value:"campaignData",children:e.jsxs(v,{className:"border-none shadow-sm rounded-2xl overflow-hidden",children:[e.jsxs(Le,{className:"flex flex-row items-center justify-between border-b bg-gray-50/30 p-6",children:[e.jsxs("div",{children:[e.jsx($e,{className:"text-xl",children:"Campaign Data Entry"}),e.jsx(Me,{children:"Record and modify performance logs for various services."})]}),E&&e.jsx(j,{variant:"outline",size:"sm",onClick:G,children:"Cancel Edit"})]}),e.jsx(W,{className:"p-6",children:e.jsxs(Te,{value:Q,onValueChange:me,className:"w-full",children:[e.jsxs(Ie,{className:"grid grid-cols-3 mb-6 bg-gray-100/50 p-1 rounded-xl w-[400px]",children:[e.jsx(M,{value:"meta",className:"rounded-lg data-[state=active]:bg-white data-[state=active]:shadow-sm",children:"Meta Ads"}),e.jsx(M,{value:"google",className:"rounded-lg data-[state=active]:bg-white data-[state=active]:shadow-sm",children:"Google Ads"}),e.jsx(M,{value:"seo",className:"rounded-lg data-[state=active]:bg-white data-[state=active]:shadow-sm",children:"SEO"})]}),e.jsxs(O,{value:"meta",className:"space-y-4 max-w-2xl",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:"Date"}),e.jsx(o,{type:"date",value:s.date?new Date(s.date).toISOString().split("T")[0]:"",onChange:t=>m({...s,date:new Date(t.target.value).toISOString()})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:"Status"}),e.jsxs("select",{className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm",value:s.status,onChange:t=>m({...s,status:t.target.value}),children:[e.jsx("option",{value:"ACTIVE",children:"Active"}),e.jsx("option",{value:"CLOSED",children:"Closed"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:"Campaign Name *"}),e.jsx(o,{value:s.campaign_name||"",onChange:t=>m({...s,campaign_name:t.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:"Objective *"}),e.jsx(o,{placeholder:"e.g. Engagement",value:s.objective||"",onChange:t=>m({...s,objective:t.target.value})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:"Platform *"}),e.jsx(o,{placeholder:"e.g. Facebook",value:s.platform||"",onChange:t=>m({...s,platform:t.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:"Spend (₹)"}),e.jsx(o,{type:"number",value:s.spend||0,onChange:t=>m({...s,spend:t.target.value})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:"Engagement"}),e.jsx(o,{type:"number",value:((Ne=s.results_json)==null?void 0:Ne.engagement)||"",onChange:t=>m({...s,results_json:{...s.results_json||{},engagement:t.target.value}})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:"Reach"}),e.jsx(o,{type:"number",value:((we=s.results_json)==null?void 0:we.reach)||"",onChange:t=>m({...s,results_json:{...s.results_json||{},reach:t.target.value}})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:"Impressions"}),e.jsx(o,{type:"number",value:((Ce=s.results_json)==null?void 0:Ce.impressions)||"",onChange:t=>m({...s,results_json:{...s.results_json||{},impressions:t.target.value}})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:"Leads"}),e.jsx(o,{type:"number",value:((Se=s.results_json)==null?void 0:Se.leads)||"",onChange:t=>m({...s,results_json:{...s.results_json||{},leads:t.target.value}})})]})]})]}),e.jsxs(O,{value:"google",className:"space-y-4 max-w-2xl",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:"Date"}),e.jsx(o,{type:"date",value:s.date?new Date(s.date).toISOString().split("T")[0]:"",onChange:t=>m({...s,date:new Date(t.target.value).toISOString()})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:"Status"}),e.jsxs("select",{className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm",value:s.status,onChange:t=>m({...s,status:t.target.value}),children:[e.jsx("option",{value:"ACTIVE",children:"Active"}),e.jsx("option",{value:"CLOSED",children:"Closed"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:"Campaign Name *"}),e.jsx(o,{value:s.campaign_name||"",onChange:t=>m({...s,campaign_name:t.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:"Campaign Type *"}),e.jsx(o,{placeholder:"e.g. Search, Display",value:s.campaign_type||"",onChange:t=>m({...s,campaign_type:t.target.value})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:"Spend (₹)"}),e.jsx(o,{type:"number",value:s.spend||0,onChange:t=>m({...s,spend:t.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:"Conversions"}),e.jsx(o,{type:"number",value:s.conversions||0,onChange:t=>m({...s,conversions:t.target.value})})]})]})]}),e.jsxs(O,{value:"seo",className:"space-y-4 max-w-2xl",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:"Month (1-12) *"}),e.jsx(o,{type:"number",value:s.month||"",onChange:t=>m({...s,month:t.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:"Year *"}),e.jsx(o,{type:"number",value:s.year||"",onChange:t=>m({...s,year:t.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:"Status"}),e.jsxs("select",{className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm",value:s.status,onChange:t=>m({...s,status:t.target.value}),children:[e.jsx("option",{value:"ACTIVE",children:"Active"}),e.jsx("option",{value:"CLOSED",children:"Closed"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:"Organic Traffic"}),e.jsx(o,{type:"number",value:s.organic_traffic||0,onChange:t=>m({...s,organic_traffic:t.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:"Summary"}),e.jsx(o,{value:s.summary||"",onChange:t=>m({...s,summary:t.target.value})})]})]})]}),e.jsx("div",{className:"mt-8 flex justify-end",children:e.jsx(j,{onClick:st,className:"bg-indigo-600 hover:bg-indigo-700 text-white min-w-[120px]",disabled:ue.isPending||pe.isPending||be.isPending,children:E?"Update Data":"Save Data"})})]})})]})}),e.jsxs(O,{value:"leads",children:[e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-5 gap-4 mb-6",children:[e.jsxs(v,{className:"bg-blue-50/50 border-blue-100 flex flex-col items-center justify-center p-3 rounded-xl shadow-sm",children:[e.jsx("span",{className:"text-xs font-bold text-blue-600 mb-1",children:"Total Leads"}),e.jsx("span",{className:"text-2xl font-extrabold text-blue-900",children:P.total})]}),e.jsxs(v,{className:"bg-amber-50/50 border-amber-100 flex flex-col items-center justify-center p-3 rounded-xl shadow-sm",children:[e.jsx("span",{className:"text-xs font-bold text-amber-600 mb-1",children:"High Quality"}),e.jsx("span",{className:"text-2xl font-extrabold text-amber-900",children:P.highQuality})]}),e.jsxs(v,{className:"bg-green-50/50 border-green-100 flex flex-col items-center justify-center p-3 rounded-xl shadow-sm",children:[e.jsx("span",{className:"text-xs font-bold text-green-600 mb-1",children:"Converted Leads"}),e.jsx("span",{className:"text-2xl font-extrabold text-green-900",children:P.converted})]}),e.jsxs(v,{className:"bg-green-500 border-green-600 flex flex-col items-center justify-center p-3 rounded-xl shadow-sm",children:[e.jsx("span",{className:"text-xs font-bold text-white mb-1",children:"Positive Leads"}),e.jsx("span",{className:"text-2xl font-extrabold text-white",children:P.positive})]}),e.jsxs(v,{className:"bg-red-500 border-red-600 flex flex-col items-center justify-center p-3 rounded-xl shadow-sm",children:[e.jsx("span",{className:"text-xs font-bold text-white mb-1",children:"Negative Leads"}),e.jsx("span",{className:"text-2xl font-extrabold text-white",children:P.negative})]})]}),e.jsxs(v,{className:"border-none shadow-sm rounded-2xl overflow-hidden",children:[e.jsxs(Le,{className:"flex flex-col md:flex-row items-start md:items-center justify-between border-b bg-gray-50/30 p-6 gap-4",children:[e.jsxs("div",{children:[e.jsx($e,{className:"text-xl",children:"Leads Tracker"}),e.jsx(Me,{children:"Track daily leads and manage follow-up sequences."})]}),e.jsxs("div",{className:"flex items-center flex-wrap gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 bg-white px-2 py-1.5 rounded-lg border shadow-sm",children:[e.jsx("span",{className:"text-xs font-bold text-gray-500 ml-1",children:"From:"}),e.jsx(o,{type:"date",value:z,onChange:t=>ce(t.target.value),className:"h-7 w-[130px] border-none shadow-none bg-transparent focus-visible:ring-0 px-1"}),e.jsx("span",{className:"text-xs font-bold text-gray-500 border-l pl-2",children:"To:"}),e.jsx(o,{type:"date",value:q,onChange:t=>xe(t.target.value),className:"h-7 w-[130px] border-none shadow-none bg-transparent focus-visible:ring-0 px-1"}),(z||q)&&e.jsx("button",{onClick:()=>{ce(""),xe("")},className:"text-gray-400 hover:text-red-500 mr-1 transiton-all",children:e.jsx(_,{size:14})})]}),e.jsxs(j,{onClick:()=>X(!0),className:"bg-indigo-600 hover:bg-indigo-700 text-white gap-2 h-10 px-6 rounded-lg font-semibold shadow-sm",children:[e.jsx(R,{size:18})," Add New Lead"]})]})]}),e.jsx(W,{className:"p-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(xt,{children:[e.jsx(mt,{className:"bg-gray-50/50",children:e.jsxs(A,{children:[e.jsx(C,{className:"w-[120px] font-bold text-gray-700",children:"Date"}),e.jsx(C,{className:"font-bold text-gray-700",children:"Lead Info"}),e.jsx(C,{className:"font-bold text-gray-700",children:"Campaign"}),e.jsx(C,{className:"font-bold text-gray-700",children:"Location"}),e.jsx(C,{className:"w-[100px] font-bold text-gray-700",children:"Quality"}),e.jsx(C,{className:"w-[120px] font-bold text-gray-700",children:"Status"}),e.jsx(C,{className:"font-bold text-gray-700 min-w-[350px]",children:"Follow Ups"}),e.jsx(C,{className:"w-[120px] font-bold text-gray-700 text-center",children:"Feedback"}),e.jsx(C,{className:"w-[100px] text-right font-bold",children:"Actions"})]})}),e.jsxs(gt,{children:[de&&e.jsxs(A,{className:"bg-indigo-50/30 border-b-2 border-indigo-200",children:[e.jsx(c,{className:"p-2",children:e.jsx(o,{type:"date",value:(Ee=n.date)==null?void 0:Ee.split("T")[0],onChange:t=>x({...n,date:new Date(t.target.value).toISOString()}),className:"h-9"})}),e.jsxs(c,{className:"p-2 space-y-1",children:[e.jsx(o,{placeholder:"Name",value:n.name,onChange:t=>x({...n,name:t.target.value}),className:"h-9"}),e.jsx(o,{placeholder:"Phone",value:n.phone,onChange:t=>x({...n,phone:t.target.value}),className:"h-9"})]}),e.jsx(c,{className:"p-2",children:e.jsx(o,{placeholder:"Campaign",value:n.campaign_name,onChange:t=>x({...n,campaign_name:t.target.value}),className:"h-9"})}),e.jsx(c,{className:"p-2",children:e.jsx(o,{placeholder:"Location",value:n.address,onChange:t=>x({...n,address:t.target.value}),className:"h-9"})}),e.jsx(c,{className:"p-2",children:e.jsxs("select",{className:`flex h-9 w-full rounded-md border text-sm font-bold shadow-sm focus:ring-2 focus:ring-opacity-50 transition-colors ${ne[n.quality||"MEDIUM"]||"bg-white border-gray-300"} px-3 py-1`,value:n.quality,onChange:t=>x({...n,quality:t.target.value}),children:[e.jsx("option",{value:"HIGH",className:"bg-white text-gray-900 font-medium",children:"High"}),e.jsx("option",{value:"MEDIUM",className:"bg-white text-gray-900 font-medium",children:"Medium"}),e.jsx("option",{value:"LOW",className:"bg-white text-gray-900 font-medium",children:"Low"})]})}),e.jsx(c,{className:"p-2",children:e.jsxs("select",{className:`flex h-9 w-full rounded-md border text-sm font-bold shadow-sm focus:ring-2 focus:ring-opacity-50 transition-colors ${le[n.status||"NEW"]||"bg-white border-gray-300"} px-3 py-1`,value:n.status,onChange:t=>x({...n,status:t.target.value}),children:[e.jsx("option",{value:"NEW",className:"bg-white text-gray-900 font-medium",children:"New"}),e.jsx("option",{value:"CONTACTED",className:"bg-white text-gray-900 font-medium",children:"Contacted"}),e.jsx("option",{value:"QUALIFIED",className:"bg-white text-gray-900 font-medium",children:"Qualified"}),e.jsx("option",{value:"CONVERTED",className:"bg-white text-gray-900 font-medium",children:"Converted"}),e.jsx("option",{value:"LOST",className:"bg-white text-gray-900 font-medium",children:"Lost"})]})}),e.jsxs(c,{className:"p-2 space-y-2",children:[(ke=n.follow_ups)==null?void 0:ke.map((t,a)=>e.jsxs("div",{className:"flex gap-1 items-center bg-white p-2 rounded-lg border shadow-sm group",children:[e.jsx("span",{className:"text-[10px] font-bold bg-gray-100 px-1 rounded",children:t.follow_up_number}),e.jsxs("select",{value:t.channel||"Phone Call",onChange:r=>I(a,"channel",r.target.value),className:`h-7 text-xs flex-1 rounded font-bold border-none shadow-sm transition-colors ${t.channel==="Whatsapp"?"bg-green-100 text-green-700":t.channel==="Email"?"bg-purple-100 text-purple-700":t.channel==="In-Person"?"bg-amber-100 text-amber-700":"bg-blue-100 text-blue-700"}`,children:[e.jsx("option",{value:"Phone Call",className:"bg-white text-gray-900",children:"Phone Call"}),e.jsx("option",{value:"Whatsapp",className:"bg-white text-gray-900",children:"Whatsapp"}),e.jsx("option",{value:"Email",className:"bg-white text-gray-900",children:"Email"}),e.jsx("option",{value:"In-Person",className:"bg-white text-gray-900",children:"In-Person"})]}),e.jsx(o,{placeholder:"Status",value:t.status,onChange:r=>I(a,"status",r.target.value),className:"h-7 text-xs flex-1"}),e.jsx(o,{placeholder:"Notes",value:t.notes,onChange:r=>I(a,"notes",r.target.value),className:"h-7 text-xs flex-2"}),e.jsx(j,{variant:"ghost",size:"icon",className:"h-6 w-6 text-red-400 opacity-0 group-hover:opacity-100",onClick:()=>fe(a),children:e.jsx(_,{size:12})})]},a)),e.jsxs(j,{variant:"outline",size:"sm",onClick:je,className:"w-full h-8 border-dashed text-indigo-600 hover:text-indigo-700 hover:bg-indigo-50",children:[e.jsx(R,{size:14,className:"mr-1"})," Add Follow Up"]})]}),e.jsx(c,{className:"p-2 text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("button",{onClick:()=>x({...n,is_positive:!0}),className:`p-1.5 rounded-full border ${n.is_positive===!0?"bg-green-500 text-white border-green-600 shadow-md":"bg-gray-50 text-gray-400 border-gray-200 hover:bg-green-50 hover:text-green-500"}`,children:e.jsx(re,{size:16})}),e.jsx("button",{onClick:()=>x({...n,is_positive:!1}),className:`p-1.5 rounded-full border ${n.is_positive===!1?"bg-red-500 text-white border-red-600 shadow-md":"bg-gray-50 text-gray-400 border-gray-200 hover:bg-red-50 hover:text-red-500"}`,children:e.jsx(_,{size:16})})]})}),e.jsx(c,{className:"p-2 text-right",children:e.jsxs("div",{className:"flex justify-end gap-1",children:[e.jsx(j,{size:"icon",className:"h-10 w-10 bg-green-600 hover:bg-green-700 text-white",onClick:ve,children:e.jsx(ze,{size:18})}),e.jsx(j,{size:"icon",variant:"ghost",className:"h-10 w-10 text-gray-400",onClick:()=>X(!1),children:e.jsx(_,{size:18})})]})})]}),We?e.jsx(A,{children:e.jsx(c,{colSpan:8,className:"p-10 text-center text-muted-foreground",children:"Loading leads..."})}):(f==null?void 0:f.length)===0&&!de?e.jsx(A,{children:e.jsx(c,{colSpan:8,className:"p-20 text-center text-muted-foreground italic",children:"No leads found for this client."})}):ee==null?void 0:ee.map(t=>{var a,r,d;return Ve===t.id?e.jsxs(A,{className:"bg-amber-50/30 border-b-2 border-amber-200",children:[e.jsx(c,{className:"p-2",children:e.jsx(o,{type:"date",value:(a=n.date)==null?void 0:a.split("T")[0],onChange:l=>x({...n,date:new Date(l.target.value).toISOString()}),className:"h-9"})}),e.jsxs(c,{className:"p-2 space-y-1",children:[e.jsx(o,{placeholder:"Name",value:n.name,onChange:l=>x({...n,name:l.target.value}),className:"h-9 font-bold"}),e.jsx(o,{placeholder:"Phone",value:n.phone,onChange:l=>x({...n,phone:l.target.value}),className:"h-9 text-indigo-600"})]}),e.jsx(c,{className:"p-2",children:e.jsx(o,{placeholder:"Campaign",value:n.campaign_name,onChange:l=>x({...n,campaign_name:l.target.value}),className:"h-9"})}),e.jsx(c,{className:"p-2",children:e.jsx(o,{placeholder:"Location",value:n.address,onChange:l=>x({...n,address:l.target.value}),className:"h-9"})}),e.jsx(c,{className:"p-2",children:e.jsxs("select",{className:`flex h-9 w-full rounded-md border text-sm font-bold shadow-sm focus:ring-2 focus:ring-opacity-50 transition-colors ${ne[n.quality||"MEDIUM"]||"bg-white border-gray-300"} px-3 py-1`,value:n.quality,onChange:l=>x({...n,quality:l.target.value}),children:[e.jsx("option",{value:"HIGH",className:"bg-white text-gray-900 font-medium",children:"High"}),e.jsx("option",{value:"MEDIUM",className:"bg-white text-gray-900 font-medium",children:"Medium"}),e.jsx("option",{value:"LOW",className:"bg-white text-gray-900 font-medium",children:"Low"})]})}),e.jsx(c,{className:"p-2",children:e.jsxs("select",{className:`flex h-9 w-full rounded-md border text-sm font-bold shadow-sm focus:ring-2 focus:ring-opacity-50 transition-colors ${le[n.status||"NEW"]||"bg-white border-gray-300"} px-3 py-1`,value:n.status,onChange:l=>x({...n,status:l.target.value}),children:[e.jsx("option",{value:"NEW",className:"bg-white text-gray-900 font-medium",children:"New"}),e.jsx("option",{value:"CONTACTED",className:"bg-white text-gray-900 font-medium",children:"Contacted"}),e.jsx("option",{value:"QUALIFIED",className:"bg-white text-gray-900 font-medium",children:"Qualified"}),e.jsx("option",{value:"CONVERTED",className:"bg-white text-gray-900 font-medium",children:"Converted"}),e.jsx("option",{value:"LOST",className:"bg-white text-gray-900 font-medium",children:"Lost"})]})}),e.jsxs(c,{className:"p-2 space-y-2",children:[(r=n.follow_ups)==null?void 0:r.map((l,p)=>e.jsxs("div",{className:"flex gap-1 items-center bg-white p-2 rounded-lg border shadow-sm group",children:[e.jsx("span",{className:"text-[10px] font-bold bg-gray-100 px-1 rounded",children:l.follow_up_number}),e.jsxs("select",{value:l.channel||"Phone Call",onChange:L=>I(p,"channel",L.target.value),className:`h-7 text-xs flex-1 rounded font-bold border-none shadow-sm transition-colors ${l.channel==="Whatsapp"?"bg-green-100 text-green-700":l.channel==="Email"?"bg-purple-100 text-purple-700":l.channel==="In-Person"?"bg-amber-100 text-amber-700":"bg-blue-100 text-blue-700"}`,children:[e.jsx("option",{value:"Phone Call",className:"bg-white text-gray-900",children:"Phone Call"}),e.jsx("option",{value:"Whatsapp",className:"bg-white text-gray-900",children:"Whatsapp"}),e.jsx("option",{value:"Email",className:"bg-white text-gray-900",children:"Email"}),e.jsx("option",{value:"In-Person",className:"bg-white text-gray-900",children:"In-Person"})]}),e.jsx(o,{placeholder:"Status",value:l.status,onChange:L=>I(p,"status",L.target.value),className:"h-7 text-xs flex-1"}),e.jsx(o,{placeholder:"Notes",value:l.notes,onChange:L=>I(p,"notes",L.target.value),className:"h-7 text-xs flex-2"}),e.jsx(j,{variant:"ghost",size:"icon",className:"h-6 w-6 text-red-400",onClick:()=>fe(p),children:e.jsx(_,{size:12})})]},p)),e.jsxs(j,{variant:"outline",size:"sm",onClick:je,className:"w-full h-8 border-dashed text-indigo-600",children:[e.jsx(R,{size:14,className:"mr-1"})," Add Follow Up"]})]}),e.jsx(c,{className:"p-2 text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("button",{onClick:()=>x({...n,is_positive:!0}),className:`p-1.5 rounded-full border ${n.is_positive===!0?"bg-green-500 text-white border-green-600 shadow-md":"bg-gray-50 text-gray-400 border-gray-200 hover:bg-green-50 hover:text-green-500"}`,children:e.jsx(re,{size:16})}),e.jsx("button",{onClick:()=>x({...n,is_positive:!1}),className:`p-1.5 rounded-full border ${n.is_positive===!1?"bg-red-500 text-white border-red-600 shadow-md":"bg-gray-50 text-gray-400 border-gray-200 hover:bg-red-50 hover:text-red-500"}`,children:e.jsx(_,{size:16})})]})}),e.jsx(c,{className:"p-2 text-right",children:e.jsxs("div",{className:"flex justify-end gap-1",children:[e.jsx(j,{size:"icon",className:"h-10 w-10 bg-indigo-600 text-white",onClick:ve,children:e.jsx(ze,{size:18})}),e.jsx(j,{size:"icon",variant:"ghost",className:"h-10 w-10 text-gray-400",onClick:()=>Z(null),children:e.jsx(_,{size:18})})]})})]},t.id):e.jsxs(A,{className:"hover:bg-gray-50/50 transition-colors",children:[e.jsx(c,{className:"font-medium text-gray-600",children:se(new Date(t.date),"dd MMM yyyy")}),e.jsx(c,{children:e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("span",{className:"font-bold text-gray-900 flex items-center gap-1.5 hover:text-indigo-600 transition-colors cursor-default",children:[e.jsx(ct,{size:14,className:"text-gray-400"})," ",t.name]}),e.jsxs("span",{className:"text-xs text-indigo-600 font-medium flex items-center gap-1.5",children:[e.jsx(ut,{size:12})," ",t.phone]})]})}),e.jsx(c,{className:"text-gray-600 font-medium italic",children:t.campaign_name||"-"}),e.jsx(c,{className:"text-gray-600 max-w-[150px] truncate",children:e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(pt,{size:14,className:"text-gray-400 shrink-0"}),e.jsx("span",{className:"truncate",children:t.address||"N/A"})]})}),e.jsx(c,{children:e.jsx(Oe,{variant:"outline",className:`${ne[t.quality]||""} text-[10px] font-bold`,children:t.quality})}),e.jsx(c,{children:e.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-[10px] font-bold ${le[t.status]||""}`,children:t.status})}),e.jsx(c,{children:e.jsx("div",{className:"space-y-1.5",children:((d=t.follow_ups)==null?void 0:d.length)===0?e.jsx("span",{className:"text-xs text-gray-400 italic",children:"No follow ups yet"}):t.follow_ups.map(l=>{var p;return e.jsxs("div",{className:"flex flex-col bg-gray-50 p-2 rounded-lg border border-gray-100 relative group",children:[e.jsxs("div",{className:"flex items-center justify-between mb-0.5",children:[e.jsxs("span",{className:"text-[10px] font-extrabold text-indigo-500 uppercase",children:[l.follow_up_number===1?"1st":l.follow_up_number===2?"2nd":l.follow_up_number===3?"3rd":`${l.follow_up_number}th`," Follow Up • ",e.jsx("span",{className:"text-gray-500",children:l.channel||"Phone Call"})]}),e.jsx("span",{className:"text-[9px] text-gray-400",children:se(new Date(l.date),"dd/MM/yy")})]}),((p=l.status)==null?void 0:p.toUpperCase())!=="PENDING"&&e.jsx("div",{className:"text-xs font-bold text-gray-800",children:l.status}),l.notes&&e.jsx("div",{className:"text-[10px] text-gray-500 italic mt-0.5 border-t pt-0.5 border-gray-200",children:l.notes})]},l.id)})})}),e.jsx(c,{className:"text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("button",{onClick:()=>ye(t,!0),className:`p-1.5 rounded-full border transition-all hover:scale-105 ${t.is_positive===!0?"bg-green-500 text-white border-green-600 shadow-md":"bg-gray-50 text-gray-400 border-gray-200 hover:bg-green-50 hover:text-green-500 hover:border-green-200"}`,title:"Mark as Positive",children:e.jsx(re,{size:16})}),e.jsx("button",{onClick:()=>ye(t,!1),className:`p-1.5 rounded-full border transition-all hover:scale-105 ${t.is_positive===!1?"bg-red-500 text-white border-red-600 shadow-md":"bg-gray-50 text-gray-400 border-gray-200 hover:bg-red-50 hover:text-red-500 hover:border-red-200"}`,title:"Mark as Negative",children:e.jsx(_,{size:16})})]})}),e.jsx(c,{className:"text-right p-2",children:e.jsxs("div",{className:"flex justify-end gap-1",children:[e.jsx(j,{size:"icon",variant:"ghost",className:"h-8 w-8 text-indigo-600 hover:bg-indigo-50",onClick:()=>Je(t),children:e.jsx(K,{size:16})}),(g==null?void 0:g.role)==="DEVELOPER_ADMIN"&&e.jsx(j,{size:"icon",variant:"ghost",className:"h-8 w-8 text-red-500 hover:bg-red-50",onClick:()=>et(t.id),children:e.jsx(De,{size:16})})]})})]},t.id)})]})]})})})]})]})]})]}):e.jsxs("div",{className:"p-6 max-w-[1600px] mx-auto animate-in fade-in slide-in-from-bottom-4 duration-700",children:[e.jsxs("div",{className:"text-center mb-10",children:[e.jsx("div",{className:"w-20 h-20 bg-indigo-100 flex items-center justify-center rounded-2xl mx-auto mb-4 text-indigo-600 shadow-sm",children:e.jsx(ae,{size:40})}),e.jsx("h2",{className:"text-3xl font-black text-gray-900 mb-2",children:"Select a Client"}),e.jsx("p",{className:"text-gray-500 font-medium",children:"Choose a client below to manage their digital marketing services and campaign history."})]}),e.jsxs("div",{className:"relative max-w-md mx-auto mb-12",children:[e.jsx(qe,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400",size:20}),e.jsx(o,{placeholder:"Search clients by name or code...",className:"pl-12 h-12 bg-white border-2 border-gray-100 focus:border-indigo-500 rounded-2xl shadow-sm font-medium",value:U,onChange:t=>He(t.target.value)})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:te==null?void 0:te.map(t=>e.jsx(v,{onClick:()=>ie(t.id),className:"group hover:border-indigo-500 hover:shadow-xl transition-all cursor-pointer overflow-hidden border-2 border-gray-50 rounded-2xl",children:e.jsxs(W,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[t.logo_url?e.jsx("img",{src:_e(t.logo_url),className:"w-14 h-14 rounded-xl object-cover border-2 border-gray-50 group-hover:scale-110 transition-transform"}):e.jsx("div",{className:"w-14 h-14 rounded-xl bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center text-white text-xl font-bold group-hover:scale-110 transition-transform",children:t.name.charAt(0)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-bold text-gray-900 group-hover:text-indigo-600 transition-colors truncate",children:t.name}),e.jsx(Oe,{variant:"outline",className:"mt-1 bg-gray-50 text-gray-500 border-none font-bold text-[10px] uppercase tracking-wider",children:t.client_code})]})]}),e.jsxs("div",{className:"mt-6 flex items-center justify-between text-xs font-bold text-gray-400 group-hover:text-indigo-400 transition-colors",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Fe,{size:12})," Digital Services"]}),e.jsx("div",{className:"w-6 h-6 rounded-full bg-gray-50 flex items-center justify-center group-hover:bg-indigo-600 group-hover:text-white transition-all",children:e.jsx(R,{size:14})})]})]})},t.id))})]})};export{Mt as default};
