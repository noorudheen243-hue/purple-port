import{v as D,q as ne,r as b,C as te,x as _,j as e}from"./index-DTs_gUpQ.js";import{al as oe,am as ie,u as T,a2 as de,a5 as ce,a7 as q,j as me,S as ue,X as xe,h as X,ah as W,a9 as f,a8 as n,ak as $,an as a}from"./index-BPHe9uWR.js";import{B as P,I as pe}from"./ImageUpload-C96R0Et1.js";import{F as he}from"./FormErrorAlert-BQq0KVhK.js";import{G as K,Z as be}from"./compat-CauA2MAI.js";import{S}from"./save-dY_yXBe1.js";/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=D("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=D("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);function Y(u){return oe(ie,u)}const t="w-full p-2.5 border border-input bg-background rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-primary/20 transition-all placeholder:text-muted-foreground text-foreground disabled:opacity-50 disabled:cursor-not-allowed",Q=["CO-FOUNDER","Creative Director","Art Director","Senior Graphic Designer","Graphic Designer","Copywriter","Content Strategist","Social Media Manager","Social Media Executive","SEO Specialist","Web Developer","Account Director","Account Manager","Client Servicing Executive","Media Planner","Media Buyer","Operations Manager","HR Manager","Office Administrator","Intern"],fe=q({full_name:n().min(2,"Full Name is required"),email:n().email("Valid email is required"),password:n().nullish().or(a("")),role:n().nullish().or(a("")),avatar_url:n().nullish().or(a("")),staff_number:n().min(1,"Staff ID is required (e.g., QIX001)"),designation:n().nullish().or(a("")),custom_designation:n().nullish().or(a("")),department:f(["CREATIVE","MARKETING","WEB_SEO","WEB","MANAGEMENT","ADMIN"]),date_of_joining:n().nullish().or(a("")),reporting_manager_id:n().nullish().or(a("")),personal_email:n().email().nullish().or(a("")),personal_contact:n().nullish().or(a("")),whatsapp_number:n().nullish().or(a("")),official_contact:n().nullish().or(a("")),date_of_birth:n().nullish().or(a("")),marital_status:f(["SINGLE","MARRIED","DIVORCED","WIDOWED"]).nullish().or(a("")),address:n().nullish().or(a("")),pincode:n().nullish().or(a("")),emergency_contact_name:n().nullish().or(a("")),emergency_contact_number:n().nullish().or(a("")),previous_company:n().nullish().or(a("")),total_experience_years:Y().nullish(),base_salary:Y().nullish(),salary_type:f(["MONTHLY","DAILY","CONTRACT"]).nullish().or(a("")),incentive_eligible:$().optional(),payroll_status:f(["ACTIVE","HOLD"]).nullish().or(a("")),ledger_options:q({create:$(),head_id:n().nullish().or(a(""))}).optional(),bank_name:n().nullish().or(a("")),account_holder_name:n().nullish().or(a("")),account_number:n().nullish().or(a("")),ifsc_code:n().nullish().or(a("")),account_type:f(["SAVINGS","CURRENT"]).nullish().or(a("")),pan_number:n().nullish().or(a("")),upi_id:n().nullish().or(a("")),upi_linked_mobile:n().nullish().or(a("")),payment_method:f(["BANK_TRANSFER","CASH","CHEQUE","UPI"]).nullish().or(a(""))}).superRefine((u,j)=>{var r;(r=u.ledger_options)!=null&&r.create&&!u.ledger_options.head_id&&j.addIssue({code:be.custom,message:"Account Head is required",path:["ledger_options","head_id"]})}),we=({isOpen:u,onClose:j,initialData:r})=>{var B,H,z,G,L,U;const J=ne(),[m,x]=b.useState("profile"),[Z,w]=b.useState(!1),[F,ee]=b.useState(null),[E,R]=b.useState(""),i=!!r,{data:A}=T({queryKey:["staff-list-simple"],queryFn:async()=>(await _.get("/team/staff")).data}),{data:g}=T({queryKey:["accountHeads"],queryFn:async()=>(await _.get("/accounting/heads")).data,enabled:u}),{data:N}=T({queryKey:["next-staff-id"],queryFn:async()=>(await _.get("/team/staff/next-id")).data,enabled:u&&!i}),se=de({resolver:ce(fe),defaultValues:{department:"MARKETING",role:"DM_EXECUTIVE",date_of_joining:new Date().toISOString().split("T")[0],marital_status:"SINGLE",staff_number:"",designation:"",ledger_options:{create:!1,head_id:""},payment_method:"BANK_TRANSFER"}}),{register:l,handleSubmit:y,reset:k,watch:C,setValue:I,formState:{errors:c,isSubmitting:O}}=se,re=C("designation");b.useEffect(()=>{var s;if(r){let o=r.designation||"",d="";o&&!Q.includes(o)&&(d=o,o="Other"),k({...r.user,...r,designation:o,custom_designation:d,date_of_joining:r.date_of_joining?new Date(r.date_of_joining).toISOString().split("T")[0]:"",date_of_birth:r.date_of_birth?new Date(r.date_of_birth).toISOString().split("T")[0]:"",reporting_manager_id:r.reporting_manager_id||"",role:((s=r.user)==null?void 0:s.role)||"DM_EXECUTIVE",password:void 0,ledger_options:r.ledger_options||{create:!1,head_id:""}})}},[r,k]),b.useEffect(()=>{!i&&(N!=null&&N.next_id)&&I("staff_number",N.next_id)},[N,i,I]);const M=C("ledger_options.head_id");b.useEffect(()=>{if(M&&g){const s=g.find(o=>o.id===M);s&&R(s.type)}},[M,g]);const v=s=>{ee(s),w(!0)},le=()=>{F&&(ae.mutate(F),w(!1))},p=te.useRef(!1),ae=me({mutationFn:async s=>{const o=s.designation==="Other"?s.custom_designation:s.designation,d={...s,designation:o||void 0,role:i?void 0:s.role||"DM_EXECUTIVE",password:i&&!s.password?void 0:s.password,reporting_manager_id:s.reporting_manager_id||void 0};return delete d.custom_designation,i?await _.patch(`/team/staff/${r.id}`,d):await _.post("/team/staff/onboard",d)},onSuccess:async()=>{await J.refetchQueries({queryKey:["staff"]}),p.current&&(j(),k(),x("profile")),ue.fire({title:p.current?"Success!":"Saved!",text:p.current?"Staff profile updated successfully.":"Progress saved. You can continue editing.",icon:"success",confirmButtonColor:"#8b5cf6",timer:1500,timerProgressBar:!0})},onError:s=>{var d,h;console.error(s);let o=((h=(d=s.response)==null?void 0:d.data)==null?void 0:h.message)||s.message||"Failed to save.";Array.isArray(o)?o=`Validation Errors:
`+o.map(V=>`- ${V.path.join(".")}: ${V.message}`).join(`
`):typeof o=="object"&&(o=JSON.stringify(o,null,2)),alert(o)}});return u?e.jsxs("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4 backdrop-blur-sm",children:[Z&&e.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-black/20 backdrop-blur-[1px]",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-2xl border max-w-sm w-full animate-in fade-in zoom-in duration-200",children:[e.jsx("h3",{className:"text-lg font-bold text-foreground mb-2",children:"Confirm Save"}),e.jsxs("p",{className:"text-gray-600 mb-6 text-sm",children:["Are you sure you want to ",i?"update":"onboard"," this staff member? This will update the system immediately."]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>w(!1),className:"px-4 py-2 text-muted-foreground hover:bg-muted/30 rounded-md font-medium text-sm",children:"Cancel"}),e.jsx("button",{onClick:le,className:"px-4 py-2 bg-primary text-white hover:bg-primary/90 rounded-md font-medium text-sm",children:"Yes, Save Changes"})]})]})}),e.jsxs("div",{className:"bg-background text-foreground border border-border rounded-xl shadow-2xl w-full max-w-4xl flex flex-col",style:{maxHeight:"calc(100vh - 2rem)"},children:[e.jsxs("div",{className:"flex justify-between items-center p-5 border-b bg-muted/30 border-border",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-foreground",children:i?"Edit Staff Profile":"New Staff Onboarding"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Complete the profile to grant system access."})]}),e.jsx("button",{onClick:j,className:"p-2 hover:bg-muted rounded-full transition-colors",children:e.jsx(xe,{size:20,className:"text-gray-500"})})]}),e.jsx("div",{className:"flex border-b bg-white px-6 pt-2",children:[{id:"profile",label:"1. Profile & Access",icon:X},{id:"details",label:"2. Personal & HR",icon:P},{id:"payroll",label:"3. Payroll & Bank",icon:W},{id:"finance",label:"4. Finance Account",icon:K}].map(s=>e.jsxs("button",{onClick:()=>x(s.id),className:`flex items-center gap-2 px-6 py-3 border-b-2 text-sm font-medium transition-all ${m===s.id?"border-primary text-primary":"border-transparent text-gray-500 hover:text-foreground"}`,children:[e.jsx(s.icon,{size:16}),s.label]},s.id))}),Object.keys(c).length>0&&e.jsx("div",{className:"px-6 pt-4",children:e.jsx(he,{errors:c})}),e.jsxs("form",{onSubmit:y(v),className:"flex-1 overflow-y-auto p-6 bg-gray-50/30",children:[m==="profile"&&e.jsxs("div",{className:"flex gap-5 animate-in fade-in slide-in-from-bottom-2",children:[e.jsxs("div",{className:"flex flex-col items-center p-3 bg-white rounded-lg border border-gray-100 shadow-sm w-36 shrink-0 h-fit",children:[e.jsx("label",{className:"block text-xs font-medium text-foreground mb-2 self-start",children:"Photo"}),e.jsx(pe,{value:C("avatar_url")||void 0,onChange:s=>I("avatar_url",s),label:"Upload"}),e.jsx("p",{className:"text-[10px] text-gray-400 mt-2 text-center",children:"JPG/PNG Â· Max 2MB"})]}),e.jsxs("div",{className:"flex-1 space-y-3",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-foreground mb-1",children:["Full Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{...l("full_name"),className:"w-full p-2.5 border rounded-lg focus:ring-2 focus:ring-primary/20 outline-none transition-all",placeholder:"e.g. Sarah Jones"}),c.full_name&&e.jsx("p",{className:"text-red-500 text-xs mt-0.5",children:c.full_name.message})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-foreground mb-1",children:["Email ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{...l("email"),className:"w-full p-2.5 border rounded-lg focus:ring-2 focus:ring-primary/20 outline-none transition-all",placeholder:"sarah@qixads.com"}),c.email&&e.jsx("p",{className:"text-red-500 text-xs mt-0.5",children:c.email.message})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-foreground mb-1",children:["Mobile ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{...l("personal_contact"),className:"w-full p-2.5 border rounded-lg focus:ring-2 focus:ring-primary/20 outline-none transition-all",placeholder:"+91 98765 43210"}),c.personal_contact&&e.jsx("p",{className:"text-red-500 text-xs mt-0.5",children:c.personal_contact.message})]})]}),!i&&e.jsx("div",{className:"grid grid-cols-2 gap-3",children:e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-foreground mb-1",children:["Password ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"password",...l("password"),className:"w-full p-2.5 border rounded-lg focus:ring-2 focus:ring-primary/20 outline-none transition-all",placeholder:"******"}),c.password&&e.jsx("p",{className:"text-red-500 text-xs mt-0.5",children:c.password.message})]})}),e.jsxs("div",{className:"border-t pt-3",children:[e.jsxs("h4",{className:"font-semibold text-foreground mb-2 flex items-center gap-2 text-sm",children:[e.jsx(P,{size:14,className:"text-gray-400"})," Work Identifiers"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-foreground mb-1",children:["Staff ID ",e.jsx("span",{className:"text-red-500",children:"*"}),!i&&e.jsx("span",{className:"ml-2 text-[10px] bg-green-100 text-green-700 rounded px-1.5 py-0.5 font-medium",children:"Auto"})]}),e.jsx("input",{...l("staff_number"),readOnly:!i,className:`w-full p-2.5 border rounded-lg outline-none transition-all uppercase ${i?"focus:ring-2 focus:ring-primary/20":"bg-gray-50 text-gray-500 cursor-default border-gray-200"}`,placeholder:"QIX0001"}),c.staff_number&&e.jsx("p",{className:"text-red-500 text-xs mt-0.5",children:c.staff_number.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-1",children:"Designation"}),e.jsxs("select",{...l("designation"),className:"w-full p-2.5 border rounded-lg focus:ring-2 focus:ring-primary/20 outline-none transition-all bg-white",children:[e.jsx("option",{value:"",children:"Select..."}),Q.map(s=>e.jsx("option",{value:s,children:s},s)),e.jsx("option",{value:"Other",children:"Other (Type below)"})]}),re==="Other"&&e.jsx("input",{...l("custom_designation"),placeholder:"Enter Custom Designation",className:"w-full mt-1 p-2.5 border rounded-lg focus:ring-2 focus:ring-primary/20 outline-none transition-all animate-in fade-in"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-foreground mb-1",children:["Department ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{...l("department"),className:"w-full p-2.5 border rounded-lg focus:ring-2 focus:ring-primary/20 outline-none transition-all bg-white",children:[e.jsx("option",{value:"MARKETING",children:"Marketing"}),e.jsx("option",{value:"CREATIVE",children:"Creative"}),e.jsx("option",{value:"WEB_SEO",children:"Web & SEO"}),e.jsx("option",{value:"MANAGEMENT",children:"Management"}),e.jsx("option",{value:"ADMIN",children:"Admin / HR"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-1",children:"Date of Joining"}),e.jsx("input",{type:"date",...l("date_of_joining"),className:"w-full p-2.5 border rounded-lg focus:ring-2 focus:ring-primary/20 outline-none transition-all"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-1",children:"Reporting Manager"}),e.jsxs("select",{...l("reporting_manager_id"),className:"w-full p-2.5 border rounded-lg focus:ring-2 focus:ring-primary/20 outline-none transition-all bg-white",children:[e.jsx("option",{value:"",children:"None (Self-Managed)"}),A==null?void 0:A.map(s=>e.jsxs("option",{value:s.user.id,children:[s.user.full_name," (",s.designation,")"]},s.user.id))]})]})]})]})]})]}),m==="details"&&e.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-right-4",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold text-foreground mb-4 pb-2 border-b flex items-center gap-2",children:[e.jsx(X,{size:18,className:"text-blue-500"})," Personal Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Personal Mobile"}),e.jsx("input",{...l("personal_contact"),className:t,placeholder:"+91 98765 43210"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"WhatsApp"}),e.jsx("input",{...l("whatsapp_number"),className:t,placeholder:"+91 98765 43210"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Personal Email"}),e.jsx("input",{...l("personal_email"),className:t,placeholder:"personal@gmail.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Date of Birth"}),e.jsx("input",{type:"date",...l("date_of_birth"),className:t})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Marital Status"}),e.jsxs("select",{...l("marital_status"),className:t,children:[e.jsx("option",{value:"SINGLE",children:"Single"}),e.jsx("option",{value:"MARRIED",children:"Married"}),e.jsx("option",{value:"DIVORCED",children:"Divorced"}),e.jsx("option",{value:"WIDOWED",children:"Widowed"})]})]}),e.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[e.jsx("label",{className:"label",children:"Residential Address"}),e.jsx("textarea",{...l("address"),rows:2,className:t,placeholder:"Full address..."})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold text-foreground mb-4 pb-2 border-b flex items-center gap-2",children:[e.jsx(ge,{size:18,className:"text-red-500"})," Emergency Contact"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Contact Person"}),e.jsx("input",{...l("emergency_contact_name"),className:t,placeholder:"Name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Emergency Number"}),e.jsx("input",{...l("emergency_contact_number"),className:t,placeholder:"Phone"})]})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold text-foreground mb-4 pb-2 border-b flex items-center gap-2",children:[e.jsx(K,{size:18,className:"text-gray-500"})," Experience"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Previous Company"}),e.jsx("input",{...l("previous_company"),className:t})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Total Expr (Years)"}),e.jsx("input",{type:"number",step:"0.1",...l("total_experience_years"),className:t})]})]})]})]})]}),m==="payroll"&&e.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-right-4",children:[e.jsxs("div",{className:"bg-muted/30 p-6 rounded-xl border border-border",children:[e.jsxs("h4",{className:"font-semibold text-foreground mb-4 flex items-center gap-2",children:[e.jsx(W,{size:18})," Salary Configuration"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label text-gray-400",children:"Base Salary"}),e.jsx("input",{disabled:!0,className:`${t} bg-muted text-muted-foreground cursor-not-allowed`,value:"Manage in Payroll"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Salary Type"}),e.jsxs("select",{...l("salary_type"),className:`${t} border-blue-200`,children:[e.jsx("option",{value:"MONTHLY",children:"Monthly"}),e.jsx("option",{value:"DAILY",children:"Daily"}),e.jsx("option",{value:"CONTRACT",children:"Contract"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Payroll Status"}),e.jsxs("select",{...l("payroll_status"),className:`${t} border-blue-200`,children:[e.jsx("option",{value:"ACTIVE",children:"Active"}),e.jsx("option",{value:"HOLD",children:"Hold (No Payout)"})]})]}),e.jsx("div",{className:"md:col-span-3 space-y-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",...l("incentive_eligible"),className:"w-4 h-4 text-blue-600 rounded"}),e.jsx("span",{className:"text-sm text-foreground",children:"Eligible for Performance Incentives/Commissions"})]})})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-foreground mb-4 pb-2 border-b",children:"Bank Account Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Bank Name"}),e.jsx("input",{...l("bank_name"),className:t,placeholder:"e.g. HDFC Bank"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Account Holder"}),e.jsx("input",{...l("account_holder_name"),className:t,placeholder:"As on Passbook"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Account Number"}),e.jsx("input",{...l("account_number"),className:t,placeholder:"XXXXXXX"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"IFSC Code"}),e.jsx("input",{...l("ifsc_code"),className:"input-std uppercase",placeholder:"Upper Case"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Payment Mode"}),e.jsxs("select",{...l("payment_method"),className:t,children:[e.jsx("option",{value:"BANK_TRANSFER",children:"Bank Transfer"}),e.jsx("option",{value:"CASH",children:"Cash"}),e.jsx("option",{value:"CHEQUE",children:"Cheque"}),e.jsx("option",{value:"UPI",children:"UPI"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Account Type"}),e.jsxs("select",{...l("account_type"),className:t,children:[e.jsx("option",{value:"SAVINGS",children:"Savings"}),e.jsx("option",{value:"CURRENT",children:"Current"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"PAN Number"}),e.jsx("input",{...l("pan_number"),className:t,placeholder:"ABCDE1234F"})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-foreground mb-4 pb-2 border-b",children:"UPI / Digital Payment"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"UPI ID"}),e.jsx("input",{...l("upi_id"),className:t,placeholder:"user@bank"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Linked Mobile"}),e.jsx("input",{...l("upi_linked_mobile"),className:t})]})]})]})]}),m==="finance"&&e.jsx("div",{className:"space-y-8 animate-in fade-in slide-in-from-right-4",children:e.jsxs("div",{className:"bg-muted/30 p-6 rounded-xl border border-border",children:[e.jsxs("h4",{className:"font-semibold text-primary mb-4 flex items-center gap-2",children:[e.jsx(P,{size:18})," Finance Account / Ledger"]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-6",children:"Create or link a ledger account for this staff member to track payroll, expenses, and payments."}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("input",{type:"checkbox",id:"create_ledger",...l("ledger_options.create"),disabled:(B=r==null?void 0:r.ledger_options)==null?void 0:B.create,className:"w-4 h-4 text-primary border-primary/20 rounded focus:ring-purple-500 disabled:opacity-50"}),e.jsx("label",{htmlFor:"create_ledger",className:`text-sm font-medium ${(H=r==null?void 0:r.ledger_options)!=null&&H.create?"text-gray-500":"text-foreground"}`,children:(z=r==null?void 0:r.ledger_options)!=null&&z.create?"Finance Account / Ledger (Already Linked)":"Create Finance Account / Ledger"})]}),(C("ledger_options.create")||((G=r==null?void 0:r.ledger_options)==null?void 0:G.create))&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 p-4 bg-white rounded-lg border border-purple-100 animate-in fade-in slide-in-from-top-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Account Type"}),e.jsxs("select",{className:t,value:E,disabled:!!((L=r==null?void 0:r.ledger_options)!=null&&L.create),onChange:s=>R(s.target.value),children:[e.jsx("option",{value:"",children:"All Types"}),e.jsx("option",{value:"ASSET",children:"Asset"}),e.jsx("option",{value:"LIABILITY",children:"Liability"}),e.jsx("option",{value:"EXPENSE",children:"Expense"}),e.jsx("option",{value:"INCOME",children:"Income"})]}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Filter heads by type"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Account Head"}),e.jsxs("select",{...l("ledger_options.head_id"),disabled:!!((U=r==null?void 0:r.ledger_options)!=null&&U.create),className:t,children:[e.jsx("option",{value:"",children:"Select Head..."}),g==null?void 0:g.filter(s=>!E||s.type===E).map(s=>e.jsxs("option",{value:s.id,children:[s.name," (",s.code,")"]},s.id))]}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Select the parent ledger Head"})]})]})]})]})})]}),e.jsxs("div",{className:"p-5 border-t bg-muted/30 border-border flex justify-end gap-3",children:[e.jsx("button",{onClick:j,className:"px-6 py-2.5 text-sm font-medium text-foreground hover:bg-muted rounded-lg transition-colors",children:"Cancel"}),m==="profile"&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>{p.current=!1,y(v)()},className:"px-4 py-2 text-sm font-medium bg-green-600 text-white hover:bg-green-700 rounded-md shadow-sm transition-colors flex items-center gap-2",children:[e.jsx(S,{size:16})," Save"]}),e.jsx("button",{onClick:()=>x("details"),className:"btn-primary",children:"Next: Personal & HR"})]}),m==="details"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>x("profile"),className:"btn-secondary",children:"Back"}),e.jsxs("button",{onClick:()=>{p.current=!1,y(v)()},className:"px-4 py-2 text-sm font-medium bg-green-600 text-white hover:bg-green-700 rounded-md shadow-sm transition-colors flex items-center gap-2",children:[e.jsx(S,{size:16})," Save"]}),e.jsx("button",{onClick:()=>x("payroll"),className:"btn-primary",children:"Next: Payroll"})]}),m==="payroll"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>x("details"),className:"btn-secondary",children:"Back"}),e.jsxs("button",{onClick:()=>{p.current=!1,y(v)()},className:"px-4 py-2 text-sm font-medium bg-green-600 text-white hover:bg-green-700 rounded-md shadow-sm transition-colors flex items-center gap-2",children:[e.jsx(S,{size:16})," Save"]}),e.jsx("button",{onClick:()=>x("finance"),className:"btn-primary",children:"Next: Finance"})]}),m==="finance"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>x("payroll"),className:"btn-secondary",children:"Back"}),e.jsxs("button",{onClick:()=>{p.current=!0,y(v,s=>{console.error("Frontend Validation Errors:",s);let o=`Please check the form for errors:
`;Object.keys(s).forEach(d=>{const h=s[d];h!=null&&h.message?o+=`- ${d}: ${h.message}
`:d==="ledger_options"&&(o+=`- Finance Account: Check details
`)}),alert(o)})()},disabled:O,className:"btn-primary flex items-center gap-2",children:[e.jsx(S,{size:18}),O?"Saving...":i?"Save and Close":"Complete Onboarding"]})]})]})]}),e.jsxs("style",{children:[" ",`
                .label { display: block; font-size: 0.85rem; font-weight: 500; color: #4b5563; margin-bottom: 0.25rem; }
                .input-std { width: 100%; padding: 0.6rem 0.75rem; border: 1px solid #d1d5db; border-radius: 0.5rem; outline: none; transition: all 0.2s; font-size: 0.9rem; }
                .input-std:focus { border-color: #3b82f6; box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.1); }
                .btn-primary { background-color: #0f172a; color: white; padding: 0.6rem 1.5rem; border-radius: 0.5rem; font-weight: 500; font-size: 0.9rem; transition: background 0.2s; }
                .btn-primary:hover { background-color: #1e293b; }
                .btn-primary:disabled { opacity: 0.7; cursor: not-allowed; }
                .btn-secondary { background-color: transparent; color: #4b5563; padding: 0.6rem 1.25rem; font-weight: 500; font-size: 0.9rem; border: 1px solid #d1d5db; border-radius: 0.5rem; }
                .btn-secondary:hover { background-color: #f3f4f6; }
            `]})]}):null};export{Se as C,we as S};
