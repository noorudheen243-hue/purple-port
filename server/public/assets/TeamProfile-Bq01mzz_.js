import{K as f,a as g,r as o,j as e,L as h,x as j}from"./index-DTs_gUpQ.js";import{u,K as b,N as y,h as N,F as v}from"./index-BPHe9uWR.js";import{S as _,C as w}from"./StaffFormModal-DuItMDY1.js";import{A as C}from"./arrow-left-CDrnml8D.js";import{S as P}from"./square-pen-DVWK1mNo.js";import{P as S}from"./phone-BM-Rq8-s.js";import{B as k}from"./ImageUpload-C96R0Et1.js";import{B as A}from"./building-Cn2qDfL_.js";import{C as L}from"./clock-C1wc1VsE.js";import"./FormErrorAlert-BQq0KVhK.js";import"./alert-circle-BoEunZjV.js";import"./compat-CauA2MAI.js";import"./save-dY_yXBe1.js";import"./loader-2-DDF5548V.js";const H=()=>{var n,d,l;const{id:t}=f(),c=g(),[a,r]=o.useState("overview"),[m,i]=o.useState(!1),{data:s,isLoading:x,refetch:p}=u({queryKey:["staff",t],queryFn:async()=>(await j.get(`/team/staff/${t}`)).data});return x?e.jsx("div",{className:"p-8 text-center",children:"Loading profile..."}):s?e.jsxs("div",{className:"space-y-6",children:[e.jsx(_,{isOpen:m,onClose:()=>{i(!1),p()},initialData:s}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("button",{onClick:()=>c(-1),className:"flex items-center gap-2 text-muted-foreground hover:text-foreground",children:[e.jsx(C,{size:16})," Back to Team"]}),e.jsxs("button",{onClick:()=>{console.log("Editing Profile Data:",s),i(!0)},className:"flex items-center gap-2 px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90",children:[e.jsx(P,{size:16})," Edit Profile"]})]}),e.jsxs("div",{className:"bg-card border rounded-lg p-6 flex flex-col md:flex-row items-center md:items-start gap-6",children:[e.jsx("div",{className:"w-24 h-24 rounded-full bg-primary/20 flex items-center justify-center text-3xl font-bold text-primary border-4 border-background shadow-sm",children:s.user.avatar_url?e.jsx("img",{src:b(s.user.avatar_url),alt:s.user.full_name,className:"w-full h-full rounded-full object-cover"}):s.user.full_name.charAt(0)}),e.jsxs("div",{className:"flex-1 text-center md:text-left space-y-1",children:[e.jsx("h1",{className:"text-2xl font-bold",children:s.user.full_name}),e.jsx("div",{className:"text-muted-foreground font-medium",children:s.designation}),e.jsxs("div",{className:"flex flex-wrap justify-center md:justify-start gap-2 mt-2",children:[e.jsx("span",{className:"px-2 py-1 rounded-md bg-secondary text-secondary-foreground text-xs font-medium",children:s.department}),e.jsxs("span",{className:"px-2 py-1 rounded-md bg-blue-100 text-blue-700 text-xs font-medium",children:["ID: ",s.staff_number]})]})]}),e.jsxs("div",{className:"flex flex-col gap-2 min-w-[200px]",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(y,{size:16})," ",s.user.email]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(S,{size:16})," ",s.official_contact||"No contact"]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(k,{size:16})," Joined: ",new Date(s.date_of_joining).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"flex gap-4 border-b",children:[e.jsx("button",{onClick:()=>r("overview"),className:`pb - 2 px - 1 font - medium text - sm border - b - 2 transition - colors ${a==="overview"?"border-primary text-primary":"border-transparent text-gray-500 hover:text-gray-700"} `,children:"Overview"}),e.jsx("button",{onClick:()=>r("attendance"),className:`pb - 2 px - 1 font - medium text - sm border - b - 2 transition - colors ${a==="attendance"?"border-primary text-primary":"border-transparent text-gray-500 hover:text-gray-700"} `,children:"Attendance & Leave"}),e.jsx("button",{onClick:()=>r("payroll"),className:`pb - 2 px - 1 font - medium text - sm border - b - 2 transition - colors ${a==="payroll"?"border-primary text-primary":"border-transparent text-gray-500 hover:text-gray-700"} `,children:"Payroll Info"})]}),a==="overview"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 animate-in fade-in slide-in-from-bottom-2",children:[e.jsxs("div",{className:"bg-card border rounded-lg p-6 space-y-4",children:[e.jsxs("h3",{className:"font-semibold flex items-center gap-2 border-b pb-2",children:[e.jsx(N,{size:18})," Personal Details"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-y-4 text-sm",children:[e.jsx("div",{className:"text-gray-500",children:"Full Name"}),e.jsx("div",{children:s.user.full_name}),e.jsx("div",{className:"text-gray-500",children:"Date of Birth"}),e.jsx("div",{children:s.date_of_birth?new Date(s.date_of_birth).toLocaleDateString():"-"}),e.jsx("div",{className:"text-gray-500",children:"Personal Email"}),e.jsx("div",{children:s.personal_email||"-"}),e.jsx("div",{className:"text-gray-500",children:"Phone"}),e.jsx("div",{children:s.personal_contact||"-"}),e.jsx("div",{className:"text-gray-500",children:"Address"}),e.jsx("div",{className:"col-span-2 md:col-span-1",children:s.address||"-"})]})]}),e.jsxs("div",{className:"bg-card border rounded-lg p-6 space-y-4",children:[e.jsxs("h3",{className:"font-semibold flex items-center gap-2 border-b pb-2",children:[e.jsx(A,{size:18})," Employment Info"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-y-4 text-sm",children:[e.jsx("div",{className:"text-gray-500",children:"Reporting Manager"}),e.jsx("div",{children:((n=s.reporting_manager)==null?void 0:n.full_name)||"None"}),e.jsx("div",{className:"text-gray-500",children:"Previous Company"}),e.jsx("div",{children:s.previous_company||"-"}),e.jsx("div",{className:"text-gray-500",children:"Experience"}),e.jsxs("div",{children:[s.total_experience_years||0," Years"]})]})]})]}),a==="attendance"&&e.jsxs("div",{className:"bg-card border rounded-lg p-12 text-center text-muted-foreground animate-in fade-in slide-in-from-bottom-2",children:[e.jsx(L,{size:48,className:"mx-auto mb-4 opacity-20"}),e.jsx("h3",{className:"font-semibold text-lg",children:"Attendance History"}),e.jsx("p",{children:"Attendance records will appear here once data is logged."})]}),a==="payroll"&&e.jsxs("div",{className:"bg-card border rounded-lg p-6 animate-in fade-in slide-in-from-bottom-2",children:[e.jsxs("div",{className:"flex justify-between items-center border-b pb-2 mb-4",children:[e.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[e.jsx(w,{size:18})," Salary & Banking"]}),e.jsxs(h,{to:`/dashboard/accounts?tab=statements&entity_id=${s.user.id}&entity_type=USER`,className:"bg-primary/10 text-primary hover:bg-primary/20 px-3 py-1 rounded-md text-xs font-medium flex items-center gap-1",children:[e.jsx(v,{size:14})," View Ledger"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between text-sm p-3 bg-gray-50 rounded",children:[e.jsx("span",{className:"text-gray-600",children:"Base Salary"}),e.jsxs("span",{className:"font-mono font-medium",children:["₹",(d=s.base_salary)==null?void 0:d.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between text-sm p-3 bg-gray-50 rounded",children:[e.jsx("span",{className:"text-gray-600",children:"HRA"}),e.jsxs("span",{className:"font-mono font-medium",children:["₹",(l=s.hra)==null?void 0:l.toLocaleString()]})]})]}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"grid grid-cols-2",children:[e.jsx("span",{className:"text-gray-500",children:"Bank Name"}),e.jsx("span",{children:s.bank_name||"-"})]}),e.jsxs("div",{className:"grid grid-cols-2",children:[e.jsx("span",{className:"text-gray-500",children:"Account No"}),e.jsx("span",{className:"font-mono",children:s.account_number||"-"})]}),e.jsxs("div",{className:"grid grid-cols-2",children:[e.jsx("span",{className:"text-gray-500",children:"IFSC Code"}),e.jsx("span",{className:"font-mono",children:s.ifsc_code||"-"})]}),e.jsxs("div",{className:"grid grid-cols-2",children:[e.jsx("span",{className:"text-gray-500",children:"PAN Number"}),e.jsx("span",{className:"font-mono",children:s.pan_number||"-"})]})]})]})]})]}):e.jsx("div",{className:"p-8 text-center",children:"Profile not found"})};export{H as default};
