import{r as M,j as e,x as p}from"./index-_K9dBzXA.js";import{az as h,aH as k,u as b,j as l,aA as I,aI as O,ah as S}from"./index-C0_MxDCy.js";import{e as A}from"./endOfWeek-r5f4EMAI.js";import{i as n,e as R,C as _,s as G,a as $}from"./subMonths-DQeUZ5Iv.js";import{s as L}from"./startOfMonth-Bz6Ir4Q3.js";function P(a,o){const c=h(a),i=h(o);return c.getFullYear()===i.getFullYear()&&c.getMonth()===i.getMonth()}function f(a){return n(a,k(a))}const B=()=>{const[a,o]=M.useState(new Date),{data:c,isLoading:i}=b({queryKey:["campaigns",l(a,"yyyy-MM")],queryFn:async()=>{const{data:t}=await p.get(`/campaigns?month=${a.toISOString()}`);return t}}),{data:u,isLoading:F}=b({queryKey:["tasks-calendar"],queryFn:async()=>{const{data:t}=await p.get("/tasks");return t}}),g=()=>o($(a,1)),y=()=>o(G(a)),N=()=>o(new Date),m=L(a),j=I(m),E=O(m),T=A(j),v=R({start:E,end:T}),w=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],D=t=>{switch(t){case"GRAPHIC":case"BRANDING":case"CREATIVE_DESIGNER":return"bg-purple-100 text-purple-700 border-purple-200";case"VIDEO":case"MOTION":case"REEL_EDITING":case"CONTENT_SHOOTING":return"bg-orange-100 text-orange-700 border-orange-200";case"WEB_DEV":case"WEB":case"SEO":case"ADS_SETUP":return"bg-sky-100 text-sky-700 border-sky-200";case"CONTENT_CREATION":case"CONTENT":return"bg-pink-100 text-pink-700 border-pink-200";case"REPORTING":return"bg-yellow-100 text-yellow-700 border-yellow-200";default:return"bg-emerald-50 text-emerald-700 border-emerald-200"}},C=t=>{const d=[];return c&&c.forEach(s=>{const r=new Date(s.start_date),x=new Date(s.end_date);(n(t,r)||n(t,x))&&d.push({id:s.id,title:s.title,type:"CAMPAIGN",isStart:n(t,r),isEnd:n(t,x)})}),u&&u.forEach(s=>{s.due_date&&n(t,new Date(s.due_date))&&d.push({id:s.id,title:s.title,type:"TASK",taskType:s.type,status:s.status,priority:s.priority})}),d};return e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Content Calendar"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:N,className:"text-sm font-medium px-3 py-1 border rounded hover:bg-accent",children:"Today"}),e.jsxs("div",{className:"flex items-center rounded-md border bg-card",children:[e.jsx("button",{onClick:y,className:"p-2 hover:bg-accent border-r",children:e.jsx(_,{size:20})}),e.jsx("span",{className:"px-4 font-semibold min-w-[140px] text-center",children:l(a,"MMMM yyyy")}),e.jsx("button",{onClick:g,className:"p-2 hover:bg-accent border-l",children:e.jsx(S,{size:20})})]})]})]}),e.jsxs("div",{className:"bg-card border rounded-lg shadow-sm flex-1 flex flex-col min-h-[600px]",children:[e.jsx("div",{className:"grid grid-cols-7 border-b",children:w.map(t=>e.jsx("div",{className:"p-4 text-center text-sm font-semibold text-muted-foreground border-r last:border-r-0",children:t},t))}),e.jsx("div",{className:"grid grid-cols-7 flex-1 auto-rows-fr",children:v.map((t,d)=>{const s=C(t);return e.jsxs("div",{className:`
                                    border-b border-r p-2 min-h-[100px] relative transition-colors hover:bg-accent/10
                                    ${P(t,a)?"":"bg-muted/30 text-muted-foreground"}
                                    ${f(t)?"bg-primary/5":""}
                                    ${(d+1)%7===0?"border-r-0":""}
                                `,children:[e.jsx("div",{className:"flex justify-between items-start",children:e.jsx("span",{className:`text-sm font-medium w-7 h-7 flex items-center justify-center rounded-full ${f(t)?"bg-primary text-primary-foreground":""}`,children:l(t,"d")})}),e.jsx("div",{className:"mt-2 space-y-1 overflow-y-auto max-h-[120px] custom-scrollbar",children:s.map(r=>e.jsxs("div",{className:`
                                                text-xs p-1.5 rounded truncate font-medium border flex items-center gap-1.5
                                                ${r.type==="CAMPAIGN"?"bg-blue-100 text-blue-700 border-blue-200":D(r.taskType)}
                                            `,title:r.title,children:[r.type==="CAMPAIGN"&&e.jsx("span",{children:r.isStart?"üö©":"üèÅ"}),r.type==="TASK"&&e.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${r.status==="COMPLETED"?"bg-emerald-500":r.priority==="URGENT"?"bg-red-500":"bg-current"}`}),e.jsx("span",{className:"truncate",children:r.title})]},`${r.type}-${r.id}`))})]},t.toString())})})]})]})};export{B as default};
