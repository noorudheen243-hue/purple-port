import{r as g,j as e,x as d}from"./index-_K9dBzXA.js";import{u as o}from"./index-C0_MxDCy.js";import{T as y}from"./target-5_D0FVIf.js";import{C as f}from"./check-circle-DX-ak2PV.js";import{C as j}from"./clock-89fNMNOB.js";import{A as N}from"./alert-circle-Dgl9YWib.js";const T=()=>{var c;const{data:a,isLoading:x}=o({queryKey:["clients"],queryFn:async()=>(await d.get("/clients")).data}),[n,m]=g.useState(""),{data:i,isLoading:p}=o({queryKey:["tasks",n],queryFn:async()=>(await d.get(`/tasks?client_id=${n}`)).data,enabled:!!n}),s=a==null?void 0:a.find(t=>t.id===n);if(x)return e.jsx("div",{className:"p-8 text-center",children:"Loading Data..."});const h=t=>i?i.filter(r=>r.status==="COMPLETED"&&r.content_type===t).length:0;return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Content Status Report"}),e.jsx("p",{className:"text-muted-foreground",children:"Track monthly content commitments vs. actual delivery."})]})}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border space-y-4 max-w-xl",children:[e.jsx("label",{className:"text-sm font-semibold text-gray-700",children:"Select Client to View Report"}),e.jsx("div",{className:"relative",children:e.jsxs("select",{className:"w-full px-4 py-3 border rounded-lg appearance-none bg-gray-50 focus:ring-2 focus:ring-primary/20 outline-none transition-all",value:n,onChange:t=>m(t.target.value),children:[e.jsx("option",{value:"",children:"-- Choose a Client --"}),a==null?void 0:a.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})})]}),n?e.jsxs("div",{className:"bg-white rounded-lg shadow border overflow-hidden animate-in fade-in slide-in-from-bottom-4",children:[e.jsxs("div",{className:"p-4 border-b bg-gray-50 flex justify-between items-center",children:[e.jsxs("h2",{className:"font-semibold text-lg flex items-center gap-2",children:["Status for: ",e.jsx("span",{className:"text-primary",children:s==null?void 0:s.name})]}),p&&e.jsx("span",{className:"text-xs text-muted-foreground animate-pulse",children:"Syncing tasks..."})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm text-left",children:[e.jsx("thead",{className:"bg-gray-50 text-gray-500 font-medium border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4",children:"Content Type"}),e.jsx("th",{className:"px-6 py-4 text-center",children:"Committed (Monthly)"}),e.jsx("th",{className:"px-6 py-4 text-center",children:"Delivered (Completed Tasks)"}),e.jsx("th",{className:"px-6 py-4 text-center",children:"Balance"}),e.jsx("th",{className:"px-6 py-4 text-center",children:"Status"})]})}),e.jsx("tbody",{className:"divide-y",children:((c=s==null?void 0:s.content_strategies)==null?void 0:c.length)>0?s.content_strategies.map(t=>{const r=h(t.type),l=t.quantity-r,u=l<=0;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsxs("td",{className:"px-6 py-4 font-medium text-gray-900 flex items-center gap-2",children:[e.jsx(y,{size:16,className:"text-gray-400"}),t.type]}),e.jsx("td",{className:"px-6 py-4 text-center font-bold text-gray-700 text-lg",children:t.quantity}),e.jsx("td",{className:"px-6 py-4 text-center text-green-600 font-bold text-lg",children:r}),e.jsx("td",{className:"px-6 py-4 text-center font-mono font-medium",children:l>0?l:0}),e.jsx("td",{className:"px-6 py-4 text-center",children:u?e.jsxs("span",{className:"inline-flex items-center gap-1 px-2.5 py-1 rounded-full text-xs font-bold bg-green-100 text-green-800",children:[e.jsx(f,{size:12})," Target Met"]}):e.jsxs("span",{className:"inline-flex items-center gap-1 px-2.5 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:[e.jsx(j,{size:12})," Pending"]})})]},t.id||t.type)}):e.jsx("tr",{children:e.jsxs("td",{colSpan:5,className:"px-6 py-8 text-center text-muted-foreground",children:["No Content Strategy defined for this client.",e.jsx("br",{}),"Go to ",e.jsx("span",{className:"font-mono text-xs bg-gray-100 px-1",children:"Client List > Edit"})," to add commitments."]})})})]})})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 bg-gray-50/50 border-2 border-dashed rounded-xl text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(N,{className:"text-gray-400",size:32})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"No Client Selected"}),e.jsx("p",{className:"text-muted-foreground max-w-sm mt-1",children:"Please select a client from the dropdown above to view their content delivery status."})]})]})};export{T as default};
