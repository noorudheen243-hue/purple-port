import{v as j,r as x,j as e,E as y,x as d,a as w}from"./index-_K9dBzXA.js";import{T as N,a as k,b as S,c as n}from"./tabs-BB7NwzE5.js";import C from"./AccountOverview-zmoC3Mg_.js";import{L as R}from"./LedgerManagement-BdLMclpM.js";import T from"./TransactionHistory-D6tSK4CN.js";import A from"./AccountStatement-BF_7Atou.js";import{Y as E,_ as O,S as i}from"./index-C0_MxDCy.js";import{F}from"./file-spreadsheet-0LGas0cG.js";import B from"./index-DtOI_86m.js";import{P as L}from"./plus-circle-Cik7kgTw.js";import"./index-CemV9wER.js";import"./index-feRhg8F5.js";import"./card-BJXC2BmV.js";import"./dollar-sign-k8ODSGZ6.js";import"./CategoricalChart-CFD9d8bu.js";import"./PieChart-B8vV4uHY.js";import"./format-D4js0obD.js";import"./pencil-Cl0nWfVN.js";import"./ConfirmationModal-CBglAdUX.js";import"./filter-t9sSzATh.js";import"./save-BPR9f-BE.js";import"./jspdf.es.min-DaBCeuWy.js";import"./jspdf.plugin.autotable-CtA5BUKo.js";import"./printer-BV8c6w5B.js";import"./label-Cxi2tPpM.js";import"./select-BsM-SyXO.js";import"./index-I-cGsQdO.js";import"./badge-BRRI9-vD.js";import"./table-CZtgpgQ3.js";import"./InvoiceTemplate-BU5RMrpM.js";import"./html2canvas.esm-CBrSDip1.js";import"./check-circle-DX-ak2PV.js";/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=j("FileJson",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]]),J=()=>{const a=x.useRef(null),[l,r]=x.useState(!1),h=async()=>{try{const o=await d.get("/accounting/backup/excel",{responseType:"blob"}),s=window.URL.createObjectURL(new Blob([o.data])),t=document.createElement("a");t.href=s,t.setAttribute("download",`Account_Report_${new Date().toISOString().split("T")[0]}.xlsx`),document.body.appendChild(t),t.click(),t.remove()}catch{i.fire("Error","Failed to download Excel backup. Check your permissions.","error")}},f=async()=>{try{const o=await d.get("/accounting/backup/json",{responseType:"blob"}),s=window.URL.createObjectURL(new Blob([o.data])),t=document.createElement("a");t.href=s,t.setAttribute("download",`Account_System_Backup_${new Date().toISOString().split("T")[0]}.json`),document.body.appendChild(t),t.click(),t.remove()}catch{i.fire("Error","Failed to download JSON backup. Check your permissions.","error")}},g=()=>{a.current&&a.current.click()},b=async o=>{var m,p,u;const s=(m=o.target.files)==null?void 0:m[0];if(!s)return;if(s.type!=="application/json"&&!s.name.endsWith(".json")){i.fire("Invalid File","Please upload a valid JSON backup file.","error");return}if(!(await i.fire({title:"Are you absolutely sure?",text:"Restoring a backup will ERASE ALL CURRENT ACCOUNTING DATA and replace it with the data from this file. This action cannot be undone!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, overwrite everything!"})).isConfirmed){a.current&&(a.current.value="");return}r(!0);try{const c=await s.text(),v=JSON.parse(c);await d.post("/accounting/backup/restore",v),i.fire("Restored!","Your accounting system has been fully restored from the backup.","success"),setTimeout(()=>window.location.reload(),1500)}catch(c){i.fire("Restore Failed",((u=(p=c.response)==null?void 0:p.data)==null?void 0:u.message)||"Failed to parse or restore backup. Verify file format.","error")}finally{r(!1),a.current&&(a.current.value="")}};return e.jsxs("div",{className:"space-y-8 animate-in fade-in",children:[e.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-100 shadow-sm",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx(E,{className:"text-primary",size:20}),"Export & Backup"]}),e.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Download copies of your accounting data. Use the Excel format for reporting and the JSON format for storing full system backups."}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"border rounded-lg p-5 flex flex-col items-start gap-3 hover:border-green-300 hover:bg-green-50/30 transition-colors",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-green-100 text-green-600 flex items-center justify-center",children:e.jsx(F,{size:24})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Download Excel Report"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Contains Ledgers, Transaction History, Income/Expense Summary, and Cash balances in a readable format."})]}),e.jsx("button",{onClick:h,className:"mt-auto w-full px-4 py-2 bg-green-600 text-white hover:bg-green-700 rounded-md text-sm font-medium transition-colors",children:"Download .XLSX"})]}),e.jsxs("div",{className:"border rounded-lg p-5 flex flex-col items-start gap-3 hover:border-blue-300 hover:bg-blue-50/30 transition-colors",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center",children:e.jsx(D,{size:24})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"System Backup (JSON)"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Exact database export. Required format for restoring the system to a previous state. Keep this safe."})]}),e.jsx("button",{onClick:f,className:"mt-auto w-full px-4 py-2 bg-blue-600 text-white hover:bg-blue-700 rounded-md text-sm font-medium transition-colors",children:"Download .JSON"})]})]})]}),e.jsxs("div",{className:"bg-red-50 border border-red-100 p-6 rounded-lg shadow-sm",children:[e.jsxs("h3",{className:"text-lg font-semibold text-red-900 mb-2 flex items-center gap-2",children:[e.jsx(y,{size:20}),"Restore System from Backup"]}),e.jsx("p",{className:"text-sm text-red-700 mb-6 max-w-3xl",children:"Warning: Restoring from a backup will completely overwrite all current financial data (ledgers, accounts, transactions). Only use a valid .JSON backup file generated from this system."}),e.jsx("input",{type:"file",accept:".json,application/json",className:"hidden",ref:a,onChange:b}),e.jsx("button",{onClick:g,disabled:l,className:"flex items-center justify-center gap-2 px-6 py-3 bg-red-600 text-white font-medium rounded-md hover:bg-red-700 disabled:opacity-50 transition-colors shadow-sm",children:l?e.jsx(e.Fragment,{children:"Processing Restore..."}):e.jsxs(e.Fragment,{children:[e.jsx(O,{size:18}),"Upload JSON Backup to Restore"]})})]})]})},he=()=>{const a=w(),l=[{id:"overview",label:"Account Overview",theme:"yellow"},{id:"ledger",label:"Ledger Master",theme:"purple"},{id:"history",label:"Transaction History",theme:"yellow"},{id:"statements",label:"Account Statements",theme:"purple"},{id:"invoice",label:"Client Invoice",theme:"yellow"},{id:"backup",label:"Account Backup",theme:"purple"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Financial Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage accounts, ledgers, transactions, and invoices."})]}),e.jsxs("button",{onClick:()=>a("/dashboard/accounts/new"),className:"flex items-center gap-2 bg-purple-900 text-yellow-400 px-6 py-3 rounded-md font-bold hover:bg-purple-800 transition-colors shadow-md",children:[e.jsx(L,{size:20}),"Record Transaction"]})]}),e.jsxs(N,{defaultValue:"overview",className:"space-y-6",children:[e.jsx(k,{className:"flex flex-wrap h-auto bg-transparent gap-2 p-0 justify-start",children:l.map(r=>e.jsx(S,{value:r.id,className:"data-[state=active]:bg-transparent data-[state=inactive]:bg-transparent p-0",asChild:!0,children:e.jsx("div",{className:"cursor-pointer group",children:e.jsx("span",{className:`flex items-center justify-center ${r.theme==="yellow"?"data-[state=active]:bg-yellow-400 data-[state=active]:text-purple-900 data-[state=inactive]:bg-yellow-100 data-[state=inactive]:text-yellow-900":"data-[state=active]:bg-purple-900 data-[state=active]:text-yellow-400 data-[state=inactive]:bg-purple-100 data-[state=inactive]:text-purple-900"} px-6 py-2 rounded-md font-bold transition-all shadow-sm border-2 border-transparent hover:opacity-90`,children:r.label})})},r.id))}),e.jsxs("div",{className:"bg-card rounded-lg border shadow-sm p-6 min-h-[500px]",children:[e.jsx(n,{value:"overview",className:"mt-0",children:e.jsx(C,{})}),e.jsx(n,{value:"ledger",className:"mt-0",children:e.jsx(R,{})}),e.jsx(n,{value:"history",className:"mt-0",children:e.jsx(T,{})}),e.jsx(n,{value:"statements",className:"mt-0",children:e.jsx(A,{})}),e.jsx(n,{value:"invoice",className:"mt-0",children:e.jsx(B,{})}),e.jsx(n,{value:"backup",className:"mt-0",children:e.jsx(J,{})})]})]})]})};export{he as default};
