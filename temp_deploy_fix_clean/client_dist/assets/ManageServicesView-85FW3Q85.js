import{J as Xe,u as Ze,q as Je,a as et,r as p,x as h,j as e}from"./index-_K9dBzXA.js";import{u as $,i as E,S as b,U as Se,J as tt,I as o,p as at,T as st,j as Z,C as nt,B as j,l as Ee,X as k,P as J,a3 as ee,g as lt}from"./index-C0_MxDCy.js";import{T as ke,a as _e,b as M,c as O}from"./tabs-BB7NwzE5.js";import{C as v,c as te,a as De,b as Te,d as Ie}from"./card-BJXC2BmV.js";import{T as rt,a as it,b as A,c as w,d as ot,e as c}from"./table-CZtgpgQ3.js";import{B as dt}from"./badge-BRRI9-vD.js";import{L as ne}from"./layout-dashboard-BlNWEKgk.js";import{P as G}from"./pen-tool-BS_U9yd4.js";import{C as ct}from"./clock-89fNMNOB.js";import{A as Le}from"./activity-BIVplPpj.js";import{G as xt}from"./globe-E2cIpeby.js";import{S as $e}from"./save-BPR9f-BE.js";import{P as mt}from"./phone-CURqDDBO.js";import{M as gt}from"./map-pin-ClzeGq9V.js";import"./index-CemV9wER.js";import"./index-feRhg8F5.js";const ht={META:st,GOOGLE:at,SEO:xt,WEB:ne,CONTENT:G},ae={HIGH:"bg-green-100 text-green-700 border-green-200",MEDIUM:"bg-yellow-100 text-yellow-700 border-yellow-200",LOW:"bg-red-100 text-red-700 border-red-200"},se={NEW:"bg-blue-100 text-blue-700",CONTACTED:"bg-indigo-100 text-indigo-700",QUALIFIED:"bg-purple-100 text-purple-700",CLOSED:"bg-green-100 text-green-700",LOST:"bg-gray-100 text-gray-700"},It=()=>{var fe,ve,ye,Ne,we,Ce;const[R]=Xe(),{user:g}=Ze(),C=Je(),Me=et(),{data:D}=$({queryKey:["clients-all"],queryFn:async()=>(await h.get("/clients")).data,enabled:(g==null?void 0:g.role)!=="CLIENT"}),i=p.useMemo(()=>(g==null?void 0:g.role)==="CLIENT"?g.linked_client_id:R.get("clientId"),[g,R]),{data:Oe}=$({queryKey:["client",i],queryFn:async()=>(await h.get(`/clients/${i}`)).data,enabled:(g==null?void 0:g.role)==="CLIENT"&&!!i}),Ae=t=>{const a=new URLSearchParams(R);t?a.set("clientId",t):a.delete("clientId"),Me(`?${a.toString()}`)},T=(g==null?void 0:g.role)!=="CLIENT",_=T?D==null?void 0:D.find(t=>t.id===i):Oe,[ze,le]=p.useState(T?"campaignData":"history"),[re,W]=p.useState(!1),[Fe,K]=p.useState(null),[z,ie]=p.useState(""),[F,oe]=p.useState(""),[l,x]=p.useState({date:new Date().toISOString(),quality:"MEDIUM",status:"NEW",follow_ups:[]}),[U,de]=p.useState("meta"),[S,ce]=p.useState(null),[s,m]=p.useState({date:new Date().toISOString(),status:"ACTIVE"}),[y,Pe]=p.useState(""),[N,qe]=p.useState(""),{data:B}=$({queryKey:["tracking-meta",i,y,N],queryFn:async()=>{const t=new URLSearchParams({clientId:i});return y&&t.append("startDate",y),N&&t.append("endDate",N),(await h.get(`/client-portal/tracking/meta-ads?${t.toString()}`)).data},enabled:!!i}),{data:H}=$({queryKey:["tracking-google",i,y,N],queryFn:async()=>{const t=new URLSearchParams({clientId:i});return y&&t.append("startDate",y),N&&t.append("endDate",N),(await h.get(`/client-portal/tracking/google-ads?${t.toString()}`)).data},enabled:!!i}),{data:Q}=$({queryKey:["tracking-seo",i,y,N],queryFn:async()=>{const t=new URLSearchParams({clientId:i});return y&&t.append("startDate",y),N&&t.append("endDate",N),(await h.get(`/client-portal/tracking/seo?${t.toString()}`)).data},enabled:!!i}),{data:f,isLoading:Ue}=$({queryKey:["tracking-leads",i],queryFn:async()=>(await h.get(`/client-portal/tracking/leads?clientId=${i}`)).data,enabled:!!i}),P=p.useMemo(()=>{const t=[];return B==null||B.forEach(a=>{var r,u;let n=a.results_json;if(typeof n=="string")try{n=JSON.parse(n)}catch{}const d=[];n!=null&&n.impressions&&d.push(`Impressions: ${n.impressions}`),n!=null&&n.engagement&&d.push(`Engagement: ${n.engagement}`),n!=null&&n.leads&&d.push(`Leads: ${n.leads}`),t.push({id:a.id,date:a.date,service:"Meta Ads",title:a.campaign_name,description:`${a.objective} campaign on ${a.platform}. Spend: ₹${(r=a.spend)==null?void 0:r.toLocaleString()} ${d.length>0?"| "+d.join(", "):""}`,badge:`₹${(u=a.spend)==null?void 0:u.toLocaleString()}`,status:a.status,type:"META",originalData:a})}),H==null||H.forEach(a=>{var d,r;const n=[];a.impressions&&n.push(`Impressions: ${a.impressions}`),a.clicks&&n.push(`Clicks: ${a.clicks}`),a.conversions&&n.push(`Conversions: ${a.conversions}`),t.push({id:a.id,date:a.date,service:"Google Ads",title:a.campaign_name,description:`${a.campaign_type} campaign. Spend: ₹${(d=a.spend)==null?void 0:d.toLocaleString()} ${n.length>0?"| "+n.join(", "):""}`,badge:`₹${(r=a.spend)==null?void 0:r.toLocaleString()}`,status:a.status,type:"GOOGLE",originalData:a})}),Q==null||Q.forEach(a=>{var n,d;t.push({id:a.id,date:new Date(a.year,a.month-1).toISOString(),service:"SEO",title:`Performance - ${a.month}/${a.year}`,description:`Organic Traffic: ${(n=a.organic_traffic)==null?void 0:n.toLocaleString()}. ${a.summary||""}`,badge:`${(d=a.organic_traffic)==null?void 0:d.toLocaleString()} Visits`,status:a.status,type:"SEO",originalData:a})}),t.sort((a,n)=>a.status==="ACTIVE"&&n.status!=="ACTIVE"?-1:n.status==="ACTIVE"&&a.status!=="ACTIVE"?1:new Date(n.date).getTime()-new Date(a.date).getTime()).slice(0,20)},[B,H,Q]),Y=p.useMemo(()=>{const t=P.filter(d=>d.status==="ACTIVE").length;let a=0,n=0;return P.forEach(d=>{var r;if((r=d.originalData)!=null&&r.spend&&(a+=d.originalData.spend),d.type==="META")try{const u=typeof d.originalData.results_json=="string"?JSON.parse(d.originalData.results_json):d.originalData.results_json;u!=null&&u.leads&&(n+=Number(u.leads))}catch{}}),{activeCount:t,totalSpend:a,totalLeads:n}},[P]),q=p.useMemo(()=>f?{total:f.length,highQuality:f.filter(t=>t.quality==="HIGH").length,converted:f.filter(t=>t.status==="CONVERTED").length,positive:f.filter(t=>t.is_positive===!0).length,negative:f.filter(t=>t.is_positive===!1).length}:{total:0,highQuality:0,converted:0,positive:0,negative:0},[f]),X=p.useMemo(()=>{if(!f)return[];let t=[...f];if(z){const a=new Date(z).getTime();t=t.filter(n=>new Date(n.date).getTime()>=a)}if(F){const a=new Date(F).getTime();t=t.filter(n=>new Date(n.date).getTime()<=a+864e5)}return t.sort((a,n)=>{const d=new Date(a.date).getTime();return new Date(n.date).getTime()-d})},[f,z,F]),xe=E({mutationFn:async t=>t.id?await h.patch(`/client-portal/tracking/leads/${t.id}?clientId=${i}`,t):await h.post(`/client-portal/tracking/leads?clientId=${i}`,{...t,client_id:i}),onSuccess:()=>{C.invalidateQueries({queryKey:["tracking-leads",i]}),W(!1),K(null),x({date:new Date().toISOString(),quality:"MEDIUM",status:"NEW",follow_ups:[]}),b.fire({title:"Success",icon:"success",toast:!0,position:"top-end",showConfirmButton:!1,timer:2e3})},onError:t=>{var a,n;return b.fire("Error",((n=(a=t.response)==null?void 0:a.data)==null?void 0:n.message)||"Failed to save lead","error")}}),Be=E({mutationFn:async t=>await h.delete(`/client-portal/tracking/leads/${t}?clientId=${i}`),onSuccess:()=>{C.invalidateQueries({queryKey:["tracking-leads",i]}),b.fire({title:"Deleted",icon:"success",toast:!0,position:"top-end",showConfirmButton:!1,timer:2e3})}}),me=E({mutationFn:async t=>S?await h.patch(`/client-portal/tracking/meta-ads/${S}?clientId=${i}`,t):await h.post(`/client-portal/tracking/meta-ads?clientId=${i}`,{...t,client_id:i}),onSuccess:()=>{C.invalidateQueries({queryKey:["tracking-meta",i]}),V(),b.fire({title:"Success",icon:"success",toast:!0,position:"top-end",showConfirmButton:!1,timer:2e3})},onError:t=>{var a,n;return b.fire("Error",((n=(a=t.response)==null?void 0:a.data)==null?void 0:n.message)||"Failed to save Meta Ads log","error")}}),ge=E({mutationFn:async t=>S?await h.patch(`/client-portal/tracking/google-ads/${S}?clientId=${i}`,t):await h.post(`/client-portal/tracking/google-ads?clientId=${i}`,{...t,client_id:i}),onSuccess:()=>{C.invalidateQueries({queryKey:["tracking-google",i]}),V(),b.fire({title:"Success",icon:"success",toast:!0,position:"top-end",showConfirmButton:!1,timer:2e3})}}),he=E({mutationFn:async t=>S?await h.patch(`/client-portal/tracking/seo/${S}?clientId=${i}`,t):await h.post(`/client-portal/tracking/seo?clientId=${i}`,{...t,client_id:i}),onSuccess:()=>{C.invalidateQueries({queryKey:["tracking-seo",i]}),V(),b.fire({title:"Success",icon:"success",toast:!0,position:"top-end",showConfirmButton:!1,timer:2e3})}}),He=E({mutationFn:async t=>await h.delete(`/client-portal/tracking/meta-ads/${t}?clientId=${i}`),onSuccess:()=>{C.invalidateQueries({queryKey:["tracking-meta",i]}),b.fire({title:"Deleted",icon:"success",toast:!0,position:"top-end",showConfirmButton:!1,timer:2e3})}}),Qe=E({mutationFn:async t=>await h.delete(`/client-portal/tracking/google-ads/${t}?clientId=${i}`),onSuccess:()=>{C.invalidateQueries({queryKey:["tracking-google",i]}),b.fire({title:"Deleted",icon:"success",toast:!0,position:"top-end",showConfirmButton:!1,timer:2e3})}}),Ve=E({mutationFn:async t=>await h.delete(`/client-portal/tracking/seo/${t}?clientId=${i}`),onSuccess:()=>{C.invalidateQueries({queryKey:["tracking-seo",i]}),b.fire({title:"Deleted",icon:"success",toast:!0,position:"top-end",showConfirmButton:!1,timer:2e3})}}),ue=()=>{const t=l.follow_ups||[],a=t.length+1;x({...l,follow_ups:[...t,{follow_up_number:a,status:"PENDING",notes:"",date:new Date().toISOString()}]})},I=(t,a,n)=>{const d=[...l.follow_ups||[]];d[t]={...d[t],[a]:n},x({...l,follow_ups:d})},pe=t=>{const a=(l.follow_ups||[]).filter((n,d)=>d!==t).map((n,d)=>({...n,follow_up_number:d+1}));x({...l,follow_ups:a})},Ge=t=>{K(t.id||null),x(t)},be=()=>{if(!l.name||!l.phone){b.fire("Error","Name and Phone are required","warning");return}xe.mutate(l)},Re=t=>{b.fire({title:"Are you sure?",text:"This will permanently remove the lead record.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(a=>{a.isConfirmed&&Be.mutate(t)})},je=(t,a)=>{xe.mutate({...t,is_positive:a})},We=t=>{b.fire({title:"Are you sure?",text:"This will permanently remove the campaign record.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(a=>{a.isConfirmed&&(t.type==="META"?He.mutate(t.id):t.type==="GOOGLE"?Qe.mutate(t.id):t.type==="SEO"&&Ve.mutate(t.id))})},V=()=>{ce(null),m({date:new Date().toISOString(),status:"ACTIVE"})},Ke=t=>{ce(t.id),le("campaignData");let a="meta";t.type==="GOOGLE"&&(a="google"),t.type==="SEO"&&(a="seo"),de(a),m({...t.originalData})},Ye=()=>{if(U==="meta"){if(!s.campaign_name||!s.objective||!s.platform){b.fire("Error","Campaign Name, Objective, and Platform are required","warning");return}me.mutate(s)}else if(U==="google"){if(!s.campaign_name||!s.campaign_type){b.fire("Error","Campaign Name and Type are required","warning");return}ge.mutate(s)}else if(U==="seo"){if(!s.month||!s.year){b.fire("Error","Month and Year are required","warning");return}he.mutate(s)}};return i?e.jsxs("div",{className:"p-6 w-[98%] max-w-[1920px] mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between gap-4 bg-white p-6 rounded-2xl shadow-sm border border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-indigo-50 rounded-xl text-indigo-600",children:e.jsx(ne,{size:28})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Manage Services"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Campaign history, performance logs and lead tracking."})]})]}),T&&e.jsxs("div",{className:"flex items-center gap-3 bg-indigo-50/50 p-2 rounded-xl border border-indigo-100 min-w-[300px]",children:[e.jsx(Se,{size:20,className:"ml-2 text-indigo-500"}),e.jsxs("select",{className:"bg-transparent border-none text-indigo-900 font-bold focus:ring-0 cursor-pointer w-full text-sm",value:i||"",onChange:t=>Ae(t.target.value),children:[e.jsx("option",{value:"",children:"Select a Client..."}),D==null?void 0:D.map(t=>e.jsxs("option",{value:t.id,children:[t.name," (",t.client_code,")"]},t.id))]})]})]}),_&&e.jsxs("div",{className:"flex items-center gap-6 bg-gradient-to-r from-purple-50 to-white pt-2 pb-6 px-4 rounded-xl mb-6",children:[_.logo_url?e.jsx("img",{src:tt(_.logo_url),alt:_.name,className:"w-20 h-20 rounded-full object-cover border-4 border-white shadow-lg"}):e.jsx("div",{className:"w-20 h-20 rounded-full bg-gradient-to-br from-purple-500 to-indigo-600 flex items-center justify-center text-white text-3xl font-bold shadow-lg border-4 border-white",children:_.name.substring(0,1).toUpperCase()}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-extrabold text-gray-900 tracking-tight",children:_.name}),e.jsx("p",{className:"text-sm font-medium text-purple-600 uppercase tracking-widest mt-1 ml-1",children:_.client_code})]})]}),e.jsxs(ke,{value:ze,onValueChange:le,className:"w-full",children:[e.jsxs(_e,{className:"bg-yellow-50/50 p-1.5 rounded-2xl mb-6 border border-yellow-200/50 flex flex-wrap gap-2",children:[T&&e.jsxs(M,{value:"campaignData",className:"rounded-xl px-6 py-2.5 data-[state=active]:bg-[#2c185a] data-[state=active]:text-white data-[state=active]:shadow-md transition-all text-gray-700 font-bold hover:bg-yellow-100",children:[e.jsx(G,{size:18,className:"mr-2"})," Manage Campaign"]}),e.jsxs(M,{value:"history",className:"rounded-xl px-6 py-2.5 data-[state=active]:bg-[#2c185a] data-[state=active]:text-white data-[state=active]:shadow-md transition-all text-gray-700 font-bold hover:bg-yellow-100",children:[e.jsx(ct,{size:18,className:"mr-2"})," Campaign History"]}),e.jsxs(M,{value:"leads",className:"rounded-xl px-6 py-2.5 data-[state=active]:bg-[#2c185a] data-[state=active]:text-white data-[state=active]:shadow-md transition-all text-gray-700 font-bold hover:bg-yellow-100",children:[e.jsx(Se,{size:18,className:"mr-2"})," Lead Management"]})]}),e.jsx(O,{value:"history",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[e.jsxs(v,{className:"bg-indigo-50/50 border-indigo-100 flex flex-col items-center justify-center p-4 rounded-xl shadow-sm",children:[e.jsx("span",{className:"text-sm font-bold text-indigo-600 mb-1",children:"Active Campaigns"}),e.jsx("span",{className:"text-3xl font-extrabold text-indigo-900",children:Y.activeCount})]}),e.jsxs(v,{className:"bg-green-50/50 border-green-100 flex flex-col items-center justify-center p-4 rounded-xl shadow-sm",children:[e.jsx("span",{className:"text-sm font-bold text-green-600 mb-1",children:"Total Spend Logged"}),e.jsxs("span",{className:"text-3xl font-extrabold text-green-900",children:["₹",Y.totalSpend.toLocaleString()]})]}),e.jsxs(v,{className:"bg-purple-50/50 border-purple-100 flex flex-col items-center justify-center p-4 rounded-xl shadow-sm",children:[e.jsx("span",{className:"text-sm font-bold text-purple-600 mb-1",children:"Total Leads Recorded"}),e.jsx("span",{className:"text-3xl font-extrabold text-purple-900",children:Y.totalLeads})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4 bg-white p-4 rounded-xl shadow-sm border border-gray-100 dark:border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-sm font-bold text-gray-600",children:"From:"}),e.jsx(o,{type:"date",className:"h-9 w-40",value:y,onChange:t=>Pe(t.target.value)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-sm font-bold text-gray-600",children:"To:"}),e.jsx(o,{type:"date",className:"h-9 w-40",value:N,onChange:t=>qe(t.target.value)})]}),e.jsxs("div",{className:"text-xs text-gray-400 ml-auto flex items-center gap-1",children:[e.jsx(Le,{size:14})," Showing up to 20 campaigns"]})]}),P.length===0?e.jsxs("div",{className:"text-center p-20 bg-gray-50 rounded-2xl border-2 border-dashed border-gray-200",children:[e.jsx(Le,{size:48,className:"mx-auto text-gray-300 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-600",children:"No History Available"}),e.jsx("p",{className:"text-gray-400",children:"History records will appear once service logs are created by the team."})]}):e.jsx("div",{className:"grid grid-cols-1 gap-4",children:P.map(t=>{const a=ht[t.type];return e.jsx(v,{className:"hover:shadow-md transition-shadow border-l-4 border-l-indigo-500 overflow-hidden",children:e.jsx(te,{className:"p-0",children:e.jsxs("div",{className:"flex items-center p-5",children:[e.jsx("div",{className:"p-3 bg-indigo-50 rounded-lg text-indigo-600 mr-5",children:e.jsx(a,{size:24})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-[10px] uppercase font-bold text-indigo-500 bg-indigo-50 px-2 py-0.5 rounded",children:t.service}),e.jsxs("span",{className:"text-xs text-gray-400 flex items-center",children:[e.jsx(nt,{size:12,className:"mr-1"}),Z(new Date(t.date),"dd MMM yyyy")]}),t.status&&e.jsx("span",{className:`text-[10px] uppercase font-bold px-2 py-0.5 rounded-full border ${t.status==="ACTIVE"?"bg-green-100 text-green-700 border-green-300 shadow-sm":"bg-red-50 text-red-600 border-red-200"}`,children:t.status})]}),e.jsx("h3",{className:"font-bold text-gray-900 truncate",children:t.title}),e.jsx("p",{className:"text-sm text-gray-500 line-clamp-1",children:t.description})]}),t.badge&&e.jsx("div",{className:"ml-4 px-4 py-1 bg-gray-50 border rounded-full text-sm font-bold text-gray-700",children:t.badge}),T&&e.jsxs("div",{className:"ml-4 flex items-center gap-1",children:[e.jsx(j,{variant:"ghost",size:"icon",className:"h-8 w-8 text-indigo-500 hover:bg-indigo-50 shrink-0",onClick:()=>Ke(t),children:e.jsx(G,{size:16})}),(g==null?void 0:g.role)==="DEVELOPER_ADMIN"&&e.jsx(j,{variant:"ghost",size:"icon",className:"h-8 w-8 text-red-500 hover:bg-red-50 shrink-0",onClick:()=>We(t),children:e.jsx(Ee,{size:16})})]})]})})},t.id)})})]})}),T&&e.jsx(O,{value:"campaignData",children:e.jsxs(v,{className:"border-none shadow-sm rounded-2xl overflow-hidden",children:[e.jsxs(De,{className:"flex flex-row items-center justify-between border-b bg-gray-50/30 p-6",children:[e.jsxs("div",{children:[e.jsx(Te,{className:"text-xl",children:"Campaign Data Entry"}),e.jsx(Ie,{children:"Record and modify performance logs for various services."})]}),S&&e.jsx(j,{variant:"outline",size:"sm",onClick:V,children:"Cancel Edit"})]}),e.jsx(te,{className:"p-6",children:e.jsxs(ke,{value:U,onValueChange:de,className:"w-full",children:[e.jsxs(_e,{className:"grid grid-cols-3 mb-6 bg-gray-100/50 p-1 rounded-xl w-[400px]",children:[e.jsx(M,{value:"meta",className:"rounded-lg data-[state=active]:bg-white data-[state=active]:shadow-sm",children:"Meta Ads"}),e.jsx(M,{value:"google",className:"rounded-lg data-[state=active]:bg-white data-[state=active]:shadow-sm",children:"Google Ads"}),e.jsx(M,{value:"seo",className:"rounded-lg data-[state=active]:bg-white data-[state=active]:shadow-sm",children:"SEO"})]}),e.jsxs(O,{value:"meta",className:"space-y-4 max-w-2xl",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:"Date"}),e.jsx(o,{type:"date",value:s.date?new Date(s.date).toISOString().split("T")[0]:"",onChange:t=>m({...s,date:new Date(t.target.value).toISOString()})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:"Status"}),e.jsxs("select",{className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm",value:s.status,onChange:t=>m({...s,status:t.target.value}),children:[e.jsx("option",{value:"ACTIVE",children:"Active"}),e.jsx("option",{value:"CLOSED",children:"Closed"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:"Campaign Name *"}),e.jsx(o,{value:s.campaign_name||"",onChange:t=>m({...s,campaign_name:t.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:"Objective *"}),e.jsx(o,{placeholder:"e.g. Engagement",value:s.objective||"",onChange:t=>m({...s,objective:t.target.value})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:"Platform *"}),e.jsx(o,{placeholder:"e.g. Facebook",value:s.platform||"",onChange:t=>m({...s,platform:t.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:"Spend (₹)"}),e.jsx(o,{type:"number",value:s.spend||0,onChange:t=>m({...s,spend:t.target.value})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:"Engagement"}),e.jsx(o,{type:"number",value:((fe=s.results_json)==null?void 0:fe.engagement)||"",onChange:t=>m({...s,results_json:{...s.results_json||{},engagement:t.target.value}})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:"Reach"}),e.jsx(o,{type:"number",value:((ve=s.results_json)==null?void 0:ve.reach)||"",onChange:t=>m({...s,results_json:{...s.results_json||{},reach:t.target.value}})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:"Impressions"}),e.jsx(o,{type:"number",value:((ye=s.results_json)==null?void 0:ye.impressions)||"",onChange:t=>m({...s,results_json:{...s.results_json||{},impressions:t.target.value}})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:"Leads"}),e.jsx(o,{type:"number",value:((Ne=s.results_json)==null?void 0:Ne.leads)||"",onChange:t=>m({...s,results_json:{...s.results_json||{},leads:t.target.value}})})]})]})]}),e.jsxs(O,{value:"google",className:"space-y-4 max-w-2xl",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:"Date"}),e.jsx(o,{type:"date",value:s.date?new Date(s.date).toISOString().split("T")[0]:"",onChange:t=>m({...s,date:new Date(t.target.value).toISOString()})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:"Status"}),e.jsxs("select",{className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm",value:s.status,onChange:t=>m({...s,status:t.target.value}),children:[e.jsx("option",{value:"ACTIVE",children:"Active"}),e.jsx("option",{value:"CLOSED",children:"Closed"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:"Campaign Name *"}),e.jsx(o,{value:s.campaign_name||"",onChange:t=>m({...s,campaign_name:t.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:"Campaign Type *"}),e.jsx(o,{placeholder:"e.g. Search, Display",value:s.campaign_type||"",onChange:t=>m({...s,campaign_type:t.target.value})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:"Spend (₹)"}),e.jsx(o,{type:"number",value:s.spend||0,onChange:t=>m({...s,spend:t.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:"Conversions"}),e.jsx(o,{type:"number",value:s.conversions||0,onChange:t=>m({...s,conversions:t.target.value})})]})]})]}),e.jsxs(O,{value:"seo",className:"space-y-4 max-w-2xl",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:"Month (1-12) *"}),e.jsx(o,{type:"number",value:s.month||"",onChange:t=>m({...s,month:t.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:"Year *"}),e.jsx(o,{type:"number",value:s.year||"",onChange:t=>m({...s,year:t.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:"Status"}),e.jsxs("select",{className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm",value:s.status,onChange:t=>m({...s,status:t.target.value}),children:[e.jsx("option",{value:"ACTIVE",children:"Active"}),e.jsx("option",{value:"CLOSED",children:"Closed"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:"Organic Traffic"}),e.jsx(o,{type:"number",value:s.organic_traffic||0,onChange:t=>m({...s,organic_traffic:t.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:"Summary"}),e.jsx(o,{value:s.summary||"",onChange:t=>m({...s,summary:t.target.value})})]})]})]}),e.jsx("div",{className:"mt-8 flex justify-end",children:e.jsx(j,{onClick:Ye,className:"bg-indigo-600 hover:bg-indigo-700 text-white min-w-[120px]",disabled:me.isPending||ge.isPending||he.isPending,children:S?"Update Data":"Save Data"})})]})})]})}),e.jsxs(O,{value:"leads",children:[e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-5 gap-4 mb-6",children:[e.jsxs(v,{className:"bg-blue-50/50 border-blue-100 flex flex-col items-center justify-center p-3 rounded-xl shadow-sm",children:[e.jsx("span",{className:"text-xs font-bold text-blue-600 mb-1",children:"Total Leads"}),e.jsx("span",{className:"text-2xl font-extrabold text-blue-900",children:q.total})]}),e.jsxs(v,{className:"bg-amber-50/50 border-amber-100 flex flex-col items-center justify-center p-3 rounded-xl shadow-sm",children:[e.jsx("span",{className:"text-xs font-bold text-amber-600 mb-1",children:"High Quality"}),e.jsx("span",{className:"text-2xl font-extrabold text-amber-900",children:q.highQuality})]}),e.jsxs(v,{className:"bg-green-50/50 border-green-100 flex flex-col items-center justify-center p-3 rounded-xl shadow-sm",children:[e.jsx("span",{className:"text-xs font-bold text-green-600 mb-1",children:"Converted Leads"}),e.jsx("span",{className:"text-2xl font-extrabold text-green-900",children:q.converted})]}),e.jsxs(v,{className:"bg-green-500 border-green-600 flex flex-col items-center justify-center p-3 rounded-xl shadow-sm",children:[e.jsx("span",{className:"text-xs font-bold text-white mb-1",children:"Positive Leads"}),e.jsx("span",{className:"text-2xl font-extrabold text-white",children:q.positive})]}),e.jsxs(v,{className:"bg-red-500 border-red-600 flex flex-col items-center justify-center p-3 rounded-xl shadow-sm",children:[e.jsx("span",{className:"text-xs font-bold text-white mb-1",children:"Negative Leads"}),e.jsx("span",{className:"text-2xl font-extrabold text-white",children:q.negative})]})]}),e.jsxs(v,{className:"border-none shadow-sm rounded-2xl overflow-hidden",children:[e.jsxs(De,{className:"flex flex-col md:flex-row items-start md:items-center justify-between border-b bg-gray-50/30 p-6 gap-4",children:[e.jsxs("div",{children:[e.jsx(Te,{className:"text-xl",children:"Leads Tracker"}),e.jsx(Ie,{children:"Track daily leads and manage follow-up sequences."})]}),e.jsxs("div",{className:"flex items-center flex-wrap gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 bg-white px-2 py-1.5 rounded-lg border shadow-sm",children:[e.jsx("span",{className:"text-xs font-bold text-gray-500 ml-1",children:"From:"}),e.jsx(o,{type:"date",value:z,onChange:t=>ie(t.target.value),className:"h-7 w-[130px] border-none shadow-none bg-transparent focus-visible:ring-0 px-1"}),e.jsx("span",{className:"text-xs font-bold text-gray-500 border-l pl-2",children:"To:"}),e.jsx(o,{type:"date",value:F,onChange:t=>oe(t.target.value),className:"h-7 w-[130px] border-none shadow-none bg-transparent focus-visible:ring-0 px-1"}),(z||F)&&e.jsx("button",{onClick:()=>{ie(""),oe("")},className:"text-gray-400 hover:text-red-500 mr-1 transiton-all",children:e.jsx(k,{size:14})})]}),e.jsxs(j,{onClick:()=>W(!0),className:"bg-indigo-600 hover:bg-indigo-700 text-white gap-2 h-10 px-6 rounded-lg font-semibold shadow-sm",children:[e.jsx(J,{size:18})," Add New Lead"]})]})]}),e.jsx(te,{className:"p-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(rt,{children:[e.jsx(it,{className:"bg-gray-50/50",children:e.jsxs(A,{children:[e.jsx(w,{className:"w-[120px] font-bold text-gray-700",children:"Date"}),e.jsx(w,{className:"font-bold text-gray-700",children:"Lead Info"}),e.jsx(w,{className:"font-bold text-gray-700",children:"Campaign"}),e.jsx(w,{className:"font-bold text-gray-700",children:"Location"}),e.jsx(w,{className:"w-[100px] font-bold text-gray-700",children:"Quality"}),e.jsx(w,{className:"w-[120px] font-bold text-gray-700",children:"Status"}),e.jsx(w,{className:"font-bold text-gray-700 min-w-[350px]",children:"Follow Ups"}),e.jsx(w,{className:"w-[120px] font-bold text-gray-700 text-center",children:"Feedback"}),e.jsx(w,{className:"w-[100px] text-right font-bold",children:"Actions"})]})}),e.jsxs(ot,{children:[re&&e.jsxs(A,{className:"bg-indigo-50/30 border-b-2 border-indigo-200",children:[e.jsx(c,{className:"p-2",children:e.jsx(o,{type:"date",value:(we=l.date)==null?void 0:we.split("T")[0],onChange:t=>x({...l,date:new Date(t.target.value).toISOString()}),className:"h-9"})}),e.jsxs(c,{className:"p-2 space-y-1",children:[e.jsx(o,{placeholder:"Name",value:l.name,onChange:t=>x({...l,name:t.target.value}),className:"h-9"}),e.jsx(o,{placeholder:"Phone",value:l.phone,onChange:t=>x({...l,phone:t.target.value}),className:"h-9"})]}),e.jsx(c,{className:"p-2",children:e.jsx(o,{placeholder:"Campaign",value:l.campaign_name,onChange:t=>x({...l,campaign_name:t.target.value}),className:"h-9"})}),e.jsx(c,{className:"p-2",children:e.jsx(o,{placeholder:"Location",value:l.address,onChange:t=>x({...l,address:t.target.value}),className:"h-9"})}),e.jsx(c,{className:"p-2",children:e.jsxs("select",{className:`flex h-9 w-full rounded-md border text-sm font-bold shadow-sm focus:ring-2 focus:ring-opacity-50 transition-colors ${ae[l.quality||"MEDIUM"]||"bg-white border-gray-300"} px-3 py-1`,value:l.quality,onChange:t=>x({...l,quality:t.target.value}),children:[e.jsx("option",{value:"HIGH",className:"bg-white text-gray-900 font-medium",children:"High"}),e.jsx("option",{value:"MEDIUM",className:"bg-white text-gray-900 font-medium",children:"Medium"}),e.jsx("option",{value:"LOW",className:"bg-white text-gray-900 font-medium",children:"Low"})]})}),e.jsx(c,{className:"p-2",children:e.jsxs("select",{className:`flex h-9 w-full rounded-md border text-sm font-bold shadow-sm focus:ring-2 focus:ring-opacity-50 transition-colors ${se[l.status||"NEW"]||"bg-white border-gray-300"} px-3 py-1`,value:l.status,onChange:t=>x({...l,status:t.target.value}),children:[e.jsx("option",{value:"NEW",className:"bg-white text-gray-900 font-medium",children:"New"}),e.jsx("option",{value:"CONTACTED",className:"bg-white text-gray-900 font-medium",children:"Contacted"}),e.jsx("option",{value:"QUALIFIED",className:"bg-white text-gray-900 font-medium",children:"Qualified"}),e.jsx("option",{value:"CONVERTED",className:"bg-white text-gray-900 font-medium",children:"Converted"}),e.jsx("option",{value:"LOST",className:"bg-white text-gray-900 font-medium",children:"Lost"})]})}),e.jsxs(c,{className:"p-2 space-y-2",children:[(Ce=l.follow_ups)==null?void 0:Ce.map((t,a)=>e.jsxs("div",{className:"flex gap-1 items-center bg-white p-2 rounded-lg border shadow-sm group",children:[e.jsx("span",{className:"text-[10px] font-bold bg-gray-100 px-1 rounded",children:t.follow_up_number}),e.jsxs("select",{value:t.channel||"Phone Call",onChange:n=>I(a,"channel",n.target.value),className:`h-7 text-xs flex-1 rounded font-bold border-none shadow-sm transition-colors ${t.channel==="Whatsapp"?"bg-green-100 text-green-700":t.channel==="Email"?"bg-purple-100 text-purple-700":t.channel==="In-Person"?"bg-amber-100 text-amber-700":"bg-blue-100 text-blue-700"}`,children:[e.jsx("option",{value:"Phone Call",className:"bg-white text-gray-900",children:"Phone Call"}),e.jsx("option",{value:"Whatsapp",className:"bg-white text-gray-900",children:"Whatsapp"}),e.jsx("option",{value:"Email",className:"bg-white text-gray-900",children:"Email"}),e.jsx("option",{value:"In-Person",className:"bg-white text-gray-900",children:"In-Person"})]}),e.jsx(o,{placeholder:"Status",value:t.status,onChange:n=>I(a,"status",n.target.value),className:"h-7 text-xs flex-1"}),e.jsx(o,{placeholder:"Notes",value:t.notes,onChange:n=>I(a,"notes",n.target.value),className:"h-7 text-xs flex-2"}),e.jsx(j,{variant:"ghost",size:"icon",className:"h-6 w-6 text-red-400 opacity-0 group-hover:opacity-100",onClick:()=>pe(a),children:e.jsx(k,{size:12})})]},a)),e.jsxs(j,{variant:"outline",size:"sm",onClick:ue,className:"w-full h-8 border-dashed text-indigo-600 hover:text-indigo-700 hover:bg-indigo-50",children:[e.jsx(J,{size:14,className:"mr-1"})," Add Follow Up"]})]}),e.jsx(c,{className:"p-2 text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("button",{onClick:()=>x({...l,is_positive:!0}),className:`p-1.5 rounded-full border ${l.is_positive===!0?"bg-green-500 text-white border-green-600 shadow-md":"bg-gray-50 text-gray-400 border-gray-200 hover:bg-green-50 hover:text-green-500"}`,children:e.jsx(ee,{size:16})}),e.jsx("button",{onClick:()=>x({...l,is_positive:!1}),className:`p-1.5 rounded-full border ${l.is_positive===!1?"bg-red-500 text-white border-red-600 shadow-md":"bg-gray-50 text-gray-400 border-gray-200 hover:bg-red-50 hover:text-red-500"}`,children:e.jsx(k,{size:16})})]})}),e.jsx(c,{className:"p-2 text-right",children:e.jsxs("div",{className:"flex justify-end gap-1",children:[e.jsx(j,{size:"icon",className:"h-10 w-10 bg-green-600 hover:bg-green-700 text-white",onClick:be,children:e.jsx($e,{size:18})}),e.jsx(j,{size:"icon",variant:"ghost",className:"h-10 w-10 text-gray-400",onClick:()=>W(!1),children:e.jsx(k,{size:18})})]})})]}),Ue?e.jsx(A,{children:e.jsx(c,{colSpan:8,className:"p-10 text-center text-muted-foreground",children:"Loading leads..."})}):(f==null?void 0:f.length)===0&&!re?e.jsx(A,{children:e.jsx(c,{colSpan:8,className:"p-20 text-center text-muted-foreground italic",children:"No leads found for this client."})}):X==null?void 0:X.map(t=>{var a,n,d;return Fe===t.id?e.jsxs(A,{className:"bg-amber-50/30 border-b-2 border-amber-200",children:[e.jsx(c,{className:"p-2",children:e.jsx(o,{type:"date",value:(a=l.date)==null?void 0:a.split("T")[0],onChange:r=>x({...l,date:new Date(r.target.value).toISOString()}),className:"h-9"})}),e.jsxs(c,{className:"p-2 space-y-1",children:[e.jsx(o,{placeholder:"Name",value:l.name,onChange:r=>x({...l,name:r.target.value}),className:"h-9 font-bold"}),e.jsx(o,{placeholder:"Phone",value:l.phone,onChange:r=>x({...l,phone:r.target.value}),className:"h-9 text-indigo-600"})]}),e.jsx(c,{className:"p-2",children:e.jsx(o,{placeholder:"Campaign",value:l.campaign_name,onChange:r=>x({...l,campaign_name:r.target.value}),className:"h-9"})}),e.jsx(c,{className:"p-2",children:e.jsx(o,{placeholder:"Location",value:l.address,onChange:r=>x({...l,address:r.target.value}),className:"h-9"})}),e.jsx(c,{className:"p-2",children:e.jsxs("select",{className:`flex h-9 w-full rounded-md border text-sm font-bold shadow-sm focus:ring-2 focus:ring-opacity-50 transition-colors ${ae[l.quality||"MEDIUM"]||"bg-white border-gray-300"} px-3 py-1`,value:l.quality,onChange:r=>x({...l,quality:r.target.value}),children:[e.jsx("option",{value:"HIGH",className:"bg-white text-gray-900 font-medium",children:"High"}),e.jsx("option",{value:"MEDIUM",className:"bg-white text-gray-900 font-medium",children:"Medium"}),e.jsx("option",{value:"LOW",className:"bg-white text-gray-900 font-medium",children:"Low"})]})}),e.jsx(c,{className:"p-2",children:e.jsxs("select",{className:`flex h-9 w-full rounded-md border text-sm font-bold shadow-sm focus:ring-2 focus:ring-opacity-50 transition-colors ${se[l.status||"NEW"]||"bg-white border-gray-300"} px-3 py-1`,value:l.status,onChange:r=>x({...l,status:r.target.value}),children:[e.jsx("option",{value:"NEW",className:"bg-white text-gray-900 font-medium",children:"New"}),e.jsx("option",{value:"CONTACTED",className:"bg-white text-gray-900 font-medium",children:"Contacted"}),e.jsx("option",{value:"QUALIFIED",className:"bg-white text-gray-900 font-medium",children:"Qualified"}),e.jsx("option",{value:"CONVERTED",className:"bg-white text-gray-900 font-medium",children:"Converted"}),e.jsx("option",{value:"LOST",className:"bg-white text-gray-900 font-medium",children:"Lost"})]})}),e.jsxs(c,{className:"p-2 space-y-2",children:[(n=l.follow_ups)==null?void 0:n.map((r,u)=>e.jsxs("div",{className:"flex gap-1 items-center bg-white p-2 rounded-lg border shadow-sm group",children:[e.jsx("span",{className:"text-[10px] font-bold bg-gray-100 px-1 rounded",children:r.follow_up_number}),e.jsxs("select",{value:r.channel||"Phone Call",onChange:L=>I(u,"channel",L.target.value),className:`h-7 text-xs flex-1 rounded font-bold border-none shadow-sm transition-colors ${r.channel==="Whatsapp"?"bg-green-100 text-green-700":r.channel==="Email"?"bg-purple-100 text-purple-700":r.channel==="In-Person"?"bg-amber-100 text-amber-700":"bg-blue-100 text-blue-700"}`,children:[e.jsx("option",{value:"Phone Call",className:"bg-white text-gray-900",children:"Phone Call"}),e.jsx("option",{value:"Whatsapp",className:"bg-white text-gray-900",children:"Whatsapp"}),e.jsx("option",{value:"Email",className:"bg-white text-gray-900",children:"Email"}),e.jsx("option",{value:"In-Person",className:"bg-white text-gray-900",children:"In-Person"})]}),e.jsx(o,{placeholder:"Status",value:r.status,onChange:L=>I(u,"status",L.target.value),className:"h-7 text-xs flex-1"}),e.jsx(o,{placeholder:"Notes",value:r.notes,onChange:L=>I(u,"notes",L.target.value),className:"h-7 text-xs flex-2"}),e.jsx(j,{variant:"ghost",size:"icon",className:"h-6 w-6 text-red-400",onClick:()=>pe(u),children:e.jsx(k,{size:12})})]},u)),e.jsxs(j,{variant:"outline",size:"sm",onClick:ue,className:"w-full h-8 border-dashed text-indigo-600",children:[e.jsx(J,{size:14,className:"mr-1"})," Add Follow Up"]})]}),e.jsx(c,{className:"p-2 text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("button",{onClick:()=>x({...l,is_positive:!0}),className:`p-1.5 rounded-full border ${l.is_positive===!0?"bg-green-500 text-white border-green-600 shadow-md":"bg-gray-50 text-gray-400 border-gray-200 hover:bg-green-50 hover:text-green-500"}`,children:e.jsx(ee,{size:16})}),e.jsx("button",{onClick:()=>x({...l,is_positive:!1}),className:`p-1.5 rounded-full border ${l.is_positive===!1?"bg-red-500 text-white border-red-600 shadow-md":"bg-gray-50 text-gray-400 border-gray-200 hover:bg-red-50 hover:text-red-500"}`,children:e.jsx(k,{size:16})})]})}),e.jsx(c,{className:"p-2 text-right",children:e.jsxs("div",{className:"flex justify-end gap-1",children:[e.jsx(j,{size:"icon",className:"h-10 w-10 bg-indigo-600 text-white",onClick:be,children:e.jsx($e,{size:18})}),e.jsx(j,{size:"icon",variant:"ghost",className:"h-10 w-10 text-gray-400",onClick:()=>K(null),children:e.jsx(k,{size:18})})]})})]},t.id):e.jsxs(A,{className:"hover:bg-gray-50/50 transition-colors",children:[e.jsx(c,{className:"font-medium text-gray-600",children:Z(new Date(t.date),"dd MMM yyyy")}),e.jsx(c,{children:e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("span",{className:"font-bold text-gray-900 flex items-center gap-1.5 hover:text-indigo-600 transition-colors cursor-default",children:[e.jsx(lt,{size:14,className:"text-gray-400"})," ",t.name]}),e.jsxs("span",{className:"text-xs text-indigo-600 font-medium flex items-center gap-1.5",children:[e.jsx(mt,{size:12})," ",t.phone]})]})}),e.jsx(c,{className:"text-gray-600 font-medium italic",children:t.campaign_name||"-"}),e.jsx(c,{className:"text-gray-600 max-w-[150px] truncate",children:e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(gt,{size:14,className:"text-gray-400 shrink-0"}),e.jsx("span",{className:"truncate",children:t.address||"N/A"})]})}),e.jsx(c,{children:e.jsx(dt,{variant:"outline",className:`${ae[t.quality]||""} text-[10px] font-bold`,children:t.quality})}),e.jsx(c,{children:e.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-[10px] font-bold ${se[t.status]||""}`,children:t.status})}),e.jsx(c,{children:e.jsx("div",{className:"space-y-1.5",children:((d=t.follow_ups)==null?void 0:d.length)===0?e.jsx("span",{className:"text-xs text-gray-400 italic",children:"No follow ups yet"}):t.follow_ups.map(r=>{var u;return e.jsxs("div",{className:"flex flex-col bg-gray-50 p-2 rounded-lg border border-gray-100 relative group",children:[e.jsxs("div",{className:"flex items-center justify-between mb-0.5",children:[e.jsxs("span",{className:"text-[10px] font-extrabold text-indigo-500 uppercase",children:[r.follow_up_number===1?"1st":r.follow_up_number===2?"2nd":r.follow_up_number===3?"3rd":`${r.follow_up_number}th`," Follow Up • ",e.jsx("span",{className:"text-gray-500",children:r.channel||"Phone Call"})]}),e.jsx("span",{className:"text-[9px] text-gray-400",children:Z(new Date(r.date),"dd/MM/yy")})]}),((u=r.status)==null?void 0:u.toUpperCase())!=="PENDING"&&e.jsx("div",{className:"text-xs font-bold text-gray-800",children:r.status}),r.notes&&e.jsx("div",{className:"text-[10px] text-gray-500 italic mt-0.5 border-t pt-0.5 border-gray-200",children:r.notes})]},r.id)})})}),e.jsx(c,{className:"text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("button",{onClick:()=>je(t,!0),className:`p-1.5 rounded-full border transition-all hover:scale-105 ${t.is_positive===!0?"bg-green-500 text-white border-green-600 shadow-md":"bg-gray-50 text-gray-400 border-gray-200 hover:bg-green-50 hover:text-green-500 hover:border-green-200"}`,title:"Mark as Positive",children:e.jsx(ee,{size:16})}),e.jsx("button",{onClick:()=>je(t,!1),className:`p-1.5 rounded-full border transition-all hover:scale-105 ${t.is_positive===!1?"bg-red-500 text-white border-red-600 shadow-md":"bg-gray-50 text-gray-400 border-gray-200 hover:bg-red-50 hover:text-red-500 hover:border-red-200"}`,title:"Mark as Negative",children:e.jsx(k,{size:16})})]})}),e.jsx(c,{className:"text-right p-2",children:e.jsxs("div",{className:"flex justify-end gap-1",children:[e.jsx(j,{size:"icon",variant:"ghost",className:"h-8 w-8 text-indigo-600 hover:bg-indigo-50",onClick:()=>Ge(t),children:e.jsx(G,{size:16})}),(g==null?void 0:g.role)==="DEVELOPER_ADMIN"&&e.jsx(j,{size:"icon",variant:"ghost",className:"h-8 w-8 text-red-500 hover:bg-red-50",onClick:()=>Re(t.id),children:e.jsx(Ee,{size:16})})]})})]},t.id)})]})]})})})]})]})]})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center p-20 min-h-[60vh]",children:[e.jsx("div",{className:"w-24 h-24 bg-purple-50 flex items-center justify-center rounded-full mb-6",children:e.jsx(ne,{size:40,className:"text-purple-300"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Start Here"}),e.jsx("p",{className:"text-gray-500 text-center max-w-sm",children:"Select a client from the purple menu above to begin managing their services."})]})};export{It as default};
