import{v as K,q as le,r as f,C as ne,x as v,j as e}from"./index-_K9dBzXA.js";import{an as oe,ao as te,u as L,a1 as ie,a4 as de,a6 as G,i as ce,S as me,X as pe,g as H,ag as U,a8 as h,a7 as l,am as z,ap as X}from"./index-C0_MxDCy.js";import{B as I,I as xe}from"./ImageUpload-DRrfqLP6.js";import{F as ue}from"./FormErrorAlert-DtE7FnRK.js";import{G as q,Z as he}from"./compat-BdhRJLCk.js";import{S as _}from"./save-BPR9f-BE.js";/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=K("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=K("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);function W(m){return oe(te,m)}const n="w-full p-2.5 border border-input bg-background rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-primary/20 transition-all placeholder:text-muted-foreground text-foreground disabled:opacity-50 disabled:cursor-not-allowed",$=["CO-FOUNDER","Creative Director","Art Director","Senior Graphic Designer","Graphic Designer","Copywriter","Content Strategist","Social Media Manager","Social Media Executive","SEO Specialist","Web Developer","Account Director","Account Manager","Client Servicing Executive","Media Planner","Media Buyer","Operations Manager","HR Manager","Office Administrator","Intern"],be=G({full_name:l().min(2,"Full Name is required"),email:l().email("Valid email is required"),password:l().optional(),role:h(["ADMIN","MANAGER","DM_EXECUTIVE","WEB_SEO_EXECUTIVE","CREATIVE_DESIGNER","OPERATIONS_EXECUTIVE","DEVELOPER_ADMIN"]),avatar_url:l().optional(),staff_number:l().min(1,"Staff ID is required (e.g., EMP-001)"),designation:l().min(1,"Designation is required"),custom_designation:l().optional(),department:h(["CREATIVE","MARKETING","WEB_SEO","WEB","MANAGEMENT","ADMIN"]),date_of_joining:l().min(1,"Joining Date is required"),reporting_manager_id:l().optional(),personal_email:l().email().optional().or(X("")),personal_contact:l().regex(/^\+?[\d\s-]{10,}$/,"Invalid phone number").optional().or(X("")),whatsapp_number:l().optional(),official_contact:l().optional(),date_of_birth:l().optional(),marital_status:h(["SINGLE","MARRIED","DIVORCED","WIDOWED"]).optional(),address:l().optional(),pincode:l().optional(),emergency_contact_name:l().optional(),emergency_contact_number:l().optional(),previous_company:l().optional(),total_experience_years:W().optional(),base_salary:W().optional(),salary_type:h(["MONTHLY","DAILY","CONTRACT"]).optional(),incentive_eligible:z().optional(),payroll_status:h(["ACTIVE","HOLD"]).optional(),ledger_options:G({create:z(),head_id:l().optional()}).optional(),bank_name:l().optional(),account_holder_name:l().optional(),account_number:l().optional(),ifsc_code:l().optional(),account_type:h(["SAVINGS","CURRENT"]).optional(),pan_number:l().optional(),upi_id:l().optional(),upi_linked_mobile:l().optional(),payment_method:h(["BANK_TRANSFER","CASH","CHEQUE","UPI"]).optional()}).superRefine((m,j)=>{var r;(r=m.ledger_options)!=null&&r.create&&!m.ledger_options.head_id&&j.addIssue({code:he.custom,message:"Account Head is required",path:["ledger_options","head_id"]})}),Se=({isOpen:m,onClose:j,initialData:r})=>{var R,P,O,F,D,V;const Y=le(),[d,c]=f.useState("profile"),[Q,E]=f.useState(!1),[k,J]=f.useState(null),[S,M]=f.useState(""),g=!!r,{data:C}=L({queryKey:["staff-list-simple"],queryFn:async()=>(await v.get("/team/staff")).data}),{data:b}=L({queryKey:["accountHeads"],queryFn:async()=>(await v.get("/accounting/heads")).data,enabled:m}),Z=ie({resolver:de(be),defaultValues:{department:"MARKETING",role:"DM_EXECUTIVE",date_of_joining:new Date().toISOString().split("T")[0],marital_status:"SINGLE",staff_number:"",designation:"",ledger_options:{create:!1,head_id:""},payment_method:"BANK_TRANSFER"}}),{register:a,handleSubmit:N,reset:A,watch:p,setValue:ee,formState:{errors:t,isSubmitting:T}}=Z,se=p("designation");f.useEffect(()=>{if(r){let s=r.designation,o="";s&&!$.includes(s)&&(o=s,s="Other"),A({...r.user,...r,designation:s,custom_designation:o,date_of_joining:r.date_of_joining?new Date(r.date_of_joining).toISOString().split("T")[0]:"",date_of_birth:r.date_of_birth?new Date(r.date_of_birth).toISOString().split("T")[0]:"",reporting_manager_id:r.reporting_manager_id||"",password:void 0,ledger_options:r.ledger_options||{create:!1,head_id:""}})}},[r,A]);const w=p("ledger_options.head_id");f.useEffect(()=>{if(w&&b){const s=b.find(o=>o.id===w);s&&M(s.type)}},[w,b]);const y=s=>{J(s),E(!0)},re=()=>{k&&(ae.mutate(k),E(!1))},x=ne.useRef(!1),ae=ce({mutationFn:async s=>{const o=s.designation==="Other"?s.custom_designation:s.designation;if(!o)throw new Error("Please specify the custom designation.");const i={...s,designation:o,password:g&&!s.password?void 0:s.password,reporting_manager_id:s.reporting_manager_id||void 0};return delete i.custom_designation,g?await v.patch(`/team/staff/${r.id}`,i):await v.post("/team/staff/onboard",i)},onSuccess:async()=>{await Y.refetchQueries({queryKey:["staff"]}),x.current&&(j(),A(),c("profile")),me.fire({title:x.current?"Success!":"Saved!",text:x.current?"Staff profile updated successfully.":"Progress saved. You can continue editing.",icon:"success",confirmButtonColor:"#8b5cf6",timer:1500,timerProgressBar:!0})},onError:s=>{var i,u;console.error(s);let o=((u=(i=s.response)==null?void 0:i.data)==null?void 0:u.message)||s.message||"Failed to save.";Array.isArray(o)?o=`Validation Errors:
`+o.map(B=>`- ${B.path.join(".")}: ${B.message}`).join(`
`):typeof o=="object"&&(o=JSON.stringify(o,null,2)),alert(o)}});return m?e.jsxs("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4 backdrop-blur-sm",children:[Q&&e.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-black/20 backdrop-blur-[1px]",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-2xl border max-w-sm w-full animate-in fade-in zoom-in duration-200",children:[e.jsx("h3",{className:"text-lg font-bold text-foreground mb-2",children:"Confirm Save"}),e.jsxs("p",{className:"text-gray-600 mb-6 text-sm",children:["Are you sure you want to ",g?"update":"onboard"," this staff member? This will update the system immediately."]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>E(!1),className:"px-4 py-2 text-muted-foreground hover:bg-muted/30 rounded-md font-medium text-sm",children:"Cancel"}),e.jsx("button",{onClick:re,className:"px-4 py-2 bg-primary text-white hover:bg-primary/90 rounded-md font-medium text-sm",children:"Yes, Save Changes"})]})]})}),e.jsxs("div",{className:"bg-background text-foreground border border-border",children:[e.jsxs("div",{className:"flex justify-between items-center p-5 border-b bg-muted/30 border-border",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-foreground",children:g?"Edit Staff Profile":"New Staff Onboarding"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Complete the profile to grant system access."})]}),e.jsx("button",{onClick:j,className:"p-2 hover:bg-muted rounded-full transition-colors",children:e.jsx(pe,{size:20,className:"text-gray-500"})})]}),e.jsx("div",{className:"flex border-b bg-white px-6 pt-2",children:[{id:"profile",label:"1. Profile & Access",icon:H},{id:"details",label:"2. Personal & HR",icon:I},{id:"payroll",label:"3. Payroll & Bank",icon:U},{id:"finance",label:"4. Finance Account",icon:q}].map(s=>e.jsxs("button",{onClick:()=>c(s.id),className:`flex items-center gap-2 px-6 py-3 border-b-2 text-sm font-medium transition-all ${d===s.id?"border-primary text-primary":"border-transparent text-gray-500 hover:text-foreground"}`,children:[e.jsx(s.icon,{size:16}),s.label]},s.id))}),Object.keys(t).length>0&&e.jsx("div",{className:"px-6 pt-4",children:e.jsx(ue,{errors:t})}),e.jsxs("form",{onSubmit:N(y),className:"flex-1 overflow-y-auto p-8 bg-gray-50/30",children:[d==="profile"&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 animate-in fade-in slide-in-from-bottom-2",children:[e.jsxs("div",{className:"col-span-1 flex flex-col items-center p-6 bg-white rounded-lg border border-gray-100 shadow-sm h-fit",children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-4 self-start",children:"Profile Photo"}),e.jsx(xe,{value:p("avatar_url"),onChange:s=>ee("avatar_url",s),label:"Upload Photo"}),e.jsxs("p",{className:"text-xs text-gray-400 mt-4 text-center",children:["Square JPG/PNG images work best.",e.jsx("br",{}),"Max size 2MB."]})]}),e.jsx("div",{className:"col-span-1 lg:col-span-2 space-y-6",children:e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"col-span-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-foreground mb-1",children:["Full Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{...a("full_name"),className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-primary/20 outline-none transition-all",placeholder:"e.g. Sarah Jones"}),t.full_name&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:t.full_name.message})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-foreground mb-1",children:["Email (System Login) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{...a("email"),className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-primary/20 outline-none transition-all",placeholder:"sarah@qixads.com"}),t.email&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:t.email.message})]}),!g&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-foreground mb-1",children:["Password ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"password",...a("password"),className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-primary/20 outline-none transition-all",placeholder:"******"}),t.password&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:t.password.message})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-foreground mb-1",children:["System Role ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{...a("role"),disabled:p("role")==="DEVELOPER_ADMIN",className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-primary/20 outline-none transition-all bg-background disabled:bg-muted disabled:text-muted-foreground cursor-pointer disabled:cursor-not-allowed",children:[e.jsx("option",{value:"DEVELOPER_ADMIN",className:"font-bold text-red-600",children:"Developer Admin (Super User)"}),e.jsx("option",{value:"ADMIN",children:"Admin (Full Access)"}),e.jsx("option",{value:"MANAGER",children:"Manager (Team & Clients)"}),e.jsx("option",{value:"DM_EXECUTIVE",children:"DM Executive"}),e.jsx("option",{value:"WEB_SEO_EXECUTIVE",children:"Web & SEO Executive"}),e.jsx("option",{value:"CREATIVE_DESIGNER",children:"Creative Designer"}),e.jsx("option",{value:"OPERATIONS_EXECUTIVE",children:"Operations Executive"})]}),p("role")==="DEVELOPER_ADMIN"&&e.jsx("p",{className:"text-xs text-red-500 mt-1 font-medium",children:"This role cannot be changed."}),p("role")!=="DEVELOPER_ADMIN"&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Determines system permissions."})]})]})}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsxs("h4",{className:"font-semibold text-foreground mb-4 flex items-center gap-2",children:[e.jsx(I,{size:18,className:"text-gray-400"})," Work Identifiers"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-foreground mb-1",children:["Staff ID (Manual) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{...a("staff_number"),className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-primary/20 outline-none transition-all uppercase",placeholder:"QIX-001"}),t.staff_number&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:t.staff_number.message})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-foreground mb-1",children:["Designation ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative space-y-2",children:[e.jsxs("select",{...a("designation"),className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-primary/20 outline-none transition-all bg-white appearance-none",children:[e.jsx("option",{value:"",children:"Select Designation..."}),$.map(s=>e.jsx("option",{value:s,children:s},s)),e.jsx("option",{value:"Other",children:"Other (Type below)"})]}),se==="Other"&&e.jsx("input",{...a("custom_designation"),placeholder:"Enter Custom Designation",className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-primary/20 outline-none transition-all animate-in fade-in slide-in-from-top-1"})]}),t.designation&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:t.designation.message})]}),e.jsxs("div",{children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-foreground mb-1",children:["Department ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{...a("department"),className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-primary/20 outline-none transition-all bg-white",children:[e.jsx("option",{value:"MARKETING",children:"Marketing"}),e.jsx("option",{value:"CREATIVE",children:"Creative"}),e.jsx("option",{value:"WEB_SEO",children:"Web & SEO"}),e.jsx("option",{value:"MANAGEMENT",children:"Management"}),e.jsx("option",{value:"ADMIN",children:"Admin / HR"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-foreground mb-1",children:["Date of Joining ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",...a("date_of_joining"),className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-primary/20 outline-none transition-all"}),t.date_of_joining&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:t.date_of_joining.message})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-1",children:"Reporting Manager"}),e.jsxs("select",{...a("reporting_manager_id"),className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-primary/20 outline-none transition-all bg-white",children:[e.jsx("option",{value:"",children:"None (Self-Managed)"}),C==null?void 0:C.map(s=>e.jsxs("option",{value:s.user.id,children:[s.user.full_name," (",s.designation,")"]},s.user.id))]})]})]})]})]})]}),d==="details"&&e.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-right-4",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold text-foreground mb-4 pb-2 border-b flex items-center gap-2",children:[e.jsx(H,{size:18,className:"text-blue-500"})," Personal Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Personal Mobile"}),e.jsx("input",{...a("personal_contact"),className:n,placeholder:"+91 98765 43210"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"WhatsApp"}),e.jsx("input",{...a("whatsapp_number"),className:n,placeholder:"+91 98765 43210"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Personal Email"}),e.jsx("input",{...a("personal_email"),className:n,placeholder:"personal@gmail.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Date of Birth"}),e.jsx("input",{type:"date",...a("date_of_birth"),className:n})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Marital Status"}),e.jsxs("select",{...a("marital_status"),className:n,children:[e.jsx("option",{value:"SINGLE",children:"Single"}),e.jsx("option",{value:"MARRIED",children:"Married"}),e.jsx("option",{value:"DIVORCED",children:"Divorced"}),e.jsx("option",{value:"WIDOWED",children:"Widowed"})]})]}),e.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[e.jsx("label",{className:"label",children:"Residential Address"}),e.jsx("textarea",{...a("address"),rows:2,className:n,placeholder:"Full address..."})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold text-foreground mb-4 pb-2 border-b flex items-center gap-2",children:[e.jsx(ge,{size:18,className:"text-red-500"})," Emergency Contact"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Contact Person"}),e.jsx("input",{...a("emergency_contact_name"),className:n,placeholder:"Name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Emergency Number"}),e.jsx("input",{...a("emergency_contact_number"),className:n,placeholder:"Phone"})]})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold text-foreground mb-4 pb-2 border-b flex items-center gap-2",children:[e.jsx(q,{size:18,className:"text-gray-500"})," Experience"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Previous Company"}),e.jsx("input",{...a("previous_company"),className:n})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Total Expr (Years)"}),e.jsx("input",{type:"number",step:"0.1",...a("total_experience_years"),className:n})]})]})]})]})]}),d==="payroll"&&e.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-right-4",children:[e.jsxs("div",{className:"bg-muted/30 p-6 rounded-xl border border-border",children:[e.jsxs("h4",{className:"font-semibold text-foreground mb-4 flex items-center gap-2",children:[e.jsx(U,{size:18})," Salary Configuration"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label text-gray-400",children:"Base Salary"}),e.jsx("input",{disabled:!0,className:`${n} bg-muted text-muted-foreground cursor-not-allowed`,value:"Manage in Payroll"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Salary Type"}),e.jsxs("select",{...a("salary_type"),className:`${n} border-blue-200`,children:[e.jsx("option",{value:"MONTHLY",children:"Monthly"}),e.jsx("option",{value:"DAILY",children:"Daily"}),e.jsx("option",{value:"CONTRACT",children:"Contract"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Payroll Status"}),e.jsxs("select",{...a("payroll_status"),className:`${n} border-blue-200`,children:[e.jsx("option",{value:"ACTIVE",children:"Active"}),e.jsx("option",{value:"HOLD",children:"Hold (No Payout)"})]})]}),e.jsx("div",{className:"md:col-span-3 space-y-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",...a("incentive_eligible"),className:"w-4 h-4 text-blue-600 rounded"}),e.jsx("span",{className:"text-sm text-foreground",children:"Eligible for Performance Incentives/Commissions"})]})})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-foreground mb-4 pb-2 border-b",children:"Bank Account Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Bank Name"}),e.jsx("input",{...a("bank_name"),className:n,placeholder:"e.g. HDFC Bank"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Account Holder"}),e.jsx("input",{...a("account_holder_name"),className:n,placeholder:"As on Passbook"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Account Number"}),e.jsx("input",{...a("account_number"),className:n,placeholder:"XXXXXXX"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"IFSC Code"}),e.jsx("input",{...a("ifsc_code"),className:"input-std uppercase",placeholder:"Upper Case"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Payment Mode"}),e.jsxs("select",{...a("payment_method"),className:n,children:[e.jsx("option",{value:"BANK_TRANSFER",children:"Bank Transfer"}),e.jsx("option",{value:"CASH",children:"Cash"}),e.jsx("option",{value:"CHEQUE",children:"Cheque"}),e.jsx("option",{value:"UPI",children:"UPI"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Account Type"}),e.jsxs("select",{...a("account_type"),className:n,children:[e.jsx("option",{value:"SAVINGS",children:"Savings"}),e.jsx("option",{value:"CURRENT",children:"Current"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"PAN Number"}),e.jsx("input",{...a("pan_number"),className:n,placeholder:"ABCDE1234F"})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-foreground mb-4 pb-2 border-b",children:"UPI / Digital Payment"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"UPI ID"}),e.jsx("input",{...a("upi_id"),className:n,placeholder:"user@bank"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Linked Mobile"}),e.jsx("input",{...a("upi_linked_mobile"),className:n})]})]})]})]}),d==="finance"&&e.jsx("div",{className:"space-y-8 animate-in fade-in slide-in-from-right-4",children:e.jsxs("div",{className:"bg-muted/30 p-6 rounded-xl border border-border",children:[e.jsxs("h4",{className:"font-semibold text-primary mb-4 flex items-center gap-2",children:[e.jsx(I,{size:18})," Finance Account / Ledger"]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-6",children:"Create or link a ledger account for this staff member to track payroll, expenses, and payments."}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("input",{type:"checkbox",id:"create_ledger",...a("ledger_options.create"),disabled:(R=r==null?void 0:r.ledger_options)==null?void 0:R.create,className:"w-4 h-4 text-primary border-primary/20 rounded focus:ring-purple-500 disabled:opacity-50"}),e.jsx("label",{htmlFor:"create_ledger",className:`text-sm font-medium ${(P=r==null?void 0:r.ledger_options)!=null&&P.create?"text-gray-500":"text-foreground"}`,children:(O=r==null?void 0:r.ledger_options)!=null&&O.create?"Finance Account / Ledger (Already Linked)":"Create Finance Account / Ledger"})]}),(p("ledger_options.create")||((F=r==null?void 0:r.ledger_options)==null?void 0:F.create))&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 p-4 bg-white rounded-lg border border-purple-100 animate-in fade-in slide-in-from-top-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Account Type"}),e.jsxs("select",{className:n,value:S,disabled:!!((D=r==null?void 0:r.ledger_options)!=null&&D.create),onChange:s=>M(s.target.value),children:[e.jsx("option",{value:"",children:"All Types"}),e.jsx("option",{value:"ASSET",children:"Asset"}),e.jsx("option",{value:"LIABILITY",children:"Liability"}),e.jsx("option",{value:"EXPENSE",children:"Expense"}),e.jsx("option",{value:"INCOME",children:"Income"})]}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Filter heads by type"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Account Head"}),e.jsxs("select",{...a("ledger_options.head_id"),disabled:!!((V=r==null?void 0:r.ledger_options)!=null&&V.create),className:n,children:[e.jsx("option",{value:"",children:"Select Head..."}),b==null?void 0:b.filter(s=>!S||s.type===S).map(s=>e.jsxs("option",{value:s.id,children:[s.name," (",s.code,")"]},s.id))]}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Select the parent ledger Head"})]})]})]})]})})]}),e.jsxs("div",{className:"p-5 border-t bg-muted/30 border-border flex justify-end gap-3",children:[e.jsx("button",{onClick:j,className:"px-6 py-2.5 text-sm font-medium text-foreground hover:bg-muted rounded-lg transition-colors",children:"Cancel"}),d==="profile"&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>{x.current=!1,N(y)()},className:"px-4 py-2 text-sm font-medium bg-green-600 text-white hover:bg-green-700 rounded-md shadow-sm transition-colors flex items-center gap-2",children:[e.jsx(_,{size:16})," Save"]}),e.jsx("button",{onClick:()=>c("details"),className:"btn-primary",children:"Next: Personal & HR"})]}),d==="details"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>c("profile"),className:"btn-secondary",children:"Back"}),e.jsxs("button",{onClick:()=>{x.current=!1,N(y)()},className:"px-4 py-2 text-sm font-medium bg-green-600 text-white hover:bg-green-700 rounded-md shadow-sm transition-colors flex items-center gap-2",children:[e.jsx(_,{size:16})," Save"]}),e.jsx("button",{onClick:()=>c("payroll"),className:"btn-primary",children:"Next: Payroll"})]}),d==="payroll"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>c("details"),className:"btn-secondary",children:"Back"}),e.jsxs("button",{onClick:()=>{x.current=!1,N(y)()},className:"px-4 py-2 text-sm font-medium bg-green-600 text-white hover:bg-green-700 rounded-md shadow-sm transition-colors flex items-center gap-2",children:[e.jsx(_,{size:16})," Save"]}),e.jsx("button",{onClick:()=>c("finance"),className:"btn-primary",children:"Next: Finance"})]}),d==="finance"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>c("payroll"),className:"btn-secondary",children:"Back"}),e.jsxs("button",{onClick:()=>{x.current=!0,N(y,s=>{console.error("Frontend Validation Errors:",s);let o=`Please check the form for errors:
`;Object.keys(s).forEach(i=>{const u=s[i];u!=null&&u.message?o+=`- ${i}: ${u.message}
`:i==="ledger_options"&&(o+=`- Finance Account: Check details
`)}),alert(o)})()},disabled:T,className:"btn-primary flex items-center gap-2",children:[e.jsx(_,{size:18}),T?"Saving...":g?"Save and Close":"Complete Onboarding"]})]})]})]}),e.jsxs("style",{children:[" ",`
                .label { display: block; font-size: 0.85rem; font-weight: 500; color: #4b5563; margin-bottom: 0.25rem; }
                .input-std { width: 100%; padding: 0.6rem 0.75rem; border: 1px solid #d1d5db; border-radius: 0.5rem; outline: none; transition: all 0.2s; font-size: 0.9rem; }
                .input-std:focus { border-color: #3b82f6; box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.1); }
                .btn-primary { background-color: #0f172a; color: white; padding: 0.6rem 1.5rem; border-radius: 0.5rem; font-weight: 500; font-size: 0.9rem; transition: background 0.2s; }
                .btn-primary:hover { background-color: #1e293b; }
                .btn-primary:disabled { opacity: 0.7; cursor: not-allowed; }
                .btn-secondary { background-color: transparent; color: #4b5563; padding: 0.6rem 1.25rem; font-weight: 500; font-size: 0.9rem; border: 1px solid #d1d5db; border-radius: 0.5rem; }
                .btn-secondary:hover { background-color: #f3f4f6; }
            `]})]}):null};export{Ee as C,Se as S};
